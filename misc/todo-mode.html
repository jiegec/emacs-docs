<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html lang="en">
<head>
<title>Todo Mode User Manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="Todo Mode User Manual">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 2013-2016 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being "A GNU Manual", and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     "GNU Free Documentation License".

     (a) The FSF's Back-Cover Text is: "You have the freedom to copy and
     modify this GNU manual."
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">Todo Mode User Manual</h1>
   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li>
<a name="toc_Top" href="#Top">Todo Mode User Manual</a>
</li>
<li>
<a name="toc_Overview" href="#Overview">1 Overview</a>
<ul>
<li>
<a href="#Levels-of-Organization">1.1 Levels of Organization</a>
</li>
<li>
<a href="#Todo-Items-as-Diary-Entries">1.2 Todo Items as Diary Entries</a>
</li>
</ul>
</li>
<li>
<a name="toc_Todo-Mode-Entry-Points" href="#Todo-Mode-Entry-Points">2 Todo Mode Entry Points</a>
</li>
<li>
<a name="toc_Key-Binding-Conventions" href="#Key-Binding-Conventions">3 Key Binding Conventions</a>
</li>
<li>
<a name="toc_Navigation" href="#Navigation">4 Navigation</a>
</li>
<li>
<a name="toc_Editing" href="#Editing">5 Editing</a>
<ul>
<li>
<a href="#File-Editing">5.1 File Editing and Todo Edit Mode</a>
</li>
<li>
<a href="#Category-Editing">5.2 Category Editing</a>
</li>
<li>
<a href="#Item-Editing">5.3 Item Editing</a>
<ul>
<li>
<a href="#Inserting-New-Items">5.3.1 Inserting New Items</a>
</li>
<li>
<a href="#Editing-Item-Headers-and-Text">5.3.2 Editing Item Headers and Text</a>
</li>
<li>
<a href="#Relocating-and-Removing-Items">5.3.3 Relocating and Removing Items</a>
<ul>
<li>
<a href="#Reprioritizing-Items">5.3.3.1 Reprioritizing Items</a>
</li>
<li>
<a href="#Moving-and-Deleting-Items">5.3.3.2 Moving and Deleting Items</a>
</li>
<li>
<a href="#Done-Items">5.3.3.3 Done Items</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a name="toc_Todo-Archives" href="#Todo-Archives">6 Todo Archives</a>
<ul>
<li>
<a href="#Creating-and-Visiting-Archives">6.1 Creating and Visiting Archives</a>
</li>
<li>
<a href="#Todo-Archive-Mode">6.2 Todo Archive Mode</a>
</li>
</ul>
</li>
<li>
<a name="toc_Marked-Items" href="#Marked-Items">7 Marked Items</a>
</li>
<li>
<a name="toc_Todo-Categories-Mode" href="#Todo-Categories-Mode">8 Todo Categories Mode</a>
<ul>
<li>
<a href="#Table-of-Item-Counts">8.1 Table of Item Counts</a>
</li>
<li>
<a href="#Reordering-Categories">8.2 Reordering Categories</a>
</li>
</ul>
</li>
<li>
<a name="toc_Searching-for-Items" href="#Searching-for-Items">9 Searching for Items</a>
</li>
<li>
<a name="toc_Todo-Filtered-Items-Mode" href="#Todo-Filtered-Items-Mode">10 Todo Filtered Items Mode</a>
<ul>
<li>
<a href="#Filtering-Items">10.1 Filtering Items</a>
</li>
<li>
<a href="#Todo-Filtered-Items-Mode-Commands">10.2 Todo Filtered Items Mode Commands</a>
</li>
<li>
<a href="#Files-of-Filtered-Items">10.3 Files of Filtered Items</a>
</li>
</ul>
</li>
<li>
<a name="toc_Todo-Display-Features" href="#Todo-Display-Features">11 Todo Display Features</a>
<ul>
<li>
<a href="#Faces">11.1 Faces</a>
</li>
<li>
<a href="#Item-Prefix">11.2 Item Prefix</a>
</li>
<li>
<a href="#Other-Display-Commands-and-Options">11.3 Other Display Commands and Options</a>
</li>
</ul>
</li>
<li>
<a name="toc_Printing-Todo-Buffers" href="#Printing-Todo-Buffers">12 Printing Todo Buffers</a>
</li>
<li>
<a name="toc_Legacy-Todo-Mode-Files" href="#Legacy-Todo-Mode-Files">13 Legacy Todo Mode Files</a>
</li>
<li>
<a name="toc_GNU-Free-Documentation-License" href="#GNU-Free-Documentation-License">Appendix A GNU Free Documentation License</a>
</li>
</ul>
</div>



<pagebreak></pagebreak><div class="node"><a name="Top"></a></div>

<h2 class="unnumbered">Todo Mode User Manual</h2>

<p>This manual describes the version of Todo mode first appearing in
Emacs 24.4.

   </p>
<p>Copyright © 2013-2016 Free Software Foundation, Inc.

   </p>
<blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being “A GNU Manual”,
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled “GNU Free Documentation License”.

        <p>(a) The FSF's Back-Cover Text is: “You have the freedom to copy and
modify this GNU manual.”
</p>
</blockquote>

<ul class="menu">
<li>
<a accesskey="1" href="#Overview">Overview</a>
</li>
<li>
<a accesskey="2" href="#Todo-Mode-Entry-Points">Todo Mode Entry Points</a>
</li>
<li>
<a accesskey="3" href="#Key-Binding-Conventions">Key Binding Conventions</a>
</li>
<li>
<a accesskey="4" href="#Navigation">Navigation</a>:                   Moving within and between categories. 
</li>
<li>
<a accesskey="5" href="#Editing">Editing</a>:                      Adding, deleting and changing todo
                                  files, categories and items. 
</li>
<li>
<a accesskey="6" href="#Todo-Archives">Todo Archives</a>:                Files of done todo items. 
</li>
<li>
<a accesskey="7" href="#Marked-Items">Marked Items</a>:                 Acting on multiple items simultaneously. 
</li>
<li>
<a accesskey="8" href="#Todo-Categories-Mode">Todo Categories Mode</a>:         Table of categories and item counts. 
</li>
<li>
<a accesskey="9" href="#Searching-for-Items">Searching for Items</a>
</li>
<li>
<a href="#Todo-Filtered-Items-Mode">Todo Filtered Items Mode</a>:     Making virtual categories of items from
                                  different categories and files. 
</li>
<li>
<a href="#Todo-Display-Features">Todo Display Features</a>
</li>
<li>
<a href="#Printing-Todo-Buffers">Printing Todo Buffers</a>
</li>
<li>
<a href="#Legacy-Todo-Mode-Files">Legacy Todo Mode Files</a>:       Converting old-style todo files.

</li>
<li>
<a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>

</li>
</ul>
<p>--- The Detailed Node Listing ---

</p>
<p>Overview

</p>
<ul class="menu">
<li>
<a href="#Levels-of-Organization">Levels of Organization</a>
</li>
<li>
<a href="#Todo-Items-as-Diary-Entries">Todo Items as Diary Entries</a>

</li>
</ul>
<p>Editing

</p>
<ul class="menu">
<li>
<a href="#File-Editing">File Editing</a>
</li>
<li>
<a href="#Category-Editing">Category Editing</a>
</li>
<li>
<a href="#Item-Editing">Item Editing</a>

</li>
</ul>
<p>Item Editing

</p>
<ul class="menu">
<li>
<a href="#Inserting-New-Items">Inserting New Items</a>
</li>
<li>
<a href="#Editing-Item-Headers-and-Text">Editing Item Headers and Text</a>
</li>
<li>
<a href="#Relocating-and-Removing-Items">Relocating and Removing Items</a>

</li>
</ul>
<p>Relocating and Removing Items

</p>
<ul class="menu">
<li>
<a href="#Reprioritizing-Items">Reprioritizing Items</a>
</li>
<li>
<a href="#Moving-and-Deleting-Items">Moving and Deleting Items</a>
</li>
<li>
<a href="#Done-Items">Done Items</a>

</li>
</ul>
<p>Todo Archives

</p>
<ul class="menu">
<li>
<a href="#Creating-and-Visiting-Archives">Creating and Visiting Archives</a>
</li>
<li>
<a href="#Todo-Archive-Mode">Todo Archive Mode</a>

</li>
</ul>
<p>Todo Categories Mode

</p>
<ul class="menu">
<li>
<a href="#Table-of-Item-Counts">Table of Item Counts</a>
</li>
<li>
<a href="#Reordering-Categories">Reordering Categories</a>

</li>
</ul>
<p>Todo Filtered Items Mode

</p>
<ul class="menu">
<li>
<a href="#Filtering-Items">Filtering Items</a>
</li>
<li>
<a href="#Todo-Filtered-Items-Mode-Commands">Todo Filtered Items Mode Commands</a>
</li>
<li>
<a href="#Files-of-Filtered-Items">Files of Filtered Items</a>

</li>
</ul>
<p>Todo Display Features

</p>
<ul class="menu">
<li>
<a href="#Faces">Faces</a>
</li>
<li>
<a href="#Item-Prefix">Item Prefix</a>
</li>
<li>
<a href="#Other-Display-Commands-and-Options">Other Display Commands and Options</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Overview"></a></div>

<h2 class="chapter">1 Overview</h2>

<p>The Todo mode package provides facilities for making and maintaining
todo lists.  A todo list is a list of todo items—things to do (in the
widest sense)—arranged in order of priority, with the highest priority
item at the top of the list and the lowest priority item at the bottom.

   </p>
<p>This manual describes the Todo mode user interface.  Todo mode comprises
a large number of commands and user options for creating, displaying,
navigating and editing todo lists, distributed across five major modes. 
The principle major mode is Todo mode; the other four (Todo Edit mode,
Todo Archive mode, Todo Categories mode, and Todo Filtered Items mode)
are subsidiary to and accessible from Todo mode.

   </p>
<p>This version of Todo mode greatly expands on, and in significant ways
differs from, the original version; for details and consequences of the
most important differences, <a href="#Legacy-Todo-Mode-Files">Legacy Todo Mode Files</a>.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#Levels-of-Organization">Levels of Organization</a>
</li>
<li>
<a accesskey="2" href="#Todo-Items-as-Diary-Entries">Todo Items as Diary Entries</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Levels-of-Organization"></a></div>

<h3 class="section">1.1 Levels of Organization</h3>

<p>In Todo mode each todo list is identified with a named category, so you
can group together thematically related todo items.  Each category is
stored in a file, which thus provides a further level of organization. 
You can create as many todo files, and in each as many categories, as
you want.

   </p>
<p>All todo files reside in a single directory, whose location is specified
by the user option <code>todo-directory</code>.  This directory may also
contain other types of Todo files, which are discussed later
(see <a href="#Todo-Archive-Mode">Todo Archive Mode</a> and <a href="#Todo-Filtered-Items-Mode">Todo Filtered Items Mode</a>). 
<!-- Emacs recognizes Todo files by their extension, so when you visit -->
<!-- the files the buffer is in the appropriate mode and the current -->
<!-- category is correctly displayed. -->
When you use a Todo mode command to create a todo file, the extension
`<samp><span class="samp">.todo</span></samp>' is automatically added to the base name you choose (as a
rule, this name is also used for the other types of Todo files, which
have their own extensions).  As a user, you only have to deal with the
base name of a Todo file.

   </p>
<p>When you create a new todo file, you must also add at least one category
to it, and each todo item belongs to a category.  It is not possible to
have an uncategorized todo list, but you can always make a catch-all
category with a generic name like “Todo”, which is in fact the default
name assigned to the first category when you create a new todo file, if
you don't provide a different name; you can change the default by
customizing <code>todo-initial-category</code>.

   </p>
<p>The most basic level of organization is the todo item itself, since it
contains the information about what you want to do.  As detailed in
subsequent sections of this manual, most Todo mode commands and user
options concern ways of classifying and deploying this information by
associating various kinds of metadata with it, e.g., the category it
belongs to, its priority, whether it is to be included in the Emacs
diary, date and time stamps, whether it is done or still to do.

</p>
<pagebreak></pagebreak><div class="node"><a name="Todo-Items-as-Diary-Entries"></a></div>

<h3 class="section">1.2 Todo Items as Diary Entries</h3>

<p>You can have todo items show up in the Emacs Fancy Diary display by
including the todo file in your diary file (see <a href="emacs.html#Fancy-Diary-Display">Fancy Diary Display</a>).  This effectively augments the Emacs diary with
categorized diary entries.  All items in an included todo file will
appear in the Fancy Diary display except for those that are marked
with <code>todo-nondiary-marker</code>.  You can add or omit this marking
upon creating a new todo item, or you can do so by editing an existing
item, see <a href="#Inserting-New-Items">Inserting New Items</a> and <a href="#Editing-Item-Headers-and-Text">Editing Item Headers and Text</a> for details.

   </p>
<p>To ensure the proper display of todo items in the Fancy Diary display,
they must have the format of diary entries, i.e., they have to begin
with a date string recognized by the Emacs diary,<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a> and if
they are longer than one line, all lines but the first must begin with
white space.  Todo mode ensures that these requirements are satisfied
(see <a href="#Other-Display-Commands-and-Options">Other Display Commands and Options</a>).

   </p>
<p>The Fancy Diary display is also Todo mode aware: if it contains an item
from a Todo mode file, clicking or typing &lt;RET&gt; on this item will
switch to the buffer visiting that file and properly display the item's
category, with point on the item.

</p>
<pagebreak></pagebreak><div class="node"><a name="Todo-Mode-Entry-Points"></a></div>

<h2 class="chapter">2 Todo Mode Entry Points</h2>

<p>To initialize your first todo file, invoke the command <code>todo-show</code>. 
This prompts you for a file name (defaulting to the value of
<code>todo-initial-file</code>), prompts you for the name of the first
category (defaulting to the value of <code>todo-initial-category</code>),
creates and visits the file and displays the category in Todo mode, and
then prompts you to enter the first item.  If you choose not to enter an
item now, simply type <kbd>C-g</kbd>, which leaves the category empty but
otherwise well-formed.  If you prefer not to be prompted to enter an
item on adding a new category, disable the option
<code>todo-add-item-if-new-category</code>.

   </p>
<p>Once at least one todo file exists, invoking <code>todo-show</code> enters
Todo mode.  Invoked with a prefix argument, the command prompts for
which todo file to visit.  Otherwise, the first invocation of this
command after loading the Todo mode package visits the default todo file
(option <code>todo-default-todo-file</code>) and shows its first category. 
(You can get a different display with the first invocation of
<code>todo-show</code> by customizing the option <code>todo-show-first</code>;
see <a href="#Todo-Categories-Mode">Todo Categories Mode</a> and <a href="#Files-of-Filtered-Items">Files of Filtered Items</a>.)

   </p>
<p>If you leave Todo mode and later invoke <code>todo-show</code> to re-enter it,
by default this returns you to the current (i.e., last displayed)
category of the current todo file, which is the one in the most recently
selected and still live buffer visiting a todo file.  If you disable the
option <code>todo-show-current-file</code>, then non-initial invocations of
<code>todo-show</code> always return to the first or current category of the
default todo file.

   </p>
<p>If you want to enter Todo mode and go directly to a specific category
instead the first or current category in the current or default todo
file, use the command <code>todo-jump-to-category</code>; <a href="#Navigation">Navigation</a>,
for details.  You can also enter Todo mode by invoking the command
<code>todo-insert-item</code>; <a href="#Inserting-New-Items">Inserting New Items</a>, for details.

   </p>
<p>The most convenient way to use these commands to enter Todo mode is to
define global key bindings for them in your init file.  Good choices
are <kbd>C-c t</kbd> for <code>todo-show</code>, <kbd>C-c j</kbd> for
<code>todo-jump-to-category</code> and <kbd>C-c i</kbd> for
<code>todo-insert-item</code>, since these commands are bound to <kbd>t</kbd>,
<kbd>j</kbd> and <kbd>i</kbd>, respectively, in Todo mode.

<!-- You can also visit a Todo file via @code{find-file} or Dired, like any -->
<!-- other file, and since Emacs recognizes it, the buffer will automatically -->
<!-- be in the appropriate Todo mode.  Moreover, as long as the command you -->
<!-- use to visit the file is listed in the option -->
<!-- @code{todo-visit-files-commands} (which by default contains -->
<!-- @code{find-file} and @code{dired-find-file}), it will also correctly -->
<!-- display the file's first category on first visiting the file (otherwise -->
<!-- you have to use one of the commands for navigating between categories in -->
<!-- order to get a proper display). -->
</p>
<p>You can leave Todo mode by typing <kbd>q</kbd> (<code>todo-quit</code>), which
buries the current todo file buffer.  Doing this also saves any changes
you have made to the file, and leaves both the file and the category
that was displayed on quitting current for subsequent Todo mode commands
(unless the buffer made current by quitting is visiting another file and
category in Todo mode, in which case the latter become current for Todo
mode commands).

</p>
<pagebreak></pagebreak><div class="node"><a name="Key-Binding-Conventions"></a></div>

<h2 class="chapter">3 Key Binding Conventions</h2>

<p>For Todo mode commands to function properly, it is essential to maintain
the correct format at all three levels of organization—item, category,
and file.  Todo mode tries to minimize the risk of format corruption by
hiding certain parts of the format from the user, making the buffer
read-only and suppressing the self-insertion keys.  Consequently, it is
normally impossible to make changes to your todo files without
explicitly invoking Todo mode commands.

   </p>
<p>A beneficial side effect of this restrictiveness is that you can invoke
almost all Todo commands by typing ordinary printing characters, either
singly or in specified sequences, without using modifier keys, except
for the shift key for capitalization and the raw prefix argument
<kbd>C-u</kbd>; numeric prefix arguments can be entered just by typing a
number key.

   </p>
<p>The predefined key bindings in Todo are more or less mnemonic.  As a
rule, key sequences beginning with <kbd>C</kbd> (capital `<samp><span class="samp">C</span></samp>', not the
control key) are bound to commands applying to categories, sequences
beginning with <kbd>F</kbd> apply to (non-archive) file-level commands, and
those beginning with <kbd>A</kbd> apply to archives (a special type of Todo
file; <a href="#Todo-Archive-Mode">Todo Archive Mode</a>).  Todo commands applying to items,
which constitute the majority, are bound to lower case key sequences.

</p>
<pagebreak></pagebreak><div class="node"><a name="Navigation"></a></div>

<h2 class="chapter">4 Navigation</h2>

<p>The navigation commands are for making another todo file, category, or
item the current one by moving point to it.<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a> Since these
commands are likely to be used frequently and repetitively, it is
convenient for their key bindings to be single lower case keys, even for
navigation commands applying to categories and files.

   </p>
<p>Two of the navigation commands were already mentioned in <a href="#Todo-Mode-Entry-Points">Todo Mode Entry Points</a>:

     </p>
<dl>
<dt><kbd>t</kbd></dt>
<dd>Display another todo file in the selected window (<code>todo-show</code>). 
When you invoke this command in Todo mode, it prompts for a file name,
which you can choose via minibuffer completion (like invoking
<code>todo-show</code> with a prefix argument outside of Todo mode).  If a
buffer is already visiting that file, it displays its current category;
if invoking <kbd>t</kbd> opens the file, it display its first category (by
default; see the option <code>todo-show-first</code> for other possibilities).

     <br>
</dd>
<dt><kbd>j</kbd></dt>
<dd>Display another todo category in the selected window
(<code>todo-jump-to-category</code>).  When you invoke this command, it
prompts for a category name, which you can choose via minibuffer
completion.  The candidates for completion include the categories in the
current todo file as well as those in the files listed in the option
<code>todo-category-completions-files</code>.  If you type &lt;RET&gt; without
choosing a category, the current category of the current todo file is
automatically selected (this can be a useful shortcut when you invoke
<code>todo-jump-to-category</code> outside of Todo mode).  If you type the
name of a non-existing category, you can add this to the file as a new
category and jump to it.  If you invoke this command with a prefix
argument, it first you prompts for which todo file to jump to (which you
can also choose with minibuffer completion) and then for which category
from that file; in this case, completion is only against the categories
in the selected file. 
</dd>
</dl>

   <p>It is also convenient to navigate back and forth sequentially between
the categories of a single todo file.  The categories of a todo file are
numbered consecutively starting with `<samp><span class="samp">1</span></samp>'.<a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a>  The current category's number and name appear in the mode line.

     </p>
<dl>
<dt><kbd>f</kbd></dt>
<dd>Move point to the first item of the category numerically directly
following the current category (<code>todo-forward-category</code>).

     <br>
</dd>
<dt><kbd>b</kbd></dt>
<dd>Move point to the first item of the category numerically directly
preceding the current category (<code>todo-backward-category</code>). 
</dd>
</dl>

   <p>With <kbd>f</kbd> and <kbd>b</kbd> you can cycle through the categories, so for example,
if the last category is current and you type <kbd>f</kbd>, then the first
category becomes current.

   </p>
<p>You can also navigate between the items in the current category:

     </p>
<dl>
<dt><kbd>n</kbd></dt>
<dd>Move point down to the next item below the current one (i.e., to the
item with the next lower priority) (<code>todo-next-item</code>).

     <br>
</dd>
<dt><kbd>p</kbd></dt>
<dd>Move point up to the item directly above the current one (i.e., to the
item with the next higher priority) (<code>todo-previous-item</code>). 
</dd>
</dl>

   <p>These commands also accept a positive numeric prefix argument; e.g.,
typing <kbd>5 n</kbd> or <kbd>5 p</kbd> navigates in one step to the item five items lower
or higher than the current one.

   </p>
<p>Navigation to other types of Todo files is discussed in the relevant
sections below.

</p>
<pagebreak></pagebreak><div class="node"><a name="Editing"></a></div>

<h2 class="chapter">5 Editing</h2>

<p>Editing in Todo mode means making structural or textual changes at one
of the levels of organization (file, category, or item).  Structural
editing includes adding, relocating and removing units of information
at a level; textual editing includes renaming files or categories and
changing an item's content or date/time stamp, or adding certain kinds
of marks or tags to items.  Todo mode provides commands, detailed in
the following sections, which enable you to quickly and safely make
changes to your todo lists, without having to worry about preserving
the file format.

   </p>
<p>To save changes you make to the current todo file,
type <kbd>s</kbd> (<code>todo-save</code>).  Changes are also saved on quitting
Todo mode with <kbd>q</kbd>.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#File-Editing">File Editing</a>
</li>
<li>
<a accesskey="2" href="#Category-Editing">Category Editing</a>
</li>
<li>
<a accesskey="3" href="#Item-Editing">Item Editing</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="File-Editing"></a></div>

<h3 class="section">5.1 File Editing and Todo Edit Mode</h3>

<p>There are four file-level editing commands:

     </p>
<dl>
<dt><kbd>F a</kbd></dt>
<dd>Add a new todo file (<code>todo-add-file</code>).  This command prompts for
a name and creates the file in <code>todo-directory</code>, adding the
`<samp><span class="samp">.todo</span></samp>' extension (so you should not include the extension in the
name you enter).  The command also prompts for the file's first
category and, if option <code>todo-add-item-if-new-category</code> is
enabled (the default), for that category's first item.

     <br>
</dd>
<dt><kbd>F r</kbd></dt>
<dd>Rename the current todo file (<code>todo-rename-file</code>).  If called with
a prefix argument, prompt for a todo file and rename it.  If the todo
file has an archive (see <a href="#Todo-Archive-Mode">Todo Archive Mode</a>) or there are
corresponding filtered items files (see <a href="#Todo-Filtered-Items-Mode">Todo Filtered Items Mode</a>),
this command renames these accordingly.  If there are live buffers
visiting any of these files, the command also renames them accordingly.

     <br>
</dd>
<dt><kbd>F k</kbd></dt>
<dd>Delete the current todo file (<code>todo-delete-file</code>).<a rel="footnote" href="#fn-4" name="fnd-4"><sup>4</sup></a>  If the todo file has an archive
(see <a href="#Todo-Archive-Mode">Todo Archive Mode</a>), prompt for whether to delete that as well. 
This command also kills the buffers visiting the deleted files.

     <br>
</dd>
<dt><kbd>F e</kbd></dt>
<dd>This command (<code>todo-edit-file</code>) changes the buffer's major mode to
Todo Edit mode.  In this mode the entire file is visible, the buffer is
writable and you can use the self-insertion keys and standard Emacs
editing commands to make changes.  To return to Todo mode, type <kbd>C-x
C-q</kbd> (<code>todo-edit-quit</code>).

     <p>The command <kbd>F e</kbd> is not intended for normal editing of items and
categories, as it circumvents the restrictions that Todo imposes to
protect against file format corruption (i.e., all categories, not just
the current one, and all internal formatting are exposed and editable). 
It is provided primarily as a convenience for two types of use cases
that are likely to arise infrequently.  One is to be able to use
standard Emacs commands like <code>query-replace</code> to replace a piece of
text that occurs in different categories throughout the file.  The other
use case is to recover from a mistake, such as accidentally deleting an
item, since this cannot be undone in Todo mode.

     </p>
<p>Using <kbd>C-x C-q</kbd> to quit Todo Edit mode provides a measure of
safety, since it runs a file format check, signaling an error if the
format has become invalid.  However, this check cannot tell if the
number of items or categories changed, which could result in the file
containing inconsistent information (see the cautionary note in
<a href="#Reordering-Categories">Reordering Categories</a>, for more details).  Invoking <kbd>F e</kbd>
displays a warning to this effect. 
</p>
</dd>
</dl>

<pagebreak></pagebreak><div class="node"><a name="Category-Editing"></a></div>

<h3 class="section">5.2 Category Editing</h3>

<p>The following commands are available for editing specifically at the
category level (for two other category-editing commands, which are
extensions of item commands, see <a href="#Editing-Item-Headers-and-Text">Editing Item Headers and Text</a>):

     </p>
<dl>
<dt><kbd>C a</kbd></dt>
<dd>Add a new category to the current todo file and make that category
current (<code>todo-add-category</code>).  If called with a prefix argument,
prompt for a file name and add the new category to that file.  This
command is similar to using <kbd>j</kbd>, but it only accepts category names
that are not the name of an existing category in the file.

     <br>
</dd>
<dt><kbd>C r</kbd></dt>
<dd>Rename the current category (<code>todo-rename-category</code>).  If this
category's file has an archive (see <a href="#Todo-Archive-Mode">Todo Archive Mode</a>) with a
corresponding category, rename the category there as well.

     <br>
</dd>
<dt><kbd>C m</kbd></dt>
<dd>Move the current category (with all its items) to another todo file
(<code>todo-move-category</code>).  If this category's file has an archive
(see <a href="#Todo-Archive-Mode">Todo Archive Mode</a>) with a corresponding category, this command
also moves that category to the archive file corresponding to the moved
to todo file; if there is no such archive file, the command creates it
and adds the category.

     <br>
</dd>
<dt><kbd>C k</kbd></dt>
<dd>Delete the current category (<code>todo-delete-category</code>).<a rel="footnote" href="#fn-5" name="fnd-5"><sup>5</sup></a>  To delete a category that contains items, you
have to confirm your intent; if the category is empty, deletion is
immediate.

     <br>
</dd>
<dt><kbd>C g</kbd></dt>
<dd>Merge the items of one category into another category, delete the first
category and make the second category current
(<code>todo-merge-category</code>).  If both the first and second categories
also have archived items (see <a href="#Todo-Archive-Mode">Todo Archive Mode</a>), merge the former
to the latter.  If only the first category has archived items, rename
the archive category to the merged to category.  Minibuffer completion
of the name of the category merged to works as with the navigation
command <kbd>j</kbd>, and as with that command, passing a prefix argument,
i.e., typing <kbd>C-u C g</kbd>, prompts for a file and confines merging to a
category in that file. 
</dd>
</dl>

<pagebreak></pagebreak><div class="node"><a name="Item-Editing"></a></div>

<h3 class="section">5.3 Item Editing</h3>

<p>Todo mode provides commands for adding new items as well as textually
changing, deleting and relocating existing items.  The commands and
associated options for adding and editing items, in particular, offer
you a lot of flexibility to fine-tune these operations to your needs.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#Inserting-New-Items">Inserting New Items</a>
</li>
<li>
<a accesskey="2" href="#Editing-Item-Headers-and-Text">Editing Item Headers and Text</a>
</li>
<li>
<a accesskey="3" href="#Relocating-and-Removing-Items">Relocating and Removing Items</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Inserting-New-Items"></a></div>

<h4 class="subsection">5.3.1 Inserting New Items</h4>

<p>To add a new todo item to a category, type <kbd>i</kbd>, which is bound to
the command <code>todo-insert-item</code>.

     </p>
<dl>
<dt><kbd>i</kbd></dt>
<dd>This command is the entry point for inserting new items into a
category (<code>todo-insert-item</code>).  It prompts for additional keys
until reaching a complete key sequence, which specifies the insertion
parameters you wish to apply (see below).  It then prompts for the
text of the item, which you enter in the minibuffer.<a rel="footnote" href="#fn-6" name="fnd-6"><sup>6</sup></a>  Called with one prefix
argument, it also prompts for a category, and called with two prefix
arguments, it prompts for both a file and a category from that file,
and inserts the item accordingly; category name completion works as
with the navigation command <kbd>j</kbd>.  Finally, it inserts the item
into the current or selected category of the current or selected todo
file at the position in the list corresponding to the priority you
choose, which also depends on the insertion parameters. 
</dd>
</dl>

<p class="noindent">The name of this command reflects the fact that you can insert a new
item into the category at any position, giving each new item any
priority in the list, whereas speaking of adding an item to a category
suggests appending it to the top or bottom.

   </p>
<p>In addition to its file and category, each newly inserted todo item
has a priority in the category and begins with a header string, which
includes at least the current date in the same format used by
<code>diary-insert-entry</code> (see <a href="emacs.html#Date-Formats">Date Formats</a>).  You can
specify the priority and the content of the header string in two ways. 
First, you can set the following item insertion options, which apply
on every invocation of <code>todo-insert-item</code>.

     </p>
<ul>
<li>
<code>todo-default-priority</code> is for automatically assigning a new item
the highest or lowest priority in the category, if you do not
explicitly assign it a priority on invoking <code>todo-insert-item</code>. 
By default, such new items are given highest priority, i.e., inserted
at the top of the list.

     </li>
<li>
<code>todo-always-add-time-string</code> is for including or omitting the
current time in the new item's header.  By default, this time string
is omitted.

     </li>
<li>
<code>todo-include-in-diary</code> is for specifying whether the item
appears in the Fancy Diary display (when the todo file is included in
the Emacs diary file) by adding or omitting
<code>todo-nondiary-marker</code>.  By default, new todo items are so
marked, thus excluded from the diary.

     </li>
<li>
<code>todo-diary-nonmarking</code> is for adding or omitting
<code>diary-nonmarking-symbol</code> to items displayed in the diary, to
control whether they are marked in the calendar (see <a href="emacs.html#Format-of-Diary-File">Format of Diary File</a>).  By default, todo items that are diary entries
lack this symbol, thus are marked in the calendar. 
</li>
</ul>

   <p>Beside setting these options, for more flexibility you can also pass
certain parameters on each invocation of <code>todo-insert-item</code>. 
These parameters concern not only the new item's priority and header,
but also its textual content.  You pass these parameters by typing a
sequence of one or more keys after the initial <kbd>i</kbd>.

   </p>
<p>Here is a list of the item insertion parameters together with their
mnemonically associated keys<a rel="footnote" href="#fn-7" name="fnd-7"><sup>7</sup></a> and descriptions of their effect in
<code>todo-insert-item</code>:

     </p>
<ol type="1" start="1">

     <li>`<samp><span class="samp">default</span></samp>' (<kbd>i</kbd>): Prompt for the new item's priority
(a number between 1 and one more than the number of items already in
the category) and add a header string conforming to the values of the
above options.

     <p>`<samp><span class="samp">copy</span></samp>' (<kbd>p</kbd>): Make an exact copy of the item at point,
including its header string, and prompt for its priority.  (This is
useful for quickly making a new todo item whose text or header you
want to differ only partly from that of an existing item: after
inserting the copy, you can quickly edit it as needed by using
operations described in the next section.)

     </p>
</li>
<li>`<samp><span class="samp">diary</span></samp>' (<kbd>y</kbd>): Override the option
<code>todo-include-in-diary</code>; that is, add <code>todo-nondiary-marker</code>
if the option is non-<code>nil</code>, omit this marker if the option is <code>nil</code>.

     <p>`<samp><span class="samp">nonmarking</span></samp>' (<kbd>k</kbd>): Override the option
<code>todo-diary-nonmarking</code>; that is, add
<code>diary-nonmarking-symbol</code> if the option is non-<code>nil</code>, omit this
symbol if the option is <code>nil</code>.  Since this symbol only applies to diary
items, the new item is automatically marked as such, i.e., lacks
<code>todo-nondiary-marker</code>.

     </p>
</li>
<li>`<samp><span class="samp">calendar</span></samp>' (<kbd>c</kbd>): Pop up the Emacs calendar and click a date
in it to use that date in the new todo item's header.

     <p>`<samp><span class="samp">date</span></samp>' (<kbd>d</kbd>): Prompt for entering in the minibuffer
the year, month (with completion) and day number components of the
header.

     </p>
<p>`<samp><span class="samp">dayname</span></samp>' (<kbd>n</kbd>): Prompt for entering in the minibuffer
a weekday name as the date header instead of a year-month-day string.

     </p>
</li>
<li>`<samp><span class="samp">time</span></samp>' (<kbd>t</kbd>): Prompt for entering a time string in
the minibuffer instead of automatically inserting the current time;
however, typing &lt;RET&gt; at the prompt enters the current time if
<code>todo-always-add-time-string</code> is non-<code>nil</code>, otherwise it enters the
empty string (i.e., no time string).

     </li>
<li>`<samp><span class="samp">here</span></samp>' (<kbd>h</kbd>): Insert the new item in the position of
the item at point, pushing that and all lower items in the category
down, i.e., lowering their priority, by one.

     <p>`<samp><span class="samp">region</span></samp>' (<kbd>r</kbd>): Use the text of the selected region as the
text of the new item, and insert this in accordance with the item
insertion options and other parameters passed.  If the option
<code>todo-use-only-highlighted-region</code> is non-<code>nil</code>, then use the
region only when it is highlighted; otherwise, use the region
regardless of highlighting.
        </p>
</li>
</ol>

   <p>Note that the parameters are divided into five numbered groups; within
a group, the parameters are mutually exclusive.  Hence, to build a
complete insertion operation, you select at most one parameter from at
least one of these groups, by typing the corresponding key.  If you
want to apply more than one parameter, you must type the corresponding
keys in the order of the numbered groups, subject to the following
constraints.

   </p>
<p>The keys of groups 2-4 are continuation keys, that is, each can be
followed by a key from a following group.  If you want to finish the
sequence with a continuation key, you must double the final key.  For
example, <kbd>i y</kbd> is not a complete key sequence; rather, you must
type <kbd>i y y</kbd>.

   </p>
<p>By contrast, the keys of groups 1 and 5 are final keys; for example,
<kbd>i i</kbd> and <kbd>i h</kbd> are complete sequences.  The reason for making
two separate groups of the final keys is that the parameters
`<samp><span class="samp">default</span></samp>' and `<samp><span class="samp">copy</span></samp>' cannot be combined with any other
parameters, while `<samp><span class="samp">here</span></samp>' and `<samp><span class="samp">region</span></samp>' can be combined with
any of the parameters from groups 2-4.

   </p>
<p>To aid you in building item insertion key sequences, when you type an
insertion key, this displays a prompt in the echo area showing pairs
of the remaining possible keys and their associated parameters,
grouped and ordered in accordance with the above list.  The initial
prompt, after typing <kbd>i</kbd> to invoke <code>todo-insert-item</code>, looks
like this:

</p>
<pre class="example">     Press a key (so far <kbd>i</kbd>):  { i=&gt;default p=&gt;copy } { y=&gt;diary k=&gt;nonmarking } { c=&gt;calendar d=&gt;date n=&gt;dayname } t=&gt;time { h=&gt;here r=&gt;region }
</pre>
   <p class="noindent">If you now type <kbd>y</kbd>, the prompt changes to this:

</p>
<pre class="example">     Press a key (so far <kbd>i y</kbd>):  y=&gt;diary:GO! { c=&gt;calendar d=&gt;date n=&gt;dayname } t=&gt;time { h=&gt;here r=&gt;region }
</pre>
   <p class="noindent">Notice that the pair `<samp><span class="samp">k=&gt;nonmarking</span></samp>' is now absent, since it
belongs to the same group as the selected pair `<samp><span class="samp">y=&gt;diary</span></samp>', hence
is no longer available for this sequence.  Since <kbd>y</kbd> is a
continuation key, it is still available, but now the string
`<samp><span class="samp">:GO!</span></samp>' is appended to the pair to remind you that pressing this
key again will complete the sequence.

<!-- Here are some examples of item insertion command key sequences: -->
<!-- @itemize @bullet -->
<!-- @item -->
<!-- @kbd{i h} inserts a new item at the position of the item at point (pushing -->
<!-- the latter down) with a header containing the current date and, -->
<!-- depending on the values of the mentioned options, possibly the current -->
<!-- time and diary-related markings. -->
<!-- @item -->
<!-- @kbd{i y h} does the same as the preceding command, except that -->
<!-- @code{todo-nondiary-marker} is added if @code{todo-include-in-diary} is -->
<!-- non-@code{nil} and omitted if that option is @code{nil}; that is, -->
<!-- the diary key @kbd{y} @c overrides the setting of this option. -->
<!-- @item -->
<!-- @kbd{i y t h} does the same as the preceding command, except that it -->
<!-- prompts for a time string instead of automatically inserting the -->
<!-- current time; however, typing @key{RET} at the prompt returns the -->
<!-- current time if @code{todo-always-add-time-string} is non-@code{nil}, -->
<!-- otherwise the empty string (i.e., no time string). -->
<!-- @item -->
<!-- @kbd{i y t t} does the same as the preceding command, except that it -->
<!-- prompts for the item's priority and inserts it accordingly. -->
<!-- @end itemize -->
</p>
<p>An alternative to the key sequence <kbd>i c c</kbd> for choosing the item's
date from the calendar is also available: when point is already on a
date in the calendar, typing <kbd>i t</kbd>
(<code>todo-insert-item-from-calendar</code>) prompts for a new item and its
priority and inserts it in the current category.  This command, like
<code>todo-insert-item</code>, also accepts one or two prefix arguments for
choosing the category via minibuffer completion.  Note, however, that
the key sequence <kbd>i t</kbd> is not defined in Todo mode but in the
Calendar mode keymap.  It is a convenient shortcut if you happen to be
using the calendar when you decide to make a new todo item.  (Contrast
this with passing the `<samp><span class="samp">calendar</span></samp>' parameter, which pops open the
calendar after you have entered the item's text, and then you can
choose a date from the calendar.)

</p>
<pagebreak></pagebreak><div class="node"><a name="Editing-Item-Headers-and-Text"></a></div>

<h4 class="subsection">5.3.2 Editing Item Headers and Text</h4>

<p>To make changes to an existing item's content or header, type <kbd>e</kbd>,
which is bound to the command <code>todo-edit-item</code>.

     </p>
<dl>
<dt><kbd>e</kbd></dt>
<dd>This command is the entry point for textually editing existing items
in a category (<code>todo-edit-item</code>).  It prompts for additional keys
until reaching a complete key sequence, which specifies the editing
parameters you wish to apply (see below), and then executes the
editing operation accordingly. 
</dd>
</dl>

   <p>Here is a list of the item editing parameters together with their
mnemonically associated keys and descriptions of their effect in
<code>todo-edit-item</code>.  The list is divided into three groups, for
reasons explained below.

     </p>
<ol type="1" start="1">

     <li>`<samp><span class="samp">edit</span></samp>' (<kbd>e</kbd>): Edit the text of the current item in the
minibuffer; the item's header is omitted.

     <p>`<samp><span class="samp">header</span></samp>' (<kbd>h</kbd>): Edit the text and header of the current item
in the minibuffer.

     </p>
<p>`<samp><span class="samp">multiline</span></samp>' (<kbd>m</kbd>): Edit the text of the current item in a
special buffer in Todo Edit mode.  After editing, type <kbd>C-x C-q</kbd>
to return to Todo mode.<a rel="footnote" href="#fn-8" name="fnd-8"><sup>8</sup></a>

     </p>
<p>`<samp><span class="samp">diary</span></samp>' (<kbd>y</kbd>): Change the current item's diary inclusion
status by adding <code>todo-nondiary-marker</code> if the item lacks this,
or by removing it if present.

     </p>
<p>`<samp><span class="samp">nonmarking</span></samp>' (<kbd>k</kbd>): Change the current item's calendar
marking status by adding <code>diary-nonmarking-symbol</code> if the item
lacks this, or by removing it if present. Since this symbol only
applies to diary items, the item is automatically marked as such,
i.e., if <code>todo-nondiary-marker</code> is present, it is removed.

     </p>
<p>`<samp><span class="samp">date</span></samp>' (<kbd>d</kbd>): Prompt for a final key from the second group
of item editing parameters to edit the current item's date string.

     </p>
<p>`<samp><span class="samp">time</span></samp>' (<kbd>t</kbd>): Edit the current item's time string, if
present; otherwise, add one.  Typing &lt;RET&gt; at the prompt enters
the current time if <code>todo-always-add-time-string</code> is non-<code>nil</code>,
otherwise it enters the empty string (i.e., no time string).
        </p>
</li>
</ol>

<p class="noindent">Editing the text of a lengthy item in the minibuffer can be
inconvenient; therefore, if you type <kbd>e e</kbd> or <kbd>e h</kbd> on an item
whose text contains more than one logical line, the effect is the same
as if you had typed <kbd>e m</kbd>, that is, you switch a special buffer in
Todo Edit mode.

   </p>
<p>When you pass any of the parameters of the preceding group, except for
the `<samp><span class="samp">date</span></samp>' parameter, this completes the item editing invocation
begun by typing <kbd>e</kbd>.  Pressing <kbd>d</kbd> to pass the `<samp><span class="samp">date</span></samp>'
parameter, however, prompts you with the following parameters and
their associated keys, and pressing any of these completes the
invocation.

     </p>
<ol type="1" start="2">

     <li>`<samp><span class="samp">full</span></samp>' (<kbd>f</kbd>): Successively prompt for editing the year, month
(with completion) and day number parts of the current item's date
string, and, if the option <code>todo-always-add-time-string</code> is
non-<code>nil</code>, also for editing its time string.

     <p>`<samp><span class="samp">calendar</span></samp>' (<kbd>c</kbd>): This pops up the Emacs calendar, and after
you type &lt;RET&gt; on a date in the calendar makes that date the
item's date.

     </p>
<p>`<samp><span class="samp">today</span></samp>' (<kbd>a</kbd>): Make the item's date today's date.

     </p>
<p>`<samp><span class="samp">dayname</span></samp>' (<kbd>n</kbd>): Prompt for a weekday name (with completion)
and make it the item's date header.  Note that this replaces an
existing date string, it does not add the day name to the date string.

     </p>
<p>`<samp><span class="samp">year</span></samp>' (<kbd>y</kbd>): Edit just the year component of the current
item's date string.

     </p>
<p>`<samp><span class="samp">month</span></samp>' (<kbd>m</kbd>): Edit just the month component of the current
item's date string (with completion).

     </p>
<p>`<samp><span class="samp">daynum</span></samp>' (<kbd>d</kbd>): Edit just the day number component of the
current item's date string.
        </p>
</li>
</ol>

<p class="noindent">With the latter three parameters you can add a positive or negative
numeric prefix argument to the invocation: this increments or
decrements the selected date component by the given number and
automatically adjusts the other date components if necessary.  For
example, if the item's date string is “January 1, 2013”, then typing
<kbd>- 3 e d d</kbd> results in “December 29, 2012”.

   </p>
<p>The first two groups of parameters apply only to todo items that are
not marked as done (see <a href="#Done-Items">Done Items</a>); the two parameters of the
third group, in contrast, apply only to done todo items.  You cannot
edit the text of such items, but you can edit or delete the comment
you may have added on marking the item as done (see <a href="#Done-Items"><code>todo-item-done</code></a>,), or retroactively add a comment, by passing
either of these parameters.

     </p>
<ol type="1" start="3">

     <li>`<samp><span class="samp">add/edit comment</span></samp>' (<kbd>c</kbd>): Edit the current done item's
comment, if it has one; otherwise, prompt for and add a comment.

     <p>`<samp><span class="samp">delete comment</span></samp>' (<kbd>d</kbd>): Delete the current done item's
comment, if it has one.
        </p>
</li>
</ol>

   <p>The command <code>todo-edit-item</code> is sensitive to the distinction
between not done and done todo items.  If you type <kbd>e</kbd> when point
is on a done item, this displays the following prompt in the echo
area:

</p>
<pre class="example">     Press a key (so far <kbd>e</kbd>): c=&gt;add/edit comment d=&gt;delete comment
</pre>
   <p class="noindent">Only by typing <kbd>c</kbd> or <kbd>d</kbd> in response to this prompt can you
complete the invocation.  In contrast, if you type <kbd>e</kbd> when point
is on a non-done todo item, this displays the following prompt in the
echo area, and you can continue or complete the invocation only by
typing one of the listed keys:

</p>
<pre class="example">     Press a key (so far <kbd>e</kbd>): e=&gt;edit h=&gt;header m=&gt;multiline y=&gt;diary k=&gt;nonmarking d=&gt;date t=&gt;time
</pre>
   <p>As noted above, passing the `<samp><span class="samp">date</span></samp>' parameter does not complete
the invocation of <code>todo-edit-item</code>; rather, it displays the
following prompt, and typing any of these keys does complete the
invocation:

</p>
<pre class="example">     Press a key (so far <kbd>e d</kbd>): f=&gt;full c=&gt;calendar a=&gt;today n=&gt;dayname y=&gt;year m=&gt;month d=&gt;daynum
</pre>
   <p>In addition to the item-level invocations <kbd>e y</kbd>, to change the
current item's diary inclusion status, and <kbd>e k</kbd>, to change the
current item's calendar marking status, Todo mode also has two related
category-level commands:

     </p>
<dl>
<dt>
<kbd>C e y</kbd><dt><kbd>C e k</kbd></dt>
</dt>
<dd>Add <code>todo-nondiary-marker</code> and <code>diary-nonmarking-symbol</code>,
respectively, to all todo items in the current category; if invoked with
a prefix argument, these markings are removed from all items in the
category. 
</dd>
</dl>

<p class="noindent">Like <kbd>e k</kbd>, <kbd>C e k</kbd> automatically removes <code>todo-nondiary-marker</code>
from all items it is present on, since only diary items can bear
<code>diary-nonmarking-symbol</code>.

   </p>
<p>Since categories often contain a mix of items marked for diary
inclusion and exclusion, and of the former, a mix of those to be
marked and those not to be marked in the calendar, it is more useful
for these category-level commands, unlike the item-level commands, not
to be toggles, but to have the same effect on all items in the
category, and take a prefix argument to reverse the effect.  (If you
really want to toggle the diary-inclusion and calendar-marking status
of all items in the category, you can do this by marking all the items
and then invoking <kbd>e y</kbd> or <kbd>e k</kbd>, see <a href="#Marked-Items">Marked Items</a>).

</p>
<pagebreak></pagebreak><div class="node"><a name="Relocating-and-Removing-Items"></a></div>

<h4 class="subsection">5.3.3 Relocating and Removing Items</h4>

<p>In addition to inserting a new todo item and changing the text or header
of an existing item, you can also move an item to another category
(i.e., recategorize it), change its priority within its category, delete
it from the category and file, or mark it as a “done” item, which
removes it from the todo list but does not delete it.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#Reprioritizing-Items">Reprioritizing Items</a>
</li>
<li>
<a accesskey="2" href="#Moving-and-Deleting-Items">Moving and Deleting Items</a>
</li>
<li>
<a accesskey="3" href="#Done-Items">Done Items</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Reprioritizing-Items"></a></div>

<h5 class="subsubsection">5.3.3.1 Reprioritizing Items</h5>

<p>There are three ways to change a todo item's priority:

     </p>
<dl>
<dt><kbd>r</kbd></dt>
<dd>Raise the current item's priority by one, exchanging its position in the list
with that of the item directly above it (<code>todo-raise-item-priority</code>).

     <br>
</dd>
<dt><kbd>l</kbd></dt>
<dd>Lower the current item's priority by one, exchanging its position in the list
with that of the item directly below it (<code>todo-lower-item-priority</code>).

     <br>
</dd>
<dt><kbd>#</kbd></dt>
<dd>Prompt for a number and relocate the item to the corresponding
position in the list (<code>todo-set-item-priority</code>).  For example,
entering <kbd>3</kbd> at the prompt makes the item the third in the
category, i.e., gives it third highest priority; all lower priority
items are pushed down by one.  You can also pass the desired priority
as a numeric prefix argument, e.g., <kbd>3 #</kbd> gives the item third
highest priority without prompting.  (Prefix arguments have no effect
with <kbd>r</kbd> or <kbd>l</kbd>.) 
</dd>
</dl>

<pagebreak></pagebreak><div class="node"><a name="Moving-and-Deleting-Items"></a></div>

<h5 class="subsubsection">5.3.3.2 Moving and Deleting Items</h5>

<p>You can move an item to another category, thereby recategorizing it:

     </p>
<dl>
<dt><kbd>m</kbd></dt>
<dd>Move the item at point to another category (<code>todo-move-item</code>). 
This prompts for a category to move the item to, displays that category,
prompts for the priority of the moved item in the category moved to and
inserts the item accordingly.  Minibuffer completion of the name of the
category moved to works as with the navigation command <kbd>j</kbd>, and as
with that command, passing a prefix argument prompts for a file and
moves the item to a category in that file; and if the category name you
enter is new, then you are asked whether to add the category to the
file, and if you affirm, the item is moved to the new category. 
</dd>
</dl>

   <p>You can delete an item, thereby permanently (and, as far as Todo mode
is concerned, irrevocably) removing it from the todo file:

     </p>
<dl>
<dt><kbd>k</kbd></dt>
<dd>Delete the todo item at point (<code>todo-delete-item</code>; the binding is
mnemonic for “kill”, since <kbd>d</kbd> is used for marking items as done
(see <a href="#Done-Items">Done Items</a>); but note that <kbd>k</kbd> does not put the item into
the kill ring).  This command requires confirmation that you want to
delete the item, since you cannot undo the deletion in Todo mode.  (You
could use <kbd>F e</kbd> to recover the item, but be aware that this would
put the file in an inconsistent state, which you can recover from, but
not without a risk; cf. the cautionary note in <a href="#Reordering-Categories">Reordering Categories</a>.) 
</dd>
</dl>

   <blockquote>
<b>Note:</b> Todo commands that require user confirmation, such as <kbd>k</kbd>, use a
modified form of <code>y-or-n-p</code>, which by default only accepts <kbd>y</kbd>
or <kbd>Y</kbd>, but not &lt;SPC&gt;, as an affirmative answer.  This is to
diminish the risk of unintentionally executing the command, which is
especially important with commands that do deletion, since there is no
Todo command to undo a deletion.  If you want to be able to use &lt;SPC&gt; for
confirmation, enable the option <code>todo-y-with-space</code>. 
</blockquote>

<pagebreak></pagebreak><div class="node"><a name="Done-Items"></a></div>

<h5 class="subsubsection">5.3.3.3 Done Items</h5>

<p>When the activity or thing that a todo item is about has been done, it
is natural to eliminate the item from the todo list.  But instead of
deleting it permanently, you may prefer to keep a record of your
accomplishments by marking the item as done.  In Todo mode, this removes
the done item from the todo list, so as not to clutter it up, and stores
it elsewhere.  Such stored items form a record or diary of things done. 
The Todo package provides two such stores: the “done items” section of
a Todo category, described here, and done item archives (see <a href="#Todo-Archive-Mode">Todo Archive Mode</a>).

     </p>
<dl>
<a name="todo_002ditem_002ddone"></a>
<dt><kbd>d</kbd></dt>
<dd>This command (<code>todo-item-done</code>) removes the todo item at point
from the todo list, appends to the original header a header consisting
of <code>todo-done-string</code> (by default `<samp><span class="samp">DONE </span></samp>') and the current
date, and if <code>todo-always-add-time-string</code> is enabled, also the
current time, and adds the resulting done item to the top of the done
items section of the category.  Invoked with a prefix argument, it
also prompts you to enter a comment, which is appended to the end of
the done item, prefixed with <code>todo-comment-string</code> (by default
`<samp><span class="samp">COMMENT: </span></samp>'). 
</dd>
</dl>

   <p>A category's done items section is located below the last todo (i.e.,
not done) item in the category.  By default this section is hidden from
view.  There are two commands for viewing and hiding done items; since
these are toggle commands, for convenience they also have a single key
binding:

     </p>
<dl>
<dt>
<kbd>C v</kbd><dt><kbd>v</kbd></dt>
</dt>
<dd>Make the done items section of the current category visible if it is
hidden, or hide it if it is visible
(<code>todo-toggle-view-done-items</code>).  If you always want to see the
done items section on entering a category, enable the option
<code>todo-show-with-done</code>; you can still use <kbd>C v</kbd> or <kbd>v</kbd> to
hide (and unhide) it.

     <br>
</dd>
<dt>
<kbd>F V</kbd><dt><kbd>V</kbd></dt>
</dt>
<dd>Toggle the standard category display in the current todo file, i.e.,
display only the done items section of each category in the file, or if
this is visible, hide it again and display only the todo items section
(<code>todo-toggle-view-done-only</code>). 
</dd>
</dl>

   <p>Since done items are meant to be a record of your finished todo items,
you cannot apply to them the same kinds of editing operations
available to unfinished todo items.  However, as explained in
<a href="#Editing-Item-Headers-and-Text">Editing Item Headers and Text</a> and repeated below for
convenience, you can edit or delete a done item's comment, or
retroactively add a comment.  You can also relocate a done item, and
you can revert its done status, making it an unfinished item again.

     </p>
<dl>
<dt><kbd>e c</kbd></dt>
<dd>Edit the current done item's comment, if it has one; otherwise, prompt
for and add a comment.

     <br>
</dd>
<dt><kbd>e d</kbd></dt>
<dd>Delete the current done item's comment, if it has one.

     <br>
</dd>
<dt><kbd>m</kbd></dt>
<dd>Move the done item at point to the top of the done items section of
another category (<code>todo-move-item</code>).  This is useful in case,
after having finished a todo item and relocated it to its category's
done items section, you create a category that is better suited to the
content of the done item than its current category; in other words,
you can retroactively recategorize the done item.

     <br>
</dd>
<dt><kbd>u</kbd></dt>
<dd>If you decide the done item at point is not done after all, this command
“undoes” it, i.e., restores it to the todo list of its category, with
the priority you choose for it (<code>todo-item-undone</code>).  If the done
item has a comment, you are asked whether to delete it from the restored
item. 
</dd>
</dl>

<pagebreak></pagebreak><div class="node"><a name="Todo-Archives"></a></div>

<h2 class="chapter">6 Todo Archives</h2>

<p>When the done items section of a category itself starts to become
cluttered, or if you just want to store some accomplished todo items in
a separate file, you can move them to a Todo archive.  This is a file
with exactly the same structure as a todo file, i.e., divided into
categories, but differs in that the categories contain only done items. 
Todo archives reside, like todo files, in <code>todo-directory</code> but have
the extension `<samp><span class="samp">.toda</span></samp>' instead of `<samp><span class="samp">.todo</span></samp>'.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#Creating-and-Visiting-Archives">Creating and Visiting Archives</a>
</li>
<li>
<a accesskey="2" href="#Todo-Archive-Mode">Todo Archive Mode</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Creating-and-Visiting-Archives"></a></div>

<h3 class="section">6.1 Creating and Visiting Archives</h3>

<p>Todo mode provides the following command for archiving items:

     </p>
<dl>
<dt><kbd>A d</kbd></dt>
<dd>This command (<code>todo-archive-done-item</code>) archives the done item at point. 
Invoked with a prefix argument, it archives all done items in the
current todo category.  If an archive for the current todo file
already exists and contains a category with the same name as the
current todo category, then this command moves the done item to the
top of the corresponding archive category.  If the archive exists but
it does not have a corresponding category, this command creates the
category in the archive and moves the done item to it.  If no archive
for the todo file exists, the command creates both the archive file,
using the same base name as that of the todo file, as well as the
category, and moves the done item to it. 
</dd>
</dl>

   <p>Typing <kbd>A d</kbd> is also the only way within the Todo mode package to
create an archive file and its categories.  Consequently, as a rule each
archive file corresponds to exactly one todo file and has the same base
name as this file, and each category in an archive file corresponds to
and has the same name as a category in the corresponding todo file. 
Exceptions can only arise if you delete a todo file but not the
corresponding archive, or if you delete a category in a todo file that
has a corresponding category in an archive.

   </p>
<p>You might be inclined to do the latter if you have archived all the
items from a given todo category and you don't plan to add new items to
it.  In particular, if you have numerous such empty categories in a todo
file, this can make sequential navigation in the file annoying.  You can
avoid this annoyance by deleting these categories, but only at the cost
of putting the todo file out of synch with the archive file.

   </p>
<p>You may find it preferable not to delete empty todo categories but to
enable the option <code>todo-skip-archived-categories</code>.  When this is
non-<code>nil</code>, such empty todo categories are skipped over by the sequential
category navigation commands <kbd>f</kbd> and <kbd>b</kbd>, so they don't distract you
while navigating and you maintain the structural correspondence between
todo and archive files (you can also still jump to empty todo categories
with <kbd>j</kbd>).

   </p>
<p>If you rename a todo category that has a corresponding category in an
archive, the archive category is also automatically identically renamed. 
Likewise, if you move such a todo category to another file; in this
case, if there is no archive file corresponding to the todo file the
category is moved to, then the archive is automatically created and the
archived category is moved to it.

   </p>
<p>There are two commands in Todo mode for visiting archive files:

     </p>
<dl>
<dt><kbd>A f</kbd></dt>
<dd>Switch to a buffer displaying the archived category corresponding to the
current todo category (<code>todo-find-archive</code>).  If the todo category
has no archived items, the command asks if you want to visit the archive
anyway.  If there is no archive for this todo file, it asks if you want
to visit another archive, which you can select via minibuffer
completion.

     <br>
</dd>
<dt><kbd>A c</kbd></dt>
<dd>Choose an archive to visit, whether or not the current todo file has an
archive (<code>todo-choose-archive</code>). 
</dd>
</dl>

   <p>As with todo files, you can also visit a Todo archive by invoking a
standard Emacs file-visiting command; this displays the first (on the
initial invocation) or current category of the archive.

</p>
<pagebreak></pagebreak><div class="node"><a name="Todo-Archive-Mode"></a></div>

<h3 class="section">6.2 Todo Archive Mode</h3>

<p>When you visit a Todo archive, the buffer is in Todo Archive mode.  It
displays categories just as in Todo mode, except that they only contain
done items.  It provides the same sequential navigation commands as
Todo mode: <kbd>f</kbd> and <kbd>b</kbd> navigate between the categories of the current
archive, and <kbd>n</kbd> and <kbd>p</kbd> navigate between the done items of the current
archive category.

   </p>
<p>The commands <kbd>t</kbd> and <kbd>j</kbd> are also available in Todo Archive
mode, and they work the same as in Todo mode, which means they can only
be used to return to Todo mode: <kbd>t</kbd> prompt for and switch to a todo
file, and with <kbd>j</kbd> you can only jump to a todo category.  These
commands exclude archives because an archive file has the same base name
as the corresponding todo file, and category name completion uses only
the base names, so the commands cannot know which type of file you want
to visit.  For this reason, there is a special command in Todo Archive
mode for jumping to another archive category or visiting another archive
file:

     </p>
<dl>
<dt><kbd>a</kbd></dt>
<dd>This command (<code>todo-jump-to-archive-category</code>) prompts for a category in the
current archive and jumps to it.  Called with a prefix argument, it
prompts for another archive, then for a category in it and jumps to
that category. 
</dd>
</dl>

   <p>None of the Todo mode editing commands are available in Todo Archive
mode, since archives are meant to be static records of accomplished todo
items.  Should you, however, archive an item by mistake or simply change
your mind about the archival status of an item, you can “unarchive” it:

     </p>
<dl>
<dt><kbd>u</kbd></dt>
<dd>Restore the done item at point to the top of the done items section of
the corresponding category in the corresponding todo file, i.e., an
unarchived item remains a done item (<code>todo-unarchive-items</code>).  When
the last item in an archive category has been unarchived, the category
is automatically deleted from the archive.  If this was the only
category in the archive, the archive file is also automatically deleted. 
</dd>
</dl>

   <p>Since it is natural to visit an archive from the corresponding todo
file, it would be convenient to easily return to the todo file when you
have finished browsing the archive.  If you type <kbd>q</kbd> to quit Todo
Archive mode, this switches to the corresponding todo file and shows the
todo category corresponding to the archive category you were just
visiting.

   </p>
<p>The command <kbd>F k</kbd> (see <a href="#File-Editing">File Editing</a>) is also available in Todo
Archive mode.  It deletes the current archive file and prompts you
whether to delete the corresponding todo file.

</p>
<pagebreak></pagebreak><div class="node"><a name="Marked-Items"></a></div>

<h2 class="chapter">7 Marked Items</h2>

<p>For many item editing commands it can make sense and be convenient to
apply them simultaneously to more than one item in the current category. 
Todo facilitates this by means of marked items.

     </p>
<dl>
<dt><kbd>*</kbd></dt>
<dd>Mark the item at point if it is unmarked, and remove the mark it is
already marked (<code>todo-toggle-mark-item</code>).  The mark is a string
specified by the option <code>todo-item-mark</code> (by default `<samp><span class="samp">*</span></samp>')
appended in front of the item header (more precisely, in front of the
item's priority number or prefix; see <a href="#Todo-Display-Features">Todo Display Features</a>, for
details of the latter).  After marking the current item, the command
advances point to the next item.  It also accepts a numeric prefix
argument, which allows toggling the mark of multiple consecutive items.

     <br>
</dd>
<dt><kbd>C *</kbd></dt>
<dd>Mark all todo items in the current category.

     <br>
</dd>
<dt><kbd>C u</kbd></dt>
<dd>Unmark all todo item in the current category. 
</dd>
</dl>

   <p>You can also use the last two commands to mark or unmark all done items in
the category, but only when only the done items section is being
displayed, i.e., after invoking <kbd>C V</kbd> or <kbd>V</kbd>.

   </p>
<p>The following commands operate on marked items:

     </p>
<ul>
<li>
<kbd>k</kbd> (deleting)
</li>
<li>
<kbd>m</kbd> (moving to another category)
</li>
<li>
<kbd>d</kbd> (moving to the done items section; note that <kbd>C-u d</kbd> adds
the same comment to all marked items)
</li>
<li>
<kbd>A d</kbd> (archiving)
</li>
<li>
<kbd>u</kbd> (both in Todo mode for undoing a done item and in Todo Archive
mode for unarchiving an item)
</li>
<li>the commands for editing the item header (those beginning with the
prefix <kbd>e d</kbd> as well as <kbd>e t</kbd>, <kbd>e y</kbd> and <kbd>e k</kbd>)
</li>
</ul>

<p class="noindent">The item insertion, textual editing and priority changing commands do
not operate on marked items.

   </p>
<p>If you use <kbd>m</kbd>, <kbd>d</kbd>, <kbd>A d</kbd> or <kbd>u</kbd> on multiple
noncontiguous marked items, the relocated items retain their relative
order but are now listed consecutively en bloc.

   </p>
<p>You can mark both todo and done items, but note that only <kbd>m</kbd> and
<kbd>k</kbd> can apply to both; other commands only affect either marked
todo or marked done items, so if both types of items are marked,
invoking these commands has no effect and informs you of your
erroneous attempt.

</p>
<pagebreak></pagebreak><div class="node"><a name="Todo-Categories-Mode"></a></div>

<h2 class="chapter">8 Todo Categories Mode</h2>

<p>It can be helpful to have a compact overview of the categories in a
todo file and the types of items it contains; the Todo package
provides a tabular view of this information.

     </p>
<dl>
<dt><kbd>F c</kbd></dt>
<dd>Typing this command (<code>todo-show-categories-table</code>) in Todo mode or Todo
Archive mode switches to a buffer displaying a table that gives an
overview of the categories in the current todo or archive file.  This
buffer is in Todo Categories mode. 
</dd>
</dl>

   <p>The table consists of a column containing the names of the categories in
the file, followed by columns containing counts of certain types of
items in each category.  With todo files there are four count types: all
todo (i.e., not done) items, diary items (i.e., those todo items lacking
the <code>todo-nondiary-marker</code>, which hence can appear in the Fancy Diary
display), done (but not archived) items, and archived items.  With
archive files all items are done, so the table only has a column for
this count.  The final row of the table gives total item counts across
all categories in the file.

   </p>
<p>Aside from explicitly invoking <kbd>F c</kbd> to display the table of
categories, you can also arrange to have it displayed on the first
invocation of <code>todo-show</code> for a given file (i.e., either using
<code>todo-show</code> to initiate a Todo session, or calling it in Todo mode
to visit another todo file).  To do this customize the option
<code>todo-show-first</code>.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#Table-of-Item-Counts">Table of Item Counts</a>
</li>
<li>
<a accesskey="2" href="#Reordering-Categories">Reordering Categories</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Table-of-Item-Counts"></a></div>

<h3 class="section">8.1 Table of Item Counts</h3>

<p>Above each column of the table is a labeled button you can press by
clicking with the mouse or by typing &lt;RET&gt; on it.  Pressing an item
count button sorts the table alternately in ascending or descending
order according to the type of count.  Pressing the category button
alternates between the initial numerical order of the categories and
alphabetical order.  In numerical order the column of category names is
preceded by a column containing the corresponding category numbers; this
column is not displayed in the alphabetical listing.  Instead of
pressing the buttons, you can also sort the table by typing the
following keys:

     </p>
<ul>
<li>
<kbd>c</kbd>
to sort by category numerically or alphabetically;
</li>
<li>
<kbd>t</kbd>
to sort by todo item counts;
</li>
<li>
<kbd>y</kbd>
to sort by diary item counts;
</li>
<li>
<kbd>d</kbd>
to sort by done item counts;
</li>
<li>
<kbd>a</kbd>
to sort by archived item counts. 
</li>
</ul>

   <p>Each row of the table is also buttonized; pressing one of these exits
the buffer (killing it), returns to the buffer of the file from which
you had invoked <kbd>F c</kbd>, and displays the category that was named in
the row button you pressed (i.e., pressing this button jumps to that
category).  However, if the category named in the row is in a todo
file and all of its items have been archived, and you have enabled the
option <code>todo-skip-archived-categories</code>, then pressing the button
jumps to the archive category instead of the empty todo category.  You
can recognize such categories by their items counts in the table—all
columns but the archived one have counts of zero—and in addition,
their lines in the table are also distinguished from the others by a
different face (see <a href="#Faces">Faces</a>).

   </p>
<p>You can navigate around the table:

     </p>
<dl>
<dt>
<kbd>n</kbd><dt><kbd>&lt;TAB&gt;</kbd></dt>
</dt>
<dd>Advance point to the next button.

     <br>
</dd>
<dt>
<kbd>p</kbd><dt><kbd>S-&lt;TAB&gt;</kbd></dt>
</dt>
<dd>Put point on the previous button. 
</dd>
</dl>

   <p>These commands are cyclic, e.g., when point is on the last button,
pressing <kbd>n</kbd> moves it to the first button.

   </p>
<p>Typing <kbd>q</kbd> exits Todo Categories mode, killing the buffer and returning
to the current category in the Todo mode or Todo Archive mode buffer
from which you had invoked <kbd>F c</kbd>.

</p>
<pagebreak></pagebreak><div class="node"><a name="Reordering-Categories"></a></div>

<h3 class="section">8.2 Reordering Categories</h3>

<p>Todo Categories mode provide commands with which you can change the
numbering of the categories in the current file.  This renumbering has
the effect of reordering the categories for sequential navigation by
<kbd>f</kbd> and <kbd>b</kbd> in Todo mode and Todo Archive mode.  These commands
are only operative when the table displays the categories in their
numerical order.  They work just like reprioritizing items in Todo mode,
hence have the same key bindings:

     </p>
<dl>
<dt><kbd>r</kbd></dt>
<dd>Raise the current line of the table (the one the cursor is on),
decreasing the category's number by one (<code>todo-raise-category</code>). 
This command exchanges lines, and hence the numbers, of the category at
point and the one above it before invoking the command.

     <br>
</dd>
<dt><kbd>l</kbd></dt>
<dd>Lower the current line of the table, increasing the category's number by
one (<code>todo-lower-category</code>).  This command exchanges lines, and
hence the numbers, of the category at point and the one below it before
invoking the command.

     <br>
</dd>
<dt><kbd>#</kbd></dt>
<dd>Prompt for a number between 1 and the number of categories in the file
and reorder the table accordingly (<code>todo-set-category-number</code>).  If
called with a numeric prefix argument within the allowed range, reorder
the table without prompting. 
</dd>
</dl>

   <p>The reordering done by these commands remains in effect when you return
to Todo mode or Todo Archive mode and, as long as you save the todo
or archive file after reordering, in subsequent sessions as well.

   </p>
<blockquote>
<strong>Caution</strong><b>:</b> It is important to be aware that renumbering the categories does not
change the textual order of the categories in the file.  This is
significant if you should invoke <kbd>F e</kbd> to edit the entire file
manually and in so doing alter the number of categories or the number
of items in a category: this will make the information shown in the
table of categories of this file inconsistent with its actual state. 
You can repair this inconsistency by invoking the command
<code>todo-repair-categories-sexp</code> (which lacks a key binding, since
it is meant to be a rarely needed rescue operation).  But this will
revert any renumbering of the categories you have made, so you will
have to renumber them again.  This is one reason why you should
exercise caution when using <kbd>F e</kbd>. 
</blockquote>

<pagebreak></pagebreak><div class="node"><a name="Searching-for-Items"></a></div>

<h2 class="chapter">9 Searching for Items</h2>

<p>It can be useful to be able to locate and examine all todo items that
fit certain criteria, regardless of which category they belong to.  One
way to do this in Todo mode is by sequentially searching in the file:

     </p>
<dl>
<dt><kbd>S</kbd></dt>
<dd>This command (<code>todo-search</code>; the key is capital <kbd>S</kbd>) prompts for a
regular expression, searches from the beginning of the current todo file
and displays the category containing the first match it finds, with the
match highlighted.  If there are further matches, a message saying how
many are left is displayed and you are asked if you want to go to the
next match.  When you reach the last match, or if you decide not to go
to further matches, you are asked whether the match highlighting should
be removed.

     <br>
</dd>
<dt><kbd>X</kbd></dt>
<dd>This command (<code>todo-clear-matches</code>) removes any highlighting added by <kbd>S</kbd>. 
This is so you can leave the matches highlighted at the end of the
search and remove the highlighting later. 
</dd>
</dl>

   <p>These commands are also available in Todo Archive mode.

</p>
<pagebreak></pagebreak><div class="node"><a name="Todo-Filtered-Items-Mode"></a></div>

<h2 class="chapter">10 Todo Filtered Items Mode</h2>

<p>A more powerful alternative to sequential searching is item filtering,
by which items from different categories that match specified criteria
are gathered and displayed in a new buffer as a kind of virtual
category in a distinct mode, Todo Filtered Items mode.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#Filtering-Items">Filtering Items</a>
</li>
<li>
<a accesskey="2" href="#Todo-Filtered-Items-Mode-Commands">Todo Filtered Items Mode Commands</a>
</li>
<li>
<a accesskey="3" href="#Files-of-Filtered-Items">Files of Filtered Items</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Filtering-Items"></a></div>

<h3 class="section">10.1 Filtering Items</h3>

<p>Todo mode provides three ways to filter items: a general filter for
items matching a user-entered regular expression, as with the search
command; and two specific filters, one for diary-displayable items
(i.e., those lacking <code>todo-nondiary-marker</code>) and one for top
priority items (more on the latter below).  The commands for each
filter come in pairs, one for filtering just the current todo file and
one for filtering a user-specified list of todo files.  Thus, there
are six item filtering commands:<a rel="footnote" href="#fn-9" name="fnd-9"><sup>9</sup></a>

     </p>
<ul>
<li>
<kbd>F x x</kbd> (<code>todo-filter-regexp-items</code>)
</li>
<li>
<kbd>F x m</kbd> (<code>todo-filter-regexp-items-multifile</code>)
</li>
<li>
<kbd>F y y</kbd> (<code>todo-filter-diary-items</code>)
</li>
<li>
<kbd>F y m</kbd> (<code>todo-filter-diary-items-multifile</code>)
</li>
<li>
<kbd>F t t</kbd> (<code>todo-filter-top-priorities</code>)
</li>
<li>
<kbd>F t m</kbd> (<code>todo-filter-top-priorities-multifile</code>)
</li>
</ul>

   <p>There are two ways to specify which files the multifile filtering
commands apply to.  If there are files you want to filter every time you
use these commands, customize the option <code>todo-filter-files</code>.  If you
leave this option empty (the default), invoking a multifile filtering
command pops up a buffer similar to the Customization buffer for
<code>todo-filter-files</code>, in which you can select files to filter just for
this invocation.

   </p>
<p>Diary and top priority items are by definition non-done todo items, but
when filtering by regular expression, you can extend the scope of the
command to done items by enabling the option <code>todo-filter-done-items</code>. 
Then <kbd>F x x</kbd> and <kbd>F x m</kbd> will gather both matching todo and matching
done items (including done items from any archive files corresponding to
the selected todo files) into the virtual category of filtered items.

   </p>
<p>There are several ways to specify how many items in each category count
as top priorities and hence get filtered by <kbd>F t t</kbd> and <kbd>F t m</kbd>:

     </p>
<ul>
<li>The option <code>todo-top-priorities</code> specifies a single default number
for all categories and all todo files; its default value is 1, which
means just the highest priority item in every category is filtered,
unless otherwise specified. 
</li>
<li>The option <code>todo-top-priorities-overrides</code> lists file-wide overrides
of <code>todo-top-priorities</code> as well as category-specific overrides.  It
is empty by default.  However, using the Custom facility to set this
option would be tedious and error-prone, so instead you should use the
commands <kbd>F t s</kbd> and <kbd>C t s</kbd>.  The former sets (i.e., overrides) the
default number of top priorities for all categories in the current
todo file, and the latter sets the number of top priorities for the
current category.  To exclude a category or file from filtering by <kbd>F t t</kbd>
and <kbd>F t m</kbd>, set the number to `<samp><span class="samp">0</span></samp>'. 
</li>
<li>You can invoke <kbd>F t t</kbd> and <kbd>F t m</kbd> with a numeric prefix argument,
which specifies the number of top priorities in each category just for
this invocation, overriding both <code>todo-top-priorities-overrides</code> and
<code>todo-top-priorities</code>. 
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Todo-Filtered-Items-Mode-Commands"></a></div>

<h3 class="section">10.2 Todo Filtered Items Mode Commands</h3>

<p>The output of the item filtering commands looks similar to a regular
Todo category, but it is not contained in any todo file and does not
have a name on being created, so it is not a “real” category but a
“virtual” category.  Another difference is the lack of a done items
section; either there are no done items in the list (when the filtered
items are diary or top priority items), or these are displayed in the
same list as todo items (if you filtered by regular expression and
allowed done items).  A further difference is that the items have an
additional header, between the item's date/time header and its text,
specifying which category (and if you invoked a multifile command, also
which file) the item comes from, and if you filtered by regular
expression, also whether the item comes from a Todo archive.

   </p>
<p>The sequential item navigation commands <kbd>n</kbd> and <kbd>p</kbd> work the same in
Todo Filtered Items mode as in Todo mode, as do the file and category
jumping commands <kbd>t</kbd> and <kbd>j</kbd>; however, the sequential category
navigation commands are unavailable, since virtual categories of
filtered items are not ordered with respect to “real” categories.  In
addition, Todo Filtered Items mode provides a special navigation
command:

     </p>
<dl>
<dt>
<kbd>g</kbd><dt><kbd>&lt;RET&gt;</kbd></dt>
</dt>
<dd>If you type this command (<code>todo-go-to-source-item</code>) with point on a
filtered item, the buffer switches to the item's source file (in Todo
mode or Todo Archive mode, as the case may be) and displays its
category, with point on the item. 
</dd>
</dl>

   <p>Filtered items cannot be textually edited, moved to another category,
marked done or archived like items in a real todo category, since these
would then be out of synch with each other.  But there is one type of
editing command that does work in Todo Filtered Items mode: changing an
item's priority:

     </p>
<dl>
<dt>
<kbd>r</kbd><dt>
<kbd>l</kbd><dt><kbd>#</kbd></dt>
</dt>
</dt>
<dd>These commands raise, lower, or set, respectively, the current item's
priority in the virtual category. 
</dd>
</dl>

<p class="noindent">Using these commands, you can create a cross-category (and even
cross-file) prioritized list of filtered items.  However, there is a
restriction on these commands in Todo Filtered Items mode: you cannot
change the relative priorities of items from the same real category,
since that would make the filtered list inconsistent with the source
todo list.

</p>
<pagebreak></pagebreak><div class="node"><a name="Files-of-Filtered-Items"></a></div>

<h3 class="section">10.3 Files of Filtered Items</h3>

<p>Typing <kbd>s</kbd> in Todo Filtered Items mode saves the buffer of filtered
items to a file in <code>todo-directory</code>.  Files of items filtered by
regular expression have the extension `<samp><span class="samp">.todr</span></samp>', those with filtered
diary items have the extension `<samp><span class="samp">.tody</span></samp>' and those with filtered top
priorities have the extension `<samp><span class="samp">.todt</span></samp>'.  The extensions are added
automatically the first time you save the buffer to a file.

   </p>
<p>With filtered top priority or diary items, the file is automatically
named on first saving it, using as the base name either the same base
name as the single todo file it was generated from, or combining the
base names of the todo files used in multifile filtering commands. 
With items filtered by regular expression, it can be useful to save
separate lists generated from the same file(s) using different regular
expressions, so when saving such a list, you are prompted for a short
identifying string to add to the file name.

   </p>
<p>When you invoke one of the item filtering commands without a prefix
argument and a corresponding file already exists, the command visits
this file (if, for the current file or chosen files, there are multiple
files of items filtered by regular expression, you are prompted to
choose one).  To force generation of a new filtered list, invoke the
command with a prefix argument (in the case of top priority items,
either numeric as described above, or the raw prefix argument <kbd>C-u</kbd> to
use the values of <code>todo-top-priorities-overrides</code> or
<code>todo-top-priorities</code>).

   </p>
<p>Aside from explicitly invoking an item filtering command to display a
saved list of items filtered by a given method from given todo files,
there are two other ways to visit a saved file of filtered items.  You
can invoke a command similar to <code>find-file</code>:

     </p>
<dl>
<dt><kbd>F f</kbd></dt>
<dd>Visit a saved file of filtered items, which you choose via minibuffer
completion (<code>todo-find-filtered-items-file</code>). 
</dd>
</dl>

<p class="noindent">Alternatively, as with tables of categories, by customizing
<code>todo-show-first</code> you can have the first invocation of
<code>todo-show</code> for a given todo file display the corresponding saved
file of filtered items.  If there is no saved filtered items list for
the file, <code>todo-show</code> simply defaults to visiting the file and
displaying its first category, as usual.

   </p>
<p>The command <kbd>F k</kbd> (see <a href="#File-Editing">File Editing</a>) is also available in Todo
Filtered Items mode.  It deletes the current filtered items file.

</p>
<pagebreak></pagebreak><div class="node"><a name="Todo-Display-Features"></a></div>

<h2 class="chapter">11 Todo Display Features</h2>

<p>You can change the appearance of Todo mode buffers in a variety of ways.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#Faces">Faces</a>
</li>
<li>
<a accesskey="2" href="#Item-Prefix">Item Prefix</a>
</li>
<li>
<a accesskey="3" href="#Other-Display-Commands-and-Options">Other Display Commands and Options</a>
</li>
</ul>

<pagebreak></pagebreak><div class="node"><a name="Faces"></a></div>

<h3 class="section">11.1 Faces</h3>

<p>Each of the Todo modes uses faces to distinguish various aspects of
the display, both structural and informational.  For example, the
faces for the date and time strings of todo item headers
(<code>todo-date</code> and <code>todo-time</code>, respectively) by default
inherit the attributes of the corresponding faces used by the Emacs
diary; but when the date and time of a Todo diary item (i.e., an item
lacking <code>todo-nondiary-marker</code>) is earlier than the current date
and time, they are displayed in a different face
(<code>todo-diary-expired</code>).  In this way, you can readily recognize
diary items that have “expired” and act accordingly (e.g., by
tagging them as done or by updating the deadlines).

   </p>
<p>Another example of an informational face is the face used to
distinguish top priority items (<code>todo-top-priority</code>).  A third
case is the face used in Todo Categories mode to mark rows of the
table containing categories with only archived items
(<code>todo-archived-only</code>).

   </p>
<p>The <code>todo-faces</code> customization group contains a complete list of
Todo mode faces and brief descriptions of their use.

</p>
<pagebreak></pagebreak><div class="node"><a name="Item-Prefix"></a></div>

<h3 class="section">11.2 Item Prefix</h3>

<p>In the default display of (real or virtual) categories in Todo mode,
Todo Archive mode and Todo Filtered Item mode the items are visually
numbered in ascending order, starting with `<samp><span class="samp">1</span></samp>' on the top item,
displayed to the left of its header (date/time string).  With todo items
the numbers indicate each item's priority in the list, so when you
reprioritize an item with <kbd>#</kbd> or move it with <kbd>m</kbd>, these numbers make
it easier to choose the item's new priority.  The numbering also lets
you to see at a glance how many items there are in the list.  When an
item is inserted, deleted, or moved, the numbering is automatically
updated.  In Todo mode, the todo and done items sections in each
category are separately numbered.

   </p>
<p>If you prefer not to have item numbering displayed, disable the option
<code>todo-number-prefix</code>; then the display of each item starts by default
simply with its header.  But you can also replace the numbering with a
visually distinctive string of your choice by customizing the option
<code>todo-prefix</code> (the empty string by default).  Another alternative is to
temporarily hide the item numbering:

     </p>
<dl>
<dt>
<kbd>F N</kbd><dt><kbd>N</kbd></dt>
</dt>
<dd>Toggle between displaying item numbering and displaying the
<code>todo-prefix</code> string in the current Todo file (todo, archive, or
saved virtual category of filtered items).  (This command also works in
buffers of filtered items that have not yet been written to a file.) 
</dd>
</dl>

   <p>In the todo items section of each Todo mode category, the item prefix
(whether a priority number or a fixed string) of the top priority
items (determined as specified in see <a href="#Filtering-Items">Filtering Items</a>) is
displayed in a face (<code>todo-top-priority</code>) different from the face
of the prefix of non-top-priority items, so you see at a glance how
many items in the category are top priorities.

</p>
<pagebreak></pagebreak><div class="node"><a name="Other-Display-Commands-and-Options"></a></div>

<h3 class="section">11.3 Other Display Commands and Options</h3>

<p>There are two additional toggle commands that affect display in the
current file:

     </p>
<dl>
<dt>
<kbd>F h</kbd><dt><kbd>h</kbd></dt>
</dt>
<dd>Hide the item headers if visible, or show them if they are hidden. 
With done items, only the done header (i.e., the done tag and date-time
string inserted when the item was marked done) is hidden, the original
date-time string is not. With filtered items, the category (or
category-file) tag is not hidden.

     <br>
</dd>
<dt>
<kbd>F H</kbd><dt><kbd>H</kbd></dt>
</dt>
<dd>Highlight the current item (with the face <code>hl-line</code>) if
unhighlighted, or remove its highlighting.  When item highlighting is
enabled, it follows navigation by <kbd>n</kbd> or <kbd>p</kbd>.  If you want to
have current item highlighting by default, enable the option
<code>todo-highlight-item</code>.  <kbd>F H</kbd> or <kbd>H</kbd> will still toggle
it. 
</dd>
</dl>

   <p>There are two options which affect the display of items whose content is
longer than one screen line:

     </p>
<ul>
<li>
<code>todo-indent-to-here</code> sets the amount of indentation for all lines
after the first in multiline todo items, which is necessary in order
for todo diary items to be fully visible in the Fancy Diary display. 
The default indentation is 3 spaces.  For a uniform appearance this
option applies to all items, i.e., diary and nondiary todo items and
also done items.

     </li>
<li>
<code>todo-wrap-lines</code> allows you to choose, for the purposes of
insertion and editing, between treating multiline todo items as
containing multiple logical lines with hard line breaks or as multiple
visual lines using Visual Line mode; the latter is the default.  Since
multiparagraph items also contain hard line breaks in Visual Line mode,
for a uniform appearance this display shows indentation on wrapped lines
by using a wrap-prefix of <code>todo-indent-to-here</code> spaces. 
</li>
</ul>

   <p>The indentation inserted after a hard newline is actually a tab
character, and the Todo modes that display items bind <code>tab-width</code> to
<code>todo-indent-to-here</code>, so if you change the default value of the
latter, the next time you visit a Todo file, the indentation will
reflect your change.

   </p>
<p>By default, the todo and done items sections of a todo category are
visually separated by a line as wide as the window the buffer is
displayed in.  You can change the appearance and width of the separator
by customizing <code>todo-done-separator-string</code>; you can also change the
face of the separator string (<code>todo-done-sep</code>).

   </p>
<p>There are also several options for changing the appearance in Todo
Categories mode and Todo Filtered Items mode, beyond those mentioned
above in the sections on these modes; see the customization groups
<code>todo-categories</code> and <code>todo-filtered</code> for details.

</p>
<pagebreak></pagebreak><div class="node"><a name="Printing-Todo-Buffers"></a></div>

<h2 class="chapter">12 Printing Todo Buffers</h2>

<p>If you print a Todo buffer using one of the standard Emacs printing
commands, it does not look exactly like what you see in the buffer. 
This is because some of the display features are non-printable
(specifically, those using overlays, word-wrap and wrap-prefix).  Todo
mode provides two print commands that produce output which includes
printable counterparts of such display features:

     </p>
<dl>
<dt><kbd>P B</kbd></dt>
<dd>Send the printable buffer output directly to your printer.

     <br>
</dd>
<dt><kbd>P F</kbd></dt>
<dd>Prompt for a file name and write the printable output to that file. 
</dd>
</dl>

   <p>By default, Todo uses <code>ps-print-buffer-with-faces</code> to make the
printable version; you can change this by setting the option
<code>todo-print-function</code>.

</p>
<pagebreak></pagebreak><div class="node"><a name="Legacy-Todo-Mode-Files"></a></div>

<h2 class="chapter">13 Legacy Todo Mode Files</h2>

<p>Users of the original version of Todo mode will recognize from the
description in this user manual that, although the new version shares
with the original version the same basic user interface and handling of
todo items, there are some incompatible differences between them, such
as the done items sections (there are also other file format
incompatibilities behind the scenes that are normally not visible to
users).

   </p>
<p>The most significant incompatibility concerns the item prefix.  In the
earlier version of Todo mode the prefix was the initial part of the item
string itself, so in order for the item to be displayable in the Emacs
diary, the prefix had to be a date/time pattern recognizable by the
diary (although the todo item also has its own date/time header). 
Moreover, since all items had the same prefix string in the original
version, this means that either only all or no items could appear in the
Fancy Diary display on any given date.  This considerably restricts the
practicality of including todo items in the diary.  In contrast, the
current version of Todo mode uses overlays for item priority numbering
or prefixes, and item-specific diary-compatible date/time headers and
special marks for todo items to be excluded from the diary, so you can
determine for each item whether and when it appears in the Fancy Diary
display.

   </p>
<p>Due to these incompatibilities, files created with the original version
of Todo mode cannot be displayed or edited with the current version. 
However, this version provides a function that converts the two main
types of files used by the original version into new-style valid todo
and archive files, respectively, and saves them in
<code>todo-directory</code>.<a rel="footnote" href="#fn-10" name="fnd-10"><sup>10</sup></a>

   </p>
<p>This conversion function is automatically called the first time you
invoke <code>todo-show</code> (i.e., before you have created a todo file with
the new version), and if it finds the old-style files, it offers to
convert them, making them the first new-style todo and archive files. 
If you choose not to convert the old-style files at this time, you can
do so later by invoking the command <code>todo-convert-legacy-files</code>
(there is no key binding for it, since it shouldn't be necessary to use
it often).  (A delicate part of the conversion concerns the customizable
format of item date/time headers in the old-style; see the documentation
string of <code>todo-legacy-date-time-regexp</code> for details.)

</p>
<pagebreak></pagebreak><div class="node"><a name="GNU-Free-Documentation-License"></a></div>

<h2 class="appendix">Appendix A GNU Free Documentation License</h2>

<!-- The GNU Free Documentation License. -->
<div align="center">Version 1.3, 3 November 2008</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright © 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
     <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type="1" start="0">
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     </p>
<p>This License is a kind of “copyleft”, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     </p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     </p>
</li>
<li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The “Document”, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as “you”.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     </p>
<p>A “Modified Version” of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     </p>
<p>A “Secondary Section” is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     </p>
<p>The “Invariant Sections” are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     </p>
<p>The “Cover Texts” are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     </p>
<p>A “Transparent” copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not “Transparent” is called “Opaque”.

     </p>
<p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input
format, SGML or XML using a publicly available
DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples
of transparent image formats include PNG, XCF and
JPG.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, SGML or
XML for which the DTD and/or processing tools are
not generally available, and the machine-generated HTML,
PostScript or PDF produced by some word processors for
output purposes only.

     </p>
<p>The “Title Page” means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, “Title Page” means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     </p>
<p>The “publisher” means any person or entity that distributes copies
of the Document to the public.

     </p>
<p>A section “Entitled XYZ” means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as “Acknowledgements”,
“Dedications”, “Endorsements”, or “History”.)  To “Preserve the Title”
of such a section when you modify the Document means that it remains a
section “Entitled XYZ” according to this definition.

     </p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     </p>
</li>
<li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     </p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     </p>
</li>
<li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     </p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     </p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     </p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     </p>
</li>
<li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          </p>
<ol type="A" start="1">
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          </li>
<li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          </li>
<li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          </li>
<li>Preserve all the copyright notices of the Document.

          </li>
<li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          </li>
<li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          </li>
<li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          </li>
<li>Include an unaltered copy of this License.

          </li>
<li>Preserve the section Entitled “History”, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled “History” in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          </li>
<li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the “History” section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          </li>
<li>For any section Entitled “Acknowledgements” or “Dedications”, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          </li>
<li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          </li>
<li>Delete any section Entitled “Endorsements”.  Such a section
may not be included in the Modified Version.

          </li>
<li>Do not retitle any existing section to be Entitled “Endorsements” or
to conflict in title with any Invariant Section.

          </li>
<li>Preserve any Warranty Disclaimers.
          </li>
</ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     </p>
<p>You may add a section Entitled “Endorsements”, provided it contains
nothing but endorsements of your Modified Version by various
parties—for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     </p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     </p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     </p>
</li>
<li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     </p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     </p>
<p>In the combination, you must combine any sections Entitled “History”
in the various original documents, forming one section Entitled
“History”; likewise combine any sections Entitled “Acknowledgements”,
and any sections Entitled “Dedications”.  You must delete all
sections Entitled “Endorsements.”

     </p>
</li>
<li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     </p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     </p>
</li>
<li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an “aggregate” if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     </p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     </p>
</li>
<li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     </p>
<p>If a section in the Document is Entitled “Acknowledgements”,
“Dedications”, or “History”, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     </p>
</li>
<li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

     </p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     </p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     </p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

     </p>
</li>
<li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     </p>
<p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License “or any later version” applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

     </p>
</li>
<li>RELICENSING

     <p>“Massive Multiauthor Collaboration Site” (or “MMC Site”) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
“Massive Multiauthor Collaboration” (or “MMC”) contained in the
site means any set of copyrightable works thus published on the MMC
site.

     </p>
<p>“CC-BY-SA” means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

     </p>
<p>“Incorporate” means to publish or republish a Document, in whole or
in part, as part of another Document.

     </p>
<p>An MMC is “eligible for relicensing” if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

     </p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

        </p>
</li>
</ol>

<h3 class="heading">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

</p>
<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the “with<small class="dots">...</small>Texts.” line with this:

</p>
<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   </p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
</p>
<div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4>
<p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> Two types of
dates recognized by the Emacs diary are not supported in the current
Todo mode implementation: sexp diary entries and date strings in which
the year is omitted (however, the latter type is equivalent to using
`<samp><span class="samp">*</span></samp>' for an arbitrary year, which Todo mode does support).</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> Many editing
commands can also do this by side effect, but since that is not their
main function, they are not included in this section.</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> A category's
number is automatically assigned when the category is created: the
category is appended to the end of the file, so its number is simply the
highest until another category is added.  There is no command in Todo
mode to reorder the numbering of the categories in a todo file, but this
is possible from the file's table of categories; <a href="#Todo-Categories-Mode">Todo Categories Mode</a>.</p>

   <p class="footnote"><small>[<a name="fn-4" href="#fnd-4">4</a>]</small> The key
binding of this command is mnemonic for “kill” to parallel the binding
<kbd>k</kbd> for item deletion, since <kbd>d</kbd> is bound to another item
editing command (see <a href="#Done-Items">Done Items</a>).</p>

   <p class="footnote"><small>[<a name="fn-5" href="#fnd-5">5</a>]</small> This
binding is mnemonic for “kill” to parallel the binding <kbd>k</kbd> for
item deletion, since <kbd>d</kbd> is bound to another item editing command
(see <a href="#Done-Items">Done Items</a>).</p>

   <p class="footnote"><small>[<a name="fn-6" href="#fnd-6">6</a>]</small> There
are two insertion parameters that override prompting for and manually
entering the new item's text, see below.</p>

   <p class="footnote"><small>[<a name="fn-7" href="#fnd-7">7</a>]</small> The non-mnemonic choice of
<kbd>i</kbd> for the parameter `<samp><span class="samp">default</span></samp>' is motivated by the
convenience of repeating the <kbd>i</kbd> used to invoke
<code>todo-insert-item</code>.</p>

   <p class="footnote"><small>[<a name="fn-8" href="#fnd-8">8</a>]</small> This runs a format check to ensure
the item is well-formed.  However, unlike the command <kbd>F e</kbd>
(see <a href="#File-Editing">File Editing</a>), <kbd>e m</kbd> does not expose you to the risk of
putting the file in an inconsistent state, since it puts only the
current item in Todo Edit mode.</p>

   <p class="footnote"><small>[<a name="fn-9" href="#fnd-9">9</a>]</small> The use of <kbd>F</kbd> in the key
sequences of these commands naturally recalls “filter”, but is also
consistent with the Todo mode mnemonic key binding convention, since the
commands involve one or more whole files.</p>

   <p class="footnote"><small>[<a name="fn-10" href="#fnd-10">10</a>]</small> The original version of Todo mode also
allowed saving a file of top priority items, but since you can readily
create such a file with the new version, which is also more flexible,
no conversion is provided for this file.</p>

   <p></p>
<hr>
</div>

</body>
</html>
