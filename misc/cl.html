<html lang="en">
<head>
<title>Common Lisp Extensions</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="Common Lisp Extensions">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents the GNU Emacs Common Lisp emulation package.

Copyright (C) 1993, 2001-2016 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being "A GNU Manual", and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     "GNU Free Documentation License".

     (a) The FSF's Back-Cover Text is: "You have the freedom to copy and
     modify this GNU manual."
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">Common Lisp Extensions</h1>
<div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">GNU Emacs Common Lisp Emulation</a>
<li><a name="toc_Overview" href="#Overview">1 Overview</a>
<ul>
<li><a href="#Usage">1.1 Usage</a>
<li><a href="#Organization">1.2 Organization</a>
<li><a href="#Naming-Conventions">1.3 Naming Conventions</a>
</li></ul>
<li><a name="toc_Program-Structure" href="#Program-Structure">2 Program Structure</a>
<ul>
<li><a href="#Argument-Lists">2.1 Argument Lists</a>
<li><a href="#Time-of-Evaluation">2.2 Time of Evaluation</a>
</li></ul>
<li><a name="toc_Predicates" href="#Predicates">3 Predicates</a>
<ul>
<li><a href="#Type-Predicates">3.1 Type Predicates</a>
<li><a href="#Equality-Predicates">3.2 Equality Predicates</a>
</li></ul>
<li><a name="toc_Control-Structure" href="#Control-Structure">4 Control Structure</a>
<ul>
<li><a href="#Assignment">4.1 Assignment</a>
<li><a href="#Generalized-Variables">4.2 Generalized Variables</a>
<ul>
<li><a href="#Setf-Extensions">4.2.1 Setf Extensions</a>
<li><a href="#Modify-Macros">4.2.2 Modify Macros</a>
</li></ul>
<li><a href="#Variable-Bindings">4.3 Variable Bindings</a>
<ul>
<li><a href="#Dynamic-Bindings">4.3.1 Dynamic Bindings</a>
<li><a href="#Function-Bindings">4.3.2 Function Bindings</a>
<li><a href="#Macro-Bindings">4.3.3 Macro Bindings</a>
</li></ul>
<li><a href="#Conditionals">4.4 Conditionals</a>
<li><a href="#Blocks-and-Exits">4.5 Blocks and Exits</a>
<li><a href="#Iteration">4.6 Iteration</a>
<li><a href="#Loop-Facility">4.7 Loop Facility</a>
<ul>
<li><a href="#Loop-Basics">4.7.1 Loop Basics</a>
<li><a href="#Loop-Examples">4.7.2 Loop Examples</a>
<li><a href="#For-Clauses">4.7.3 For Clauses</a>
<li><a href="#Iteration-Clauses">4.7.4 Iteration Clauses</a>
<li><a href="#Accumulation-Clauses">4.7.5 Accumulation Clauses</a>
<li><a href="#Other-Clauses">4.7.6 Other Clauses</a>
</li></ul>
<li><a href="#Multiple-Values">4.8 Multiple Values</a>
</li></ul>
<li><a name="toc_Macros" href="#Macros">5 Macros</a>
<li><a name="toc_Declarations" href="#Declarations">6 Declarations</a>
<li><a name="toc_Symbols" href="#Symbols">7 Symbols</a>
<ul>
<li><a href="#Property-Lists">7.1 Property Lists</a>
<li><a href="#Creating-Symbols">7.2 Creating Symbols</a>
</li></ul>
<li><a name="toc_Numbers" href="#Numbers">8 Numbers</a>
<ul>
<li><a href="#Predicates-on-Numbers">8.1 Predicates on Numbers</a>
<li><a href="#Numerical-Functions">8.2 Numerical Functions</a>
<li><a href="#Random-Numbers">8.3 Random Numbers</a>
<li><a href="#Implementation-Parameters">8.4 Implementation Parameters</a>
</li></ul>
<li><a name="toc_Sequences" href="#Sequences">9 Sequences</a>
<ul>
<li><a href="#Sequence-Basics">9.1 Sequence Basics</a>
<li><a href="#Mapping-over-Sequences">9.2 Mapping over Sequences</a>
<li><a href="#Sequence-Functions">9.3 Sequence Functions</a>
<li><a href="#Searching-Sequences">9.4 Searching Sequences</a>
<li><a href="#Sorting-Sequences">9.5 Sorting Sequences</a>
</li></ul>
<li><a name="toc_Lists" href="#Lists">10 Lists</a>
<ul>
<li><a href="#List-Functions">10.1 List Functions</a>
<li><a href="#Substitution-of-Expressions">10.2 Substitution of Expressions</a>
<li><a href="#Lists-as-Sets">10.3 Lists as Sets</a>
<li><a href="#Association-Lists">10.4 Association Lists</a>
</li></ul>
<li><a name="toc_Structures" href="#Structures">11 Structures</a>
<li><a name="toc_Assertions" href="#Assertions">12 Assertions and Errors</a>
<li><a name="toc_Efficiency-Concerns" href="#Efficiency-Concerns">Appendix A Efficiency Concerns</a>
<ul>
<li><a href="#Efficiency-Concerns">A.1 Macros</a>
<li><a href="#Efficiency-Concerns">A.2 Error Checking</a>
<li><a href="#Efficiency-Concerns">A.3 Compiler Optimizations</a>
</li></ul>
<li><a name="toc_Common-Lisp-Compatibility" href="#Common-Lisp-Compatibility">Appendix B Common Lisp Compatibility</a>
<li><a name="toc_Porting-Common-Lisp" href="#Porting-Common-Lisp">Appendix C Porting Common Lisp</a>
<li><a name="toc_Obsolete-Features" href="#Obsolete-Features">Appendix D Obsolete Features</a>
<ul>
<li><a href="#Obsolete-Lexical-Binding">D.1 Obsolete Lexical Binding</a>
<li><a href="#Obsolete-Macros">D.2 Obsolete Macros</a>
<li><a href="#Obsolete-Setf-Customization">D.3 Obsolete Ways to Customize Setf</a>
</li></ul>
<li><a name="toc_GNU-Free-Documentation-License" href="#GNU-Free-Documentation-License">Appendix E GNU Free Documentation License</a>
<li><a name="toc_Function-Index" href="#Function-Index">Function Index</a>
<li><a name="toc_Variable-Index" href="#Variable-Index">Variable Index</a>
</li></ul>
</div>



<div class="node">
<p><hr>
<a name="Top"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">GNU Emacs Common Lisp Emulation</h2>

<p>This file documents the GNU Emacs Common Lisp emulation package.

   <p>Copyright &copy; 1993, 2001&ndash;2016 Free Software Foundation, Inc.

   <blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being &ldquo;A GNU Manual&rdquo;,
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled &ldquo;GNU Free Documentation License&rdquo;.

        <p>(a) The FSF's Back-Cover Text is: &ldquo;You have the freedom to copy and
modify this GNU manual.&rdquo;
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#Overview">Overview</a>:              Basics, usage, organization, naming conventions. 
<li><a accesskey="2" href="#Program-Structure">Program Structure</a>:     Arglists, <code>cl-eval-when</code>. 
<li><a accesskey="3" href="#Predicates">Predicates</a>:            Type predicates and equality predicates. 
<li><a accesskey="4" href="#Control-Structure">Control Structure</a>:     Assignment, conditionals, blocks, looping. 
<li><a accesskey="5" href="#Macros">Macros</a>:                Destructuring, compiler macros. 
<li><a accesskey="6" href="#Declarations">Declarations</a>:          <code>cl-proclaim</code>, <code>cl-declare</code>, etc. 
<li><a accesskey="7" href="#Symbols">Symbols</a>:               Property lists, creating symbols. 
<li><a accesskey="8" href="#Numbers">Numbers</a>:               Predicates, functions, random numbers. 
<li><a accesskey="9" href="#Sequences">Sequences</a>:             Mapping, functions, searching, sorting. 
<li><a href="#Lists">Lists</a>:                 Functions, substitution, sets, associations. 
<li><a href="#Structures">Structures</a>:            <code>cl-defstruct</code>. 
<li><a href="#Assertions">Assertions</a>:            Assertions and type checking.

</li></ul>
<p>Appendices
</p>
<ul class="menu">
<li><a href="#Efficiency-Concerns">Efficiency Concerns</a>:             Hints and techniques. 
<li><a href="#Common-Lisp-Compatibility">Common Lisp Compatibility</a>:       All known differences with Steele. 
<li><a href="#Porting-Common-Lisp">Porting Common Lisp</a>:             Hints for porting Common Lisp code. 
<li><a href="#Obsolete-Features">Obsolete Features</a>:               Obsolete features. 
<li><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:  The license for this documentation.

</li></ul>
<p>Indexes
</p>
<ul class="menu">
<li><a href="#Function-Index">Function Index</a>:                  An entry for each documented function. 
<li><a href="#Variable-Index">Variable Index</a>:                  An entry for each documented variable. 
</ul>

<div class="node">
<p><hr>
<a name="Overview"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Program-Structure">Program Structure</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Overview</h2>

<p class="noindent">This document describes a set of Emacs Lisp facilities borrowed from
Common Lisp.  All the facilities are described here in detail.  While
this document does not assume any prior knowledge of Common Lisp, it
does assume a basic familiarity with Emacs Lisp.

   <p>Common Lisp is a huge language, and Common Lisp systems tend to be
massive and extremely complex.  Emacs Lisp, by contrast, is rather
minimalist in the choice of Lisp features it offers the programmer. 
As Emacs Lisp programmers have grown in number, and the applications
they write have grown more ambitious, it has become clear that Emacs
Lisp could benefit from many of the conveniences of Common Lisp.

   <p>The <dfn>CL</dfn> package adds a number of Common Lisp functions and
control structures to Emacs Lisp.  While not a 100% complete
implementation of Common Lisp, it adds enough functionality
to make Emacs Lisp programming significantly more convenient.

   <p>Some Common Lisp features have been omitted from this package
for various reasons:

     <ul>
<li>Some features are too complex or bulky relative to their benefit
to Emacs Lisp programmers.  CLOS and Common Lisp streams are fine
examples of this group.  (The separate package EIEIO implements
a subset of CLOS functionality.  See <a href="eieio.html#Top">Introduction</a>.)

     <li>Other features cannot be implemented without modification to the
Emacs Lisp interpreter itself, such as multiple return values,
case-insensitive symbols, and complex numbers. 
This package generally makes no attempt to emulate these features.

   </ul>

   <p>This package was originally written by Dave Gillespie,
<samp><span class="file">daveg@synaptics.com</span></samp>, as a total rewrite of an earlier 1986
<samp><span class="file">cl.el</span></samp> package by Cesar Quiroz.  Care has been taken to ensure
that each function is defined efficiently, concisely, and with minimal
impact on the rest of the Emacs environment.  Stefan Monnier added the
file <samp><span class="file">cl-lib.el</span></samp> and rationalized the namespace for Emacs 24.3.

<ul class="menu">
<li><a accesskey="1" href="#Usage">Usage</a>:                 How to use this package. 
<li><a accesskey="2" href="#Organization">Organization</a>:          The package's component files. 
<li><a accesskey="3" href="#Naming-Conventions">Naming Conventions</a>:    Notes on function names. 
</ul>

<div class="node">
<p><hr>
<a name="Usage"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Organization">Organization</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>

</div>

<h3 class="section">1.1 Usage</h3>

<p class="noindent">This package is distributed with Emacs, so there is no need
to install any additional files in order to start using it.  Lisp code
that uses features from this package should simply include at
the beginning:

<pre class="example">     (require 'cl-lib)
</pre>
   <p class="noindent">You may wish to add such a statement to your init file, if you
make frequent use of features from this package.

<div class="node">
<p><hr>
<a name="Organization"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Naming-Conventions">Naming Conventions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Usage">Usage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>

</div>

<h3 class="section">1.2 Organization</h3>

<p class="noindent">The Common Lisp package is organized into four main files:

     <dl>
<dt><samp><span class="file">cl-lib.el</span></samp><dd>This is the main file, which contains basic functions
and information about the package.  This file is relatively compact.

     <br><dt><samp><span class="file">cl-extra.el</span></samp><dd>This file contains the larger, more complex or unusual functions. 
It is kept separate so that packages which only want to use Common
Lisp fundamentals like the <code>cl-incf</code> function won't need to pay
the overhead of loading the more advanced functions.

     <br><dt><samp><span class="file">cl-seq.el</span></samp><dd>This file contains most of the advanced functions for operating
on sequences or lists, such as <code>cl-delete-if</code> and <code>cl-assoc</code>.

     <br><dt><samp><span class="file">cl-macs.el</span></samp><dd>This file contains the features that are macros instead of functions. 
Macros expand when the caller is compiled, not when it is run, so the
macros generally only need to be present when the byte-compiler is
running (or when the macros are used in uncompiled code).  Most of the
macros of this package are isolated in <samp><span class="file">cl-macs.el</span></samp> so that they
won't take up memory unless you are compiling. 
</dl>

   <p>The file <samp><span class="file">cl-lib.el</span></samp> includes all necessary <code>autoload</code>
commands for the functions and macros in the other three files. 
All you have to do is <code>(require 'cl-lib)</code>, and <samp><span class="file">cl-lib.el</span></samp>
will take care of pulling in the other files when they are
needed.

   <p>There is another file, <samp><span class="file">cl.el</span></samp>, which was the main entry point to
this package prior to Emacs 24.3.  Nowadays, it is replaced by
<samp><span class="file">cl-lib.el</span></samp>.  The two provide the same features (in most cases),
but use different function names (in fact, <samp><span class="file">cl.el</span></samp> mainly just
defines aliases to the <samp><span class="file">cl-lib.el</span></samp> definitions).  Where
<samp><span class="file">cl-lib.el</span></samp> defines a function called, for example,
<code>cl-incf</code>, <samp><span class="file">cl.el</span></samp> uses the same name but without the
`<samp><span class="samp">cl-</span></samp>' prefix, e.g., <code>incf</code> in this example.  There are a few
exceptions to this.  First, functions such as <code>cl-defun</code> where
the unprefixed version was already used for a standard Emacs Lisp
function.  In such cases, the <samp><span class="file">cl.el</span></samp> version adds a `<samp><span class="samp">*</span></samp>'
suffix, e.g., <code>defun*</code>.  Second, there are some obsolete features
that are only implemented in <samp><span class="file">cl.el</span></samp>, not in <samp><span class="file">cl-lib.el</span></samp>,
because they are replaced by other standard Emacs Lisp features. 
Finally, in a very few cases the old <samp><span class="file">cl.el</span></samp> versions do not
behave in exactly the same way as the <samp><span class="file">cl-lib.el</span></samp> versions. 
See <a href="#Obsolete-Features">Obsolete Features</a>. 
<!-- There is also cl-mapc, which was called cl-mapc even before cl-lib.el. -->
<!-- But not autoloaded, so maybe not much used? -->

   <p>Since the old <samp><span class="file">cl.el</span></samp> does not use a clean namespace, Emacs has a
policy that packages distributed with Emacs must not load <code>cl</code> at
run time.  (It is ok for them to load <code>cl</code> at <em>compile</em>
time, with <code>eval-when-compile</code>, and use the macros it provides.) 
There is no such restriction on the use of <code>cl-lib</code>.  New code
should use <code>cl-lib</code> rather than <code>cl</code>.

   <p>There is one more file, <samp><span class="file">cl-compat.el</span></samp>, which defines some
routines from the older Quiroz <samp><span class="file">cl.el</span></samp> package that are not otherwise
present in the new package.  This file is obsolete and should not be
used in new code.

<div class="node">
<p><hr>
<a name="Naming-Conventions"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Organization">Organization</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>

</div>

<h3 class="section">1.3 Naming Conventions</h3>

<p class="noindent">Except where noted, all functions defined by this package have the
same calling conventions as their Common Lisp counterparts, and
names that are those of Common Lisp plus a `<samp><span class="samp">cl-</span></samp>' prefix.

   <p>Internal function and variable names in the package are prefixed
by <code>cl--</code>.  Here is a complete list of functions prefixed by
<code>cl-</code> that were <em>not</em> taken from Common Lisp:

<pre class="example">     cl-callf           cl-callf2          cl-defsubst
     cl-letf            cl-letf*
</pre>
   <!-- This is not uninteresting I suppose, but is of zero practical relevance -->
<!-- to the user, and seems like a hostage to changing implementation details. -->
<p>The following simple functions and macros are defined in <samp><span class="file">cl-lib.el</span></samp>;
they do not cause other components like <samp><span class="file">cl-extra</span></samp> to be loaded.

<pre class="example">     cl-evenp           cl-oddp            cl-minusp
     cl-plusp           cl-endp            cl-subst
     cl-copy-list       cl-list*           cl-ldiff
     cl-rest            cl-decf [1]        cl-incf [1]
     cl-acons           cl-adjoin [2]      cl-pairlis
     cl-pushnew [1,2]   cl-declaim         cl-proclaim
     cl-caaar...cl-cddddr                  cl-first...cl-tenth
     cl-mapcar [3]
</pre>
   <p class="noindent">[1] Only when <var>place</var> is a plain variable name.

<p class="noindent">[2] Only if <code>:test</code> is <code>eq</code>, <code>equal</code>, or unspecified,
and <code>:key</code> is not used.

<p class="noindent">[3] Only for one sequence argument or two list arguments.

<div class="node">
<p><hr>
<a name="Program-Structure"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Predicates">Predicates</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Program Structure</h2>

<p class="noindent">This section describes features of this package that have to
do with programs as a whole: advanced argument lists for functions,
and the <code>cl-eval-when</code> construct.

<ul class="menu">
<li><a accesskey="1" href="#Argument-Lists">Argument Lists</a>:        <code>&amp;key</code>, <code>&amp;aux</code>, <code>cl-defun</code>, <code>cl-defmacro</code>. 
<li><a accesskey="2" href="#Time-of-Evaluation">Time of Evaluation</a>:    The <code>cl-eval-when</code> construct. 
</ul>

<div class="node">
<p><hr>
<a name="Argument-Lists"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Time-of-Evaluation">Time of Evaluation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Program-Structure">Program Structure</a>

</div>

<h3 class="section">2.1 Argument Lists</h3>

<p><a name="index-g_t_0026key-1"></a><a name="index-g_t_0026aux-2"></a>
Emacs Lisp's notation for argument lists of functions is a subset of
the Common Lisp notation.  As well as the familiar <code>&amp;optional</code>
and <code>&amp;rest</code> markers, Common Lisp allows you to specify default
values for optional arguments, and it provides the additional markers
<code>&amp;key</code> and <code>&amp;aux</code>.

   <p>Since argument parsing is built-in to Emacs, there is no way for
this package to implement Common Lisp argument lists seamlessly. 
Instead, this package defines alternates for several Lisp forms
which you must use if you need Common Lisp argument lists.

<div class="defun">
&mdash; Macro: <b>cl-defun</b><var> name arglist body<small class="dots">...</small><a name="index-cl_002ddefun-3"></a></var><br>
<blockquote><p>This form is identical to the regular <code>defun</code> form, except
that <var>arglist</var> is allowed to be a full Common Lisp argument
list.  Also, the function body is enclosed in an implicit block
called <var>name</var>; see <a href="#Blocks-and-Exits">Blocks and Exits</a>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-iter-defun</b><var> name arglist body<small class="dots">...</small><a name="index-cl_002diter_002ddefun-4"></a></var><br>
<blockquote><p>This form is identical to the regular <code>iter-defun</code> form, except
that <var>arglist</var> is allowed to be a full Common Lisp argument
list.  Also, the function body is enclosed in an implicit block
called <var>name</var>; see <a href="#Blocks-and-Exits">Blocks and Exits</a>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-defsubst</b><var> name arglist body<small class="dots">...</small><a name="index-cl_002ddefsubst-5"></a></var><br>
<blockquote><p>This is just like <code>cl-defun</code>, except that the function that
is defined is automatically proclaimed <code>inline</code>, i.e.,
calls to it may be expanded into in-line code by the byte compiler. 
This is analogous to the <code>defsubst</code> form;
<code>cl-defsubst</code> uses a different method (compiler macros) which
works in all versions of Emacs, and also generates somewhat more
<!-- For some examples, -->
<!-- see http://lists.gnu.org/archive/html/emacs-devel/2012-11/msg00009.html -->
efficient inline expansions.  In particular, <code>cl-defsubst</code>
arranges for the processing of keyword arguments, default values,
etc., to be done at compile-time whenever possible. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-defmacro</b><var> name arglist body<small class="dots">...</small><a name="index-cl_002ddefmacro-6"></a></var><br>
<blockquote><p>This is identical to the regular <code>defmacro</code> form,
except that <var>arglist</var> is allowed to be a full Common Lisp
argument list.  The <code>&amp;environment</code> keyword is supported as
described in Steele's book <cite>Common Lisp, the Language</cite>. 
The <code>&amp;whole</code> keyword is supported only
within destructured lists (see below); top-level <code>&amp;whole</code>
cannot be implemented with the current Emacs Lisp interpreter. 
The macro expander body is enclosed in an implicit block called
<var>name</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-function</b><var> symbol-or-lambda<a name="index-cl_002dfunction-7"></a></var><br>
<blockquote><p>This is identical to the regular <code>function</code> form,
except that if the argument is a <code>lambda</code> form then that
form may use a full Common Lisp argument list. 
</p></blockquote></div>

   <p>Also, all forms (such as <code>cl-flet</code> and <code>cl-labels</code>) defined
in this package that include <var>arglist</var>s in their syntax allow
full Common Lisp argument lists.

   <p>Note that it is <em>not</em> necessary to use <code>cl-defun</code> in
order to have access to most CL features in your function. 
These features are always present; <code>cl-defun</code>'s only
difference from <code>defun</code> is its more flexible argument
lists and its implicit block.

   <p>The full form of a Common Lisp argument list is

<pre class="example">     (<var>var</var>...
      &amp;optional (<var>var</var> <var>initform</var> <var>svar</var>)...
      &amp;rest <var>var</var>
      &amp;key ((<var>keyword</var> <var>var</var>) <var>initform</var> <var>svar</var>)...
      &amp;aux (<var>var</var> <var>initform</var>)...)
</pre>
   <p>Each of the five argument list sections is optional.  The <var>svar</var>,
<var>initform</var>, and <var>keyword</var> parts are optional; if they are
omitted, then `<samp><span class="samp">(</span><var>var</var><span class="samp">)</span></samp>' may be written simply `<samp><var>var</var></samp>'.

   <p>The first section consists of zero or more <dfn>required</dfn> arguments. 
These arguments must always be specified in a call to the function;
there is no difference between Emacs Lisp and Common Lisp as far as
required arguments are concerned.

   <p>The second section consists of <dfn>optional</dfn> arguments.  These
arguments may be specified in the function call; if they are not,
<var>initform</var> specifies the default value used for the argument. 
(No <var>initform</var> means to use <code>nil</code> as the default.)  The
<var>initform</var> is evaluated with the bindings for the preceding
arguments already established; <code>(a &amp;optional (b (1+ a)))</code>
matches one or two arguments, with the second argument defaulting
to one plus the first argument.  If the <var>svar</var> is specified,
it is an auxiliary variable which is bound to <code>t</code> if the optional
argument was specified, or to <code>nil</code> if the argument was omitted. 
If you don't use an <var>svar</var>, then there will be no way for your
function to tell whether it was called with no argument, or with
the default value passed explicitly as an argument.

   <p>The third section consists of a single <dfn>rest</dfn> argument.  If
more arguments were passed to the function than are accounted for
by the required and optional arguments, those extra arguments are
collected into a list and bound to the &ldquo;rest&rdquo; argument variable. 
Common Lisp's <code>&amp;rest</code> is equivalent to that of Emacs Lisp. 
Common Lisp accepts <code>&amp;body</code> as a synonym for <code>&amp;rest</code> in
macro contexts; this package accepts it all the time.

   <p>The fourth section consists of <dfn>keyword</dfn> arguments.  These
are optional arguments which are specified by name rather than
positionally in the argument list.  For example,

<pre class="example">     (cl-defun foo (a &amp;optional b &amp;key c d (e 17)))
</pre>
   <p class="noindent">defines a function which may be called with one, two, or more
arguments.  The first two arguments are bound to <code>a</code> and
<code>b</code> in the usual way.  The remaining arguments must be
pairs of the form <code>:c</code>, <code>:d</code>, or <code>:e</code> followed
by the value to be bound to the corresponding argument variable. 
(Symbols whose names begin with a colon are called <dfn>keywords</dfn>,
and they are self-quoting in the same way as <code>nil</code> and
<code>t</code>.)

   <p>For example, the call <code>(foo 1 2 :d 3 :c 4)</code> sets the five
arguments to 1, 2, 4, 3, and 17, respectively.  If the same keyword
appears more than once in the function call, the first occurrence
takes precedence over the later ones.  Note that it is not possible
to specify keyword arguments without specifying the optional
argument <code>b</code> as well, since <code>(foo 1 :c 2)</code> would bind
<code>b</code> to the keyword <code>:c</code>, then signal an error because
<code>2</code> is not a valid keyword.

   <p>You can also explicitly specify the keyword argument; it need not be
simply the variable name prefixed with a colon.  For example,

<pre class="example">     (cl-defun bar (&amp;key (a 1) ((baz b) 4)))
</pre>
   <p class="noindent">specifies a keyword <code>:a</code> that sets the variable <code>a</code> with
default value 1, as well as a keyword <code>baz</code> that sets the
variable <code>b</code> with default value 4.  In this case, because
<code>baz</code> is not self-quoting, you must quote it explicitly in the
function call, like this:

<pre class="example">     (bar :a 10 'baz 42)
</pre>
   <p>Ordinarily, it is an error to pass an unrecognized keyword to
a function, e.g., <code>(foo 1 2 :c 3 :goober 4)</code>.  You can ask
Lisp to ignore unrecognized keywords, either by adding the
marker <code>&amp;allow-other-keys</code> after the keyword section
of the argument list, or by specifying an <code>:allow-other-keys</code>
argument in the call whose value is non-<code>nil</code>.  If the
function uses both <code>&amp;rest</code> and <code>&amp;key</code> at the same time,
the &ldquo;rest&rdquo; argument is bound to the keyword list as it appears
in the call.  For example:

<pre class="example">     (cl-defun find-thing (thing &amp;rest rest &amp;key need &amp;allow-other-keys)
       (or (apply 'cl-member thing thing-list :allow-other-keys t rest)
           (if need (error "Thing not found"))))
</pre>
   <p class="noindent">This function takes a <code>:need</code> keyword argument, but also
accepts other keyword arguments which are passed on to the
<code>cl-member</code> function.  <code>allow-other-keys</code> is used to
keep both <code>find-thing</code> and <code>cl-member</code> from complaining
about each others' keywords in the arguments.

   <p>The fifth section of the argument list consists of <dfn>auxiliary
variables</dfn>.  These are not really arguments at all, but simply
variables which are bound to <code>nil</code> or to the specified
<var>initforms</var> during execution of the function.  There is no
difference between the following two functions, except for a
matter of stylistic taste:

<pre class="example">     (cl-defun foo (a b &amp;aux (c (+ a b)) d)
       <var>body</var>)
     
     (cl-defun foo (a b)
       (let ((c (+ a b)) d)
         <var>body</var>))
</pre>
   <p><a name="index-destructuring_002c-in-argument-list-8"></a>Argument lists support <dfn>destructuring</dfn>.  In Common Lisp,
destructuring is only allowed with <code>defmacro</code>; this package
allows it with <code>cl-defun</code> and other argument lists as well. 
In destructuring, any argument variable (<var>var</var> in the above
example) can be replaced by a list of variables, or more generally,
a recursive argument list.  The corresponding argument value must
be a list whose elements match this recursive argument list. 
For example:

<pre class="example">     (cl-defmacro dolist ((var listform &amp;optional resultform)
                        &amp;rest body)
       ...)
</pre>
   <p>This says that the first argument of <code>dolist</code> must be a list
of two or three items; if there are other arguments as well as this
list, they are stored in <code>body</code>.  All features allowed in
regular argument lists are allowed in these recursive argument lists. 
In addition, the clause `<samp><span class="samp">&amp;whole </span><var>var</var></samp>' is allowed at the
front of a recursive argument list.  It binds <var>var</var> to the
whole list being matched; thus <code>(&amp;whole all a b)</code> matches
a list of two things, with <code>a</code> bound to the first thing,
<code>b</code> bound to the second thing, and <code>all</code> bound to the
list itself.  (Common Lisp allows <code>&amp;whole</code> in top-level
<code>defmacro</code> argument lists as well, but Emacs Lisp does not
support this usage.)

   <p>One last feature of destructuring is that the argument list may be
dotted, so that the argument list <code>(a b . c)</code> is functionally
equivalent to <code>(a b &amp;rest c)</code>.

   <p>If the optimization quality <code>safety</code> is set to 0
(see <a href="#Declarations">Declarations</a>), error checking for wrong number of
arguments and invalid keyword arguments is disabled.  By default,
argument lists are rigorously checked.

<div class="node">
<p><hr>
<a name="Time-of-Evaluation"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Argument-Lists">Argument Lists</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Program-Structure">Program Structure</a>

</div>

<h3 class="section">2.2 Time of Evaluation</h3>

<p class="noindent">Normally, the byte-compiler does not actually execute the forms in
a file it compiles.  For example, if a file contains <code>(setq foo t)</code>,
the act of compiling it will not actually set <code>foo</code> to <code>t</code>. 
This is true even if the <code>setq</code> was a top-level form (i.e., not
enclosed in a <code>defun</code> or other form).  Sometimes, though, you
would like to have certain top-level forms evaluated at compile-time. 
For example, the compiler effectively evaluates <code>defmacro</code> forms
at compile-time so that later parts of the file can refer to the
macros that are defined.

<div class="defun">
&mdash; Macro: <b>cl-eval-when</b> (<var>situations<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-cl_002deval_002dwhen-9"></a></var><br>
<blockquote><p>This form controls when the body <var>forms</var> are evaluated. 
The <var>situations</var> list may contain any set of the symbols
<code>compile</code>, <code>load</code>, and <code>eval</code> (or their long-winded
ANSI equivalents, <code>:compile-toplevel</code>, <code>:load-toplevel</code>,
and <code>:execute</code>).

        <p>The <code>cl-eval-when</code> form is handled differently depending on
whether or not it is being compiled as a top-level form. 
Specifically, it gets special treatment if it is being compiled
by a command such as <code>byte-compile-file</code> which compiles files
or buffers of code, and it appears either literally at the
top level of the file or inside a top-level <code>progn</code>.

        <p>For compiled top-level <code>cl-eval-when</code>s, the body <var>forms</var> are
executed at compile-time if <code>compile</code> is in the <var>situations</var>
list, and the <var>forms</var> are written out to the file (to be executed
at load-time) if <code>load</code> is in the <var>situations</var> list.

        <p>For non-compiled-top-level forms, only the <code>eval</code> situation is
relevant.  (This includes forms executed by the interpreter, forms
compiled with <code>byte-compile</code> rather than <code>byte-compile-file</code>,
and non-top-level forms.)  The <code>cl-eval-when</code> acts like a
<code>progn</code> if <code>eval</code> is specified, and like <code>nil</code>
(ignoring the body <var>forms</var>) if not.

        <p>The rules become more subtle when <code>cl-eval-when</code>s are nested;
consult Steele (second edition) for the gruesome details (and
some gruesome examples).

        <p>Some simple examples:

     <pre class="example">          ;; Top-level forms in foo.el:
          (cl-eval-when (compile)           (setq foo1 'bar))
          (cl-eval-when (load)              (setq foo2 'bar))
          (cl-eval-when (compile load)      (setq foo3 'bar))
          (cl-eval-when (eval)              (setq foo4 'bar))
          (cl-eval-when (eval compile)      (setq foo5 'bar))
          (cl-eval-when (eval load)         (setq foo6 'bar))
          (cl-eval-when (eval compile load) (setq foo7 'bar))
     </pre>
        <p>When <samp><span class="file">foo.el</span></samp> is compiled, these variables will be set during
the compilation itself:

     <pre class="example">          foo1  foo3  foo5  foo7      ; 'compile'
     </pre>
        <p>When <samp><span class="file">foo.elc</span></samp> is loaded, these variables will be set:

     <pre class="example">          foo2  foo3  foo6  foo7      ; 'load'
     </pre>
        <p>And if <samp><span class="file">foo.el</span></samp> is loaded uncompiled, these variables will
be set:

     <pre class="example">          foo4  foo5  foo6  foo7      ; 'eval'
     </pre>
        <p>If these seven <code>cl-eval-when</code>s had been, say, inside a <code>defun</code>,
then the first three would have been equivalent to <code>nil</code> and the
last four would have been equivalent to the corresponding <code>setq</code>s.

        <p>Note that <code>(cl-eval-when (load eval) ...)</code> is equivalent
to <code>(progn ...)</code> in all contexts.  The compiler treats
certain top-level forms, like <code>defmacro</code> (sort-of) and
<code>require</code>, as if they were wrapped in <code>(cl-eval-when
(compile load eval) ...)</code>. 
</p></blockquote></div>

   <p>Emacs includes two special forms related to <code>cl-eval-when</code>. 
See <a href="elisp.html#Eval-During-Compile">Eval During Compile</a>. 
One of these, <code>eval-when-compile</code>, is not quite equivalent to
any <code>cl-eval-when</code> construct and is described below.

   <p>The other form, <code>(eval-and-compile ...)</code>, is exactly
equivalent to `<samp><span class="samp">(cl-eval-when (compile load eval) ...)</span></samp>'.

<div class="defun">
&mdash; Macro: <b>eval-when-compile</b><var> forms<small class="dots">...</small><a name="index-eval_002dwhen_002dcompile-10"></a></var><br>
<blockquote><p>The <var>forms</var> are evaluated at compile-time; at execution time,
this form acts like a quoted constant of the resulting value.  Used
at top-level, <code>eval-when-compile</code> is just like `<samp><span class="samp">eval-when
(compile eval)</span></samp>'.  In other contexts, <code>eval-when-compile</code>
allows code to be evaluated once at compile-time for efficiency
or other reasons.

        <p>This form is similar to the `<samp><span class="samp">#.</span></samp>' syntax of true Common Lisp. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-load-time-value</b><var> form<a name="index-cl_002dload_002dtime_002dvalue-11"></a></var><br>
<blockquote><p>The <var>form</var> is evaluated at load-time; at execution time,
this form acts like a quoted constant of the resulting value.

        <p>Early Common Lisp had a `<samp><span class="samp">#,</span></samp>' syntax that was similar to
this, but ANSI Common Lisp replaced it with <code>load-time-value</code>
and gave it more well-defined semantics.

        <p>In a compiled file, <code>cl-load-time-value</code> arranges for <var>form</var>
to be evaluated when the <samp><span class="file">.elc</span></samp> file is loaded and then used
as if it were a quoted constant.  In code compiled by
<code>byte-compile</code> rather than <code>byte-compile-file</code>, the
effect is identical to <code>eval-when-compile</code>.  In uncompiled
code, both <code>eval-when-compile</code> and <code>cl-load-time-value</code>
act exactly like <code>progn</code>.

     <pre class="example">          (defun report ()
            (insert "This function was executed on: "
                    (current-time-string)
                    ", compiled on: "
                    (eval-when-compile (current-time-string))
                    ;; or '#.(current-time-string) in real Common Lisp
                    ", and loaded on: "
                    (cl-load-time-value (current-time-string))))
     </pre>
        <p class="noindent">Byte-compiled, the above defun will result in the following code
(or its compiled equivalent, of course) in the <samp><span class="file">.elc</span></samp> file:

     <pre class="example">          (setq --temp-- (current-time-string))
          (defun report ()
            (insert "This function was executed on: "
                    (current-time-string)
                    ", compiled on: "
                    '"Wed Oct 31 16:32:28 2012"
                    ", and loaded on: "
                    --temp--))
     </pre>
        </blockquote></div>

<div class="node">
<p><hr>
<a name="Predicates"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Control-Structure">Control Structure</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Program-Structure">Program Structure</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 Predicates</h2>

<p class="noindent">This section describes functions for testing whether various
facts are true or false.

<ul class="menu">
<li><a accesskey="1" href="#Type-Predicates">Type Predicates</a>:       <code>cl-typep</code>, <code>cl-deftype</code>, and <code>cl-coerce</code>. 
<li><a accesskey="2" href="#Equality-Predicates">Equality Predicates</a>:   <code>cl-equalp</code>. 
</ul>

<div class="node">
<p><hr>
<a name="Type-Predicates"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Equality-Predicates">Equality Predicates</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Predicates">Predicates</a>

</div>

<h3 class="section">3.1 Type Predicates</h3>

<div class="defun">
&mdash; Function: <b>cl-typep</b><var> object type<a name="index-cl_002dtypep-12"></a></var><br>
<blockquote><p>Check if <var>object</var> is of type <var>type</var>, where <var>type</var> is a
(quoted) type name of the sort used by Common Lisp.  For example,
<code>(cl-typep foo 'integer)</code> is equivalent to <code>(integerp foo)</code>. 
</p></blockquote></div>

   <p>The <var>type</var> argument to the above function is either a symbol
or a list beginning with a symbol.

     <ul>
<li>If the type name is a symbol, Emacs appends `<samp><span class="samp">-p</span></samp>' to the
symbol name to form the name of a predicate function for testing
the type.  (Built-in predicates whose names end in `<samp><span class="samp">p</span></samp>' rather
than `<samp><span class="samp">-p</span></samp>' are used when appropriate.)

     <li>The type symbol <code>t</code> stands for the union of all types. 
<code>(cl-typep </code><var>object</var><code> t)</code> is always true.  Likewise, the
type symbol <code>nil</code> stands for nothing at all, and
<code>(cl-typep </code><var>object</var><code> nil)</code> is always false.

     <li>The type symbol <code>null</code> represents the symbol <code>nil</code>. 
Thus <code>(cl-typep </code><var>object</var><code> 'null)</code> is equivalent to
<code>(null </code><var>object</var><code>)</code>.

     <li>The type symbol <code>atom</code> represents all objects that are not cons
cells. Thus <code>(cl-typep </code><var>object</var><code> 'atom)</code> is equivalent to
<code>(atom </code><var>object</var><code>)</code>.

     <li>The type symbol <code>real</code> is a synonym for <code>number</code>, and
<code>fixnum</code> is a synonym for <code>integer</code>.

     <li>The type symbols <code>character</code> and <code>string-char</code> match
integers in the range from 0 to 255.

     <li>The type list <code>(integer </code><var>low</var> <var>high</var><code>)</code> represents all
integers between <var>low</var> and <var>high</var>, inclusive.  Either bound
may be a list of a single integer to specify an exclusive limit,
or a <code>*</code> to specify no limit.  The type <code>(integer * *)</code>
is thus equivalent to <code>integer</code>.

     <li>Likewise, lists beginning with <code>float</code>, <code>real</code>, or
<code>number</code> represent numbers of that type falling in a particular
range.

     <li>Lists beginning with <code>and</code>, <code>or</code>, and <code>not</code> form
combinations of types.  For example, <code>(or integer (float 0 *))</code>
represents all objects that are integers or non-negative floats.

     <li>Lists beginning with <code>member</code> or <code>cl-member</code> represent
objects <code>eql</code> to any of the following values.  For example,
<code>(member 1 2 3 4)</code> is equivalent to <code>(integer 1 4)</code>,
and <code>(member nil)</code> is equivalent to <code>null</code>.

     <li>Lists of the form <code>(satisfies </code><var>predicate</var><code>)</code> represent
all objects for which <var>predicate</var> returns true when called
with that object as an argument. 
</ul>

   <p>The following function and macro (not technically predicates) are
related to <code>cl-typep</code>.

<div class="defun">
&mdash; Function: <b>cl-coerce</b><var> object type<a name="index-cl_002dcoerce-13"></a></var><br>
<blockquote><p>This function attempts to convert <var>object</var> to the specified
<var>type</var>.  If <var>object</var> is already of that type as determined by
<code>cl-typep</code>, it is simply returned.  Otherwise, certain types of
conversions will be made:  If <var>type</var> is any sequence type
(<code>string</code>, <code>list</code>, etc.) then <var>object</var> will be
converted to that type if possible.  If <var>type</var> is
<code>character</code>, then strings of length one and symbols with
one-character names can be coerced.  If <var>type</var> is <code>float</code>,
then integers can be coerced in versions of Emacs that support
floats.  In all other circumstances, <code>cl-coerce</code> signals an
error. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-deftype</b><var> name arglist forms<small class="dots">...</small><a name="index-cl_002ddeftype-14"></a></var><br>
<blockquote><p>This macro defines a new type called <var>name</var>.  It is similar
to <code>defmacro</code> in many ways; when <var>name</var> is encountered
as a type name, the body <var>forms</var> are evaluated and should
return a type specifier that is equivalent to the type.  The
<var>arglist</var> is a Common Lisp argument list of the sort accepted
by <code>cl-defmacro</code>.  The type specifier `<samp><span class="samp">(</span><var>name</var> <var>args</var><span class="samp">...)</span></samp>'
is expanded by calling the expander with those arguments; the type
symbol `<samp><var>name</var></samp>' is expanded by calling the expander with
no arguments.  The <var>arglist</var> is processed the same as for
<code>cl-defmacro</code> except that optional arguments without explicit
defaults use <code>*</code> instead of <code>nil</code> as the &ldquo;default&rdquo;
default.  Some examples:

     <pre class="example">          (cl-deftype null () '(satisfies null))    ; predefined
          (cl-deftype list () '(or null cons))      ; predefined
          (cl-deftype unsigned-byte (&amp;optional bits)
            (list 'integer 0 (if (eq bits '*) bits (1- (lsh 1 bits)))))
          (unsigned-byte 8)  ==  (integer 0 255)
          (unsigned-byte)  ==  (integer 0 *)
          unsigned-byte  ==  (integer 0 *)
     </pre>
        <p class="noindent">The last example shows how the Common Lisp <code>unsigned-byte</code>
type specifier could be implemented if desired; this package does
not implement <code>unsigned-byte</code> by default. 
</p></blockquote></div>

   <p>The <code>cl-typecase</code> (see <a href="#Conditionals">Conditionals</a>) and <code>cl-check-type</code>
(see <a href="#Assertions">Assertions</a>) macros also use type names.  The <code>cl-map</code>,
<code>cl-concatenate</code>, and <code>cl-merge</code> functions take type-name
arguments to specify the type of sequence to return.  See <a href="#Sequences">Sequences</a>.

<div class="node">
<p><hr>
<a name="Equality-Predicates"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Type-Predicates">Type Predicates</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Predicates">Predicates</a>

</div>

<h3 class="section">3.2 Equality Predicates</h3>

<p class="noindent">This package defines the Common Lisp predicate <code>cl-equalp</code>.

<div class="defun">
&mdash; Function: <b>cl-equalp</b><var> a b<a name="index-cl_002dequalp-15"></a></var><br>
<blockquote><p>This function is a more flexible version of <code>equal</code>.  In
particular, it compares strings case-insensitively, and it compares
numbers without regard to type (so that <code>(cl-equalp 3 3.0)</code> is
true).  Vectors and conses are compared recursively.  All other
objects are compared as if by <code>equal</code>.

        <p>This function differs from Common Lisp <code>equalp</code> in several
respects.  First, Common Lisp's <code>equalp</code> also compares
<em>characters</em> case-insensitively, which would be impractical
in this package since Emacs does not distinguish between integers
and characters.  In keeping with the idea that strings are less
vector-like in Emacs Lisp, this package's <code>cl-equalp</code> also will
not compare strings against vectors of integers. 
</p></blockquote></div>

   <p>Also note that the Common Lisp functions <code>member</code> and <code>assoc</code>
use <code>eql</code> to compare elements, whereas Emacs Lisp follows the
MacLisp tradition and uses <code>equal</code> for these two functions. 
The functions <code>cl-member</code> and <code>cl-assoc</code> use <code>eql</code>,
as in Common Lisp.  The standard Emacs Lisp functions <code>memq</code> and
<code>assq</code> use <code>eq</code>, and the standard <code>memql</code> uses <code>eql</code>.

<div class="node">
<p><hr>
<a name="Control-Structure"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Macros">Macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Predicates">Predicates</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Control Structure</h2>

<p class="noindent">The features described in the following sections implement
various advanced control structures, including extensions to the
standard <code>setf</code> facility, and a number of looping and conditional
constructs.

<ul class="menu">
<li><a accesskey="1" href="#Assignment">Assignment</a>:              The <code>cl-psetq</code> form. 
<li><a accesskey="2" href="#Generalized-Variables">Generalized Variables</a>:   Extensions to generalized variables. 
<li><a accesskey="3" href="#Variable-Bindings">Variable Bindings</a>:       <code>cl-progv</code>, <code>cl-flet</code>, <code>cl-macrolet</code>. 
<li><a accesskey="4" href="#Conditionals">Conditionals</a>:            <code>cl-case</code>, <code>cl-typecase</code>. 
<li><a accesskey="5" href="#Blocks-and-Exits">Blocks and Exits</a>:        <code>cl-block</code>, <code>cl-return</code>, <code>cl-return-from</code>. 
<li><a accesskey="6" href="#Iteration">Iteration</a>:               <code>cl-do</code>, <code>cl-dotimes</code>, <code>cl-dolist</code>, <code>cl-do-symbols</code>. 
<li><a accesskey="7" href="#Loop-Facility">Loop Facility</a>:           The Common Lisp <code>loop</code> macro. 
<li><a accesskey="8" href="#Multiple-Values">Multiple Values</a>:         <code>cl-values</code>, <code>cl-multiple-value-bind</code>, etc. 
</ul>

<div class="node">
<p><hr>
<a name="Assignment"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Generalized-Variables">Generalized Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.1 Assignment</h3>

<p class="noindent">The <code>cl-psetq</code> form is just like <code>setq</code>, except that multiple
assignments are done in parallel rather than sequentially.

<div class="defun">
&mdash; Macro: <b>cl-psetq</b> [<var>symbol form</var>]<var><small class="dots">...</small><a name="index-cl_002dpsetq-16"></a></var><br>
<blockquote><p>This special form (actually a macro) is used to assign to several
variables simultaneously.  Given only one <var>symbol</var> and <var>form</var>,
it has the same effect as <code>setq</code>.  Given several <var>symbol</var>
and <var>form</var> pairs, it evaluates all the <var>form</var>s in advance
and then stores the corresponding variables afterwards.

     <pre class="example">          (setq x 2 y 3)
          (setq x (+ x y)  y (* x y))
          x
               =&gt; 5
          y                     ; <code>y</code><span class="roman"> was computed after </span><code>x</code><span class="roman"> was set.</span>
               =&gt; 15
          (setq x 2 y 3)
          (cl-psetq x (+ x y)  y (* x y))
          x
               =&gt; 5
          y                     ; <code>y</code><span class="roman"> was computed before </span><code>x</code><span class="roman"> was set.</span>
               =&gt; 6
     </pre>
        <p>The simplest use of <code>cl-psetq</code> is <code>(cl-psetq x y y x)</code>, which
exchanges the values of two variables.  (The <code>cl-rotatef</code> form
provides an even more convenient way to swap two variables;
see <a href="#Modify-Macros">Modify Macros</a>.)

        <p><code>cl-psetq</code> always returns <code>nil</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Generalized-Variables"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variable-Bindings">Variable Bindings</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assignment">Assignment</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.2 Generalized Variables</h3>

<p>A <dfn>generalized variable</dfn> or <dfn>place form</dfn> is one of the many
places in Lisp memory where values can be stored.  The simplest place
form is a regular Lisp variable.  But the <span class="sc">car</span>s and <span class="sc">cdr</span>s of lists,
elements of arrays, properties of symbols, and many other locations
are also places where Lisp values are stored.  For basic information,
see <a href="elisp.html#Generalized-Variables">Generalized Variables</a>. 
This package provides several additional features related to
generalized variables.

<ul class="menu">
<li><a accesskey="1" href="#Setf-Extensions">Setf Extensions</a>:     Additional <code>setf</code> places. 
<li><a accesskey="2" href="#Modify-Macros">Modify Macros</a>:       <code>cl-incf</code>, <code>cl-rotatef</code>, <code>cl-letf</code>, <code>cl-callf</code>, etc. 
</ul>

<div class="node">
<p><hr>
<a name="Setf-Extensions"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Modify-Macros">Modify Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalized-Variables">Generalized Variables</a>

</div>

<h4 class="subsection">4.2.1 Setf Extensions</h4>

<p>Several standard (e.g., <code>car</code>) and Emacs-specific
(e.g., <code>window-point</code>) Lisp functions are <code>setf</code>-able by default. 
This package defines <code>setf</code> handlers for several additional functions:

     <ul>
<li>Functions from this package:
     <pre class="example">          cl-rest        cl-subseq      cl-get         cl-getf
          cl-caaar...cl-cddddr          cl-first...cl-tenth
     </pre>
     <p class="noindent">Note that for <code>cl-getf</code> (as for <code>nthcdr</code>), the list argument
of the function must itself be a valid <var>place</var> form.

     <li>General Emacs Lisp functions:
     <pre class="example">          buffer-file-name                   getenv
          buffer-modified-p                  global-key-binding
          buffer-name                        local-key-binding
          buffer-string                      mark
          buffer-substring                   mark-marker
          current-buffer                     marker-position
          current-case-table                 mouse-position
          current-column                     point
          current-global-map                 point-marker
          current-input-mode                 point-max
          current-local-map                  point-min
          current-window-configuration       read-mouse-position
          default-file-modes                 screen-height
          documentation-property             screen-width
          face-background                    selected-window
          face-background-pixmap             selected-screen
          face-font                          selected-frame
          face-foreground                    standard-case-table
          face-underline-p                   syntax-table
          file-modes                         visited-file-modtime
          frame-height                       window-height
          frame-parameters                   window-width
          frame-visible-p                    x-get-secondary-selection
          frame-width                        x-get-selection
          get-register
     </pre>
     <p>Most of these have directly corresponding &ldquo;set&rdquo; functions, like
<code>use-local-map</code> for <code>current-local-map</code>, or <code>goto-char</code>
for <code>point</code>.  A few, like <code>point-min</code>, expand to longer
sequences of code when they are used with <code>setf</code>
(<code>(narrow-to-region x (point-max))</code> in this case).

     <li>A call of the form <code>(substring </code><var>subplace</var> <var>n</var><code> [</code><var>m</var><code>])</code>,
where <var>subplace</var> is itself a valid generalized variable whose
current value is a string, and where the value stored is also a
string.  The new string is spliced into the specified part of the
destination string.  For example:

     <pre class="example">          (setq a (list "hello" "world"))
               =&gt; ("hello" "world")
          (cadr a)
               =&gt; "world"
          (substring (cadr a) 2 4)
               =&gt; "rl"
          (setf (substring (cadr a) 2 4) "o")
               =&gt; "o"
          (cadr a)
               =&gt; "wood"
          a
               =&gt; ("hello" "wood")
     </pre>
     <p>The generalized variable <code>buffer-substring</code>, listed above,
also works in this way by replacing a portion of the current buffer.

     <!-- FIXME?  Also 'eq'? (see cl-lib.el) -->
<!-- Currently commented out in cl.el. -->
<!-- FIXME?  Is this still true? -->
<li>A macro call, in which case the macro is expanded and <code>setf</code>
is applied to the resulting form. 
</ul>

<!-- FIXME should this be in lispref?  It seems self-evident. -->
<!-- Contrast with the cl-incf example later on. -->
<!-- Here it really only serves as a contrast to wrong-order. -->
<p>The <code>setf</code> macro takes care to evaluate all subforms in
the proper left-to-right order; for example,

<pre class="example">     (setf (aref vec (cl-incf i)) i)
</pre>
   <p class="noindent">looks like it will evaluate <code>(cl-incf i)</code> exactly once, before the
following access to <code>i</code>; the <code>setf</code> expander will insert
temporary variables as necessary to ensure that it does in fact work
this way no matter what setf-method is defined for <code>aref</code>. 
(In this case, <code>aset</code> would be used and no such steps would
be necessary since <code>aset</code> takes its arguments in a convenient
order.)

   <p>However, if the <var>place</var> form is a macro which explicitly
evaluates its arguments in an unusual order, this unusual order
will be preserved.  Adapting an example from Steele, given

<pre class="example">     (defmacro wrong-order (x y) (list 'aref y x))
</pre>
   <p class="noindent">the form <code>(setf (wrong-order </code><var>a</var> <var>b</var><code>) 17)</code> will
evaluate <var>b</var> first, then <var>a</var>, just as in an actual call
to <code>wrong-order</code>.

<div class="node">
<p><hr>
<a name="Modify-Macros"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Setf-Extensions">Setf Extensions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalized-Variables">Generalized Variables</a>

</div>

<h4 class="subsection">4.2.2 Modify Macros</h4>

<p class="noindent">This package defines a number of macros that operate on generalized
variables.  Many are interesting and useful even when the <var>place</var>
is just a variable name.

<div class="defun">
&mdash; Macro: <b>cl-psetf</b> [<var>place form</var>]<var><small class="dots">...</small><a name="index-cl_002dpsetf-17"></a></var><br>
<blockquote><p>This macro is to <code>setf</code> what <code>cl-psetq</code> is to <code>setq</code>:
When several <var>place</var>s and <var>form</var>s are involved, the
assignments take place in parallel rather than sequentially. 
Specifically, all subforms are evaluated from left to right, then
all the assignments are done (in an undefined order). 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-incf</b><var> place &amp;optional x<a name="index-cl_002dincf-18"></a></var><br>
<blockquote><p>This macro increments the number stored in <var>place</var> by one, or
by <var>x</var> if specified.  The incremented value is returned.  For
example, <code>(cl-incf i)</code> is equivalent to <code>(setq i (1+ i))</code>, and
<code>(cl-incf (car x) 2)</code> is equivalent to <code>(setcar x (+ (car x) 2))</code>.

        <p>As with <code>setf</code>, care is taken to preserve the &ldquo;apparent&rdquo; order
of evaluation.  For example,

     <pre class="example">          (cl-incf (aref vec (cl-incf i)))
     </pre>
        <p class="noindent">appears to increment <code>i</code> once, then increment the element of
<code>vec</code> addressed by <code>i</code>; this is indeed exactly what it
does, which means the above form is <em>not</em> equivalent to the
&ldquo;obvious&rdquo; expansion,

     <pre class="example">          (setf (aref vec (cl-incf i))
                (1+ (aref vec (cl-incf i))))   ; wrong!
     </pre>
        <p class="noindent">but rather to something more like

     <pre class="example">          (let ((temp (cl-incf i)))
            (setf (aref vec temp) (1+ (aref vec temp))))
     </pre>
        <p class="noindent">Again, all of this is taken care of automatically by <code>cl-incf</code> and
the other generalized-variable macros.

        <p>As a more Emacs-specific example of <code>cl-incf</code>, the expression
<code>(cl-incf (point) </code><var>n</var><code>)</code> is essentially equivalent to
<code>(forward-char </code><var>n</var><code>)</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-decf</b><var> place &amp;optional x<a name="index-cl_002ddecf-19"></a></var><br>
<blockquote><p>This macro decrements the number stored in <var>place</var> by one, or
by <var>x</var> if specified. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-pushnew</b><var> x place </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dpushnew-20"></a></var><br>
<blockquote><p>This macro inserts <var>x</var> at the front of the list stored in
<var>place</var>, but only if <var>x</var> was not <code>eql</code> to any
existing element of the list.  The optional keyword arguments
are interpreted in the same way as for <code>cl-adjoin</code>. 
See <a href="#Lists-as-Sets">Lists as Sets</a>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-shiftf</b><var> place<small class="dots">...</small> newvalue<a name="index-cl_002dshiftf-21"></a></var><br>
<blockquote><p>This macro shifts the <var>place</var>s left by one, shifting in the
value of <var>newvalue</var> (which may be any Lisp expression, not just
a generalized variable), and returning the value shifted out of
the first <var>place</var>.  Thus, <code>(cl-shiftf </code><var>a</var> <var>b</var> <var>c</var>
<var>d</var><code>)</code> is equivalent to

     <pre class="example">          (prog1
              <var>a</var>
            (cl-psetf <var>a</var> <var>b</var>
                      <var>b</var> <var>c</var>
                      <var>c</var> <var>d</var>))
     </pre>
        <p class="noindent">except that the subforms of <var>a</var>, <var>b</var>, and <var>c</var> are actually
evaluated only once each and in the apparent order. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-rotatef</b><var> place<small class="dots">...</small><a name="index-cl_002drotatef-22"></a></var><br>
<blockquote><p>This macro rotates the <var>place</var>s left by one in circular fashion. 
Thus, <code>(cl-rotatef </code><var>a</var> <var>b</var> <var>c</var> <var>d</var><code>)</code> is equivalent to

     <pre class="example">          (cl-psetf <var>a</var> <var>b</var>
                    <var>b</var> <var>c</var>
                    <var>c</var> <var>d</var>
                    <var>d</var> <var>a</var>)
     </pre>
        <p class="noindent">except for the evaluation of subforms.  <code>cl-rotatef</code> always
returns <code>nil</code>.  Note that <code>(cl-rotatef </code><var>a</var> <var>b</var><code>)</code>
conveniently exchanges <var>a</var> and <var>b</var>. 
</p></blockquote></div>

   <p>The following macros were invented for this package; they have no
analogues in Common Lisp.

<div class="defun">
&mdash; Macro: <b>cl-letf</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-cl_002dletf-23"></a></var><br>
<blockquote><p>This macro is analogous to <code>let</code>, but for generalized variables
rather than just symbols.  Each <var>binding</var> should be of the form
<code>(</code><var>place</var> <var>value</var><code>)</code>; the original contents of the
<var>place</var>s are saved, the <var>value</var>s are stored in them, and
then the body <var>form</var>s are executed.  Afterwards, the <var>places</var>
are set back to their original saved contents.  This cleanup happens
even if the <var>form</var>s exit irregularly due to a <code>throw</code> or an
error.

        <p>For example,

     <pre class="example">          (cl-letf (((point) (point-min))
                    (a 17))
               ...)
     </pre>
        <p class="noindent">moves point in the current buffer to the beginning of the buffer,
and also binds <code>a</code> to 17 (as if by a normal <code>let</code>, since
<code>a</code> is just a regular variable).  After the body exits, <code>a</code>
is set back to its original value and point is moved back to its
original position.

        <p>Note that <code>cl-letf</code> on <code>(point)</code> is not quite like a
<code>save-excursion</code>, as the latter effectively saves a marker
which tracks insertions and deletions in the buffer.  Actually,
a <code>cl-letf</code> of <code>(point-marker)</code> is much closer to this
behavior.  (<code>point</code> and <code>point-marker</code> are equivalent
as <code>setf</code> places; each will accept either an integer or a
marker as the stored value.)

        <p>Since generalized variables look like lists, <code>let</code>'s shorthand
of using `<samp><span class="samp">foo</span></samp>' for `<samp><span class="samp">(foo nil)</span></samp>' as a <var>binding</var> would
be ambiguous in <code>cl-letf</code> and is not allowed.

        <p>However, a <var>binding</var> specifier may be a one-element list
`<samp><span class="samp">(</span><var>place</var><span class="samp">)</span></samp>', which is similar to `<samp><span class="samp">(</span><var>place</var>
<var>place</var><span class="samp">)</span></samp>'.  In other words, the <var>place</var> is not disturbed
on entry to the body, and the only effect of the <code>cl-letf</code> is
to restore the original value of <var>place</var> afterwards. 
<!-- I suspect this may no longer be true; either way it's -->
<!-- implementation detail and so not essential to document. -->

        <p>Note that in this case, and in fact almost every case, <var>place</var>
must have a well-defined value outside the <code>cl-letf</code> body. 
There is essentially only one exception to this, which is <var>place</var>
a plain variable with a specified <var>value</var> (such as <code>(a 17)</code>
in the above example). 
<!-- See http://debbugs.gnu.org/12758 -->
<!-- Some or all of this was true for cl.el, but not for cl-lib.el. -->
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-letf*</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-cl_002dletf_002a-24"></a></var><br>
<blockquote><p>This macro is to <code>cl-letf</code> what <code>let*</code> is to <code>let</code>:
It does the bindings in sequential rather than parallel order. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-callf</b><var> function place args<small class="dots">...</small><a name="index-cl_002dcallf-25"></a></var><br>
<blockquote><p>This is the &ldquo;generic&rdquo; modify macro.  It calls <var>function</var>,
which should be an unquoted function name, macro name, or lambda. 
It passes <var>place</var> and <var>args</var> as arguments, and assigns the
result back to <var>place</var>.  For example, <code>(cl-incf </code><var>place</var>
<var>n</var><code>)</code> is the same as <code>(cl-callf + </code><var>place</var> <var>n</var><code>)</code>. 
Some more examples:

     <pre class="example">          (cl-callf abs my-number)
          (cl-callf concat (buffer-name) "&lt;" (number-to-string n) "&gt;")
          (cl-callf cl-union happy-people (list joe bob) :test 'same-person)
     </pre>
        <p>Note again that <code>cl-callf</code> is an extension to standard Common Lisp. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-callf2</b><var> function arg1 place args<small class="dots">...</small><a name="index-cl_002dcallf2-26"></a></var><br>
<blockquote><p>This macro is like <code>cl-callf</code>, except that <var>place</var> is
the <em>second</em> argument of <var>function</var> rather than the
first.  For example, <code>(push </code><var>x</var> <var>place</var><code>)</code> is
equivalent to <code>(cl-callf2 cons </code><var>x</var> <var>place</var><code>)</code>. 
</p></blockquote></div>

   <p>The <code>cl-callf</code> and <code>cl-callf2</code> macros serve as building
blocks for other macros like <code>cl-incf</code>, and <code>cl-pushnew</code>. 
The <code>cl-letf</code> and <code>cl-letf*</code> macros are used in the processing
of symbol macros; see <a href="#Macro-Bindings">Macro Bindings</a>.

<div class="node">
<p><hr>
<a name="Variable-Bindings"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditionals">Conditionals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Generalized-Variables">Generalized Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.3 Variable Bindings</h3>

<p class="noindent">These Lisp forms make bindings to variables and function names,
analogous to Lisp's built-in <code>let</code> form.

   <p>See <a href="#Modify-Macros">Modify Macros</a>, for the <code>cl-letf</code> and <code>cl-letf*</code> forms which
are also related to variable bindings.

<ul class="menu">
<li><a accesskey="1" href="#Dynamic-Bindings">Dynamic Bindings</a>:      The <code>cl-progv</code> form. 
<li><a accesskey="2" href="#Function-Bindings">Function Bindings</a>:     <code>cl-flet</code> and <code>cl-labels</code>. 
<li><a accesskey="3" href="#Macro-Bindings">Macro Bindings</a>:        <code>cl-macrolet</code> and <code>cl-symbol-macrolet</code>. 
</ul>

<div class="node">
<p><hr>
<a name="Dynamic-Bindings"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Function-Bindings">Function Bindings</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Variable-Bindings">Variable Bindings</a>

</div>

<h4 class="subsection">4.3.1 Dynamic Bindings</h4>

<p class="noindent">The standard <code>let</code> form binds variables whose names are known
at compile-time.  The <code>cl-progv</code> form provides an easy way to
bind variables whose names are computed at run-time.

<div class="defun">
&mdash; Macro: <b>cl-progv</b><var> symbols values forms<small class="dots">...</small><a name="index-cl_002dprogv-27"></a></var><br>
<blockquote><p>This form establishes <code>let</code>-style variable bindings on a
set of variables computed at run-time.  The expressions
<var>symbols</var> and <var>values</var> are evaluated, and must return lists
of symbols and values, respectively.  The symbols are bound to the
corresponding values for the duration of the body <var>form</var>s. 
If <var>values</var> is shorter than <var>symbols</var>, the last few symbols
are bound to <code>nil</code>. 
If <var>symbols</var> is shorter than <var>values</var>, the excess values
are ignored. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Function-Bindings"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Macro-Bindings">Macro Bindings</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dynamic-Bindings">Dynamic Bindings</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Variable-Bindings">Variable Bindings</a>

</div>

<h4 class="subsection">4.3.2 Function Bindings</h4>

<p class="noindent">These forms make <code>let</code>-like bindings to functions instead
of variables.

<div class="defun">
&mdash; Macro: <b>cl-flet</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-cl_002dflet-28"></a></var><br>
<blockquote><p>This form establishes <code>let</code>-style bindings on the function
cells of symbols rather than on the value cells.  Each <var>binding</var>
must be a list of the form `<samp><span class="samp">(</span><var>name</var> <var>arglist</var>
<var>forms</var><span class="samp">...)</span></samp>', which defines a function exactly as if
it were a <code>cl-defun</code> form.  The function <var>name</var> is defined
accordingly but only within the body of the <code>cl-flet</code>, hiding any external
definition if applicable.

        <p>The bindings are lexical in scope.  This means that all references to
the named functions must appear physically within the body of the
<code>cl-flet</code> form.

        <p>Functions defined by <code>cl-flet</code> may use the full Common Lisp
argument notation supported by <code>cl-defun</code>; also, the function
body is enclosed in an implicit block as if by <code>cl-defun</code>. 
See <a href="#Program-Structure">Program Structure</a>.

        <p>Note that the <samp><span class="file">cl.el</span></samp> version of this macro behaves slightly
differently.  In particular, its binding is dynamic rather than
lexical.  See <a href="#Obsolete-Macros">Obsolete Macros</a>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-labels</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-cl_002dlabels-29"></a></var><br>
<blockquote><p>The <code>cl-labels</code> form is like <code>cl-flet</code>, except that
the function bindings can be recursive.  The scoping is lexical,
but you can only capture functions in closures if
<code>lexical-binding</code> is <code>t</code>. 
See <a href="elisp.html#Closures">Closures</a>, and
<a href="elisp.html#Using-Lexical-Binding">Using Lexical Binding</a>.

        <p>Lexical scoping means that all references to the named
functions must appear physically within the body of the
<code>cl-labels</code> form.  References may appear both in the body
<var>forms</var> of <code>cl-labels</code> itself, and in the bodies of
the functions themselves.  Thus, <code>cl-labels</code> can define
local recursive functions, or mutually-recursive sets of functions.

        <p>A &ldquo;reference&rdquo; to a function name is either a call to that
function, or a use of its name quoted by <code>quote</code> or
<code>function</code> to be passed on to, say, <code>mapcar</code>.

        <p>Note that the <samp><span class="file">cl.el</span></samp> version of this macro behaves slightly
differently.  See <a href="#Obsolete-Macros">Obsolete Macros</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Macro-Bindings"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Function-Bindings">Function Bindings</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Variable-Bindings">Variable Bindings</a>

</div>

<h4 class="subsection">4.3.3 Macro Bindings</h4>

<p class="noindent">These forms create local macros and &ldquo;symbol macros&rdquo;.

<div class="defun">
&mdash; Macro: <b>cl-macrolet</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-cl_002dmacrolet-30"></a></var><br>
<blockquote><p>This form is analogous to <code>cl-flet</code>, but for macros instead of
functions.  Each <var>binding</var> is a list of the same form as the
arguments to <code>cl-defmacro</code> (i.e., a macro name, argument list,
and macro-expander forms).  The macro is defined accordingly for
use within the body of the <code>cl-macrolet</code>.

        <p>Because of the nature of macros, <code>cl-macrolet</code> is always lexically
scoped.  The <code>cl-macrolet</code> binding will
affect only calls that appear physically within the body
<var>forms</var>, possibly after expansion of other macros in the
body. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-symbol-macrolet</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-cl_002dsymbol_002dmacrolet-31"></a></var><br>
<blockquote><p>This form creates <dfn>symbol macros</dfn>, which are macros that look
like variable references rather than function calls.  Each
<var>binding</var> is a list `<samp><span class="samp">(</span><var>var</var> <var>expansion</var><span class="samp">)</span></samp>';
any reference to <var>var</var> within the body <var>forms</var> is
replaced by <var>expansion</var>.

     <pre class="example">          (setq bar '(5 . 9))
          (cl-symbol-macrolet ((foo (car bar)))
            (cl-incf foo))
          bar
               =&gt; (6 . 9)
     </pre>
        <p>A <code>setq</code> of a symbol macro is treated the same as a <code>setf</code>. 
I.e., <code>(setq foo 4)</code> in the above would be equivalent to
<code>(setf foo 4)</code>, which in turn expands to <code>(setf (car bar) 4)</code>.

        <p>Likewise, a <code>let</code> or <code>let*</code> binding a symbol macro is
treated like a <code>cl-letf</code> or <code>cl-letf*</code>.  This differs from true
Common Lisp, where the rules of lexical scoping cause a <code>let</code>
binding to shadow a <code>symbol-macrolet</code> binding.  In this package,
such shadowing does not occur, even when <code>lexical-binding</code> is
<!-- See http://debbugs.gnu.org/12119 -->
<code>t</code>.  (This behavior predates the addition of lexical binding to
Emacs Lisp, and may change in future to respect <code>lexical-binding</code>.) 
At present in this package, only <code>lexical-let</code> and
<code>lexical-let*</code> will shadow a symbol macro.  See <a href="#Obsolete-Lexical-Binding">Obsolete Lexical Binding</a>.

        <p>There is no analogue of <code>defmacro</code> for symbol macros; all symbol
macros are local.  A typical use of <code>cl-symbol-macrolet</code> is in the
expansion of another macro:

     <pre class="example">          (cl-defmacro my-dolist ((x list) &amp;rest body)
            (let ((var (cl-gensym)))
              (list 'cl-loop 'for var 'on list 'do
                    (cl-list* 'cl-symbol-macrolet
                              (list (list x (list 'car var)))
                              body))))
          
          (setq mylist '(1 2 3 4))
          (my-dolist (x mylist) (cl-incf x))
          mylist
               =&gt; (2 3 4 5)
     </pre>
        <p class="noindent">In this example, the <code>my-dolist</code> macro is similar to <code>dolist</code>
(see <a href="#Iteration">Iteration</a>) except that the variable <code>x</code> becomes a true
reference onto the elements of the list.  The <code>my-dolist</code> call
shown here expands to

     <pre class="example">          (cl-loop for G1234 on mylist do
                (cl-symbol-macrolet ((x (car G1234)))
                  (cl-incf x)))
     </pre>
        <p class="noindent">which in turn expands to

     <pre class="example">          (cl-loop for G1234 on mylist do (cl-incf (car G1234)))
     </pre>
        <p>See <a href="#Loop-Facility">Loop Facility</a>, for a description of the <code>cl-loop</code> macro. 
This package defines a nonstandard <code>in-ref</code> loop clause that
works much like <code>my-dolist</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Conditionals"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Blocks-and-Exits">Blocks and Exits</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variable-Bindings">Variable Bindings</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.4 Conditionals</h3>

<p class="noindent">These conditional forms augment Emacs Lisp's simple <code>if</code>,
<code>and</code>, <code>or</code>, and <code>cond</code> forms.

<div class="defun">
&mdash; Macro: <b>cl-case</b><var> keyform clause<small class="dots">...</small><a name="index-cl_002dcase-32"></a></var><br>
<blockquote><p>This macro evaluates <var>keyform</var>, then compares it with the key
values listed in the various <var>clause</var>s.  Whichever clause matches
the key is executed; comparison is done by <code>eql</code>.  If no clause
matches, the <code>cl-case</code> form returns <code>nil</code>.  The clauses are
of the form

     <pre class="example">          (<var>keylist</var> <var>body-forms</var>...)
     </pre>
        <p class="noindent">where <var>keylist</var> is a list of key values.  If there is exactly
one value, and it is not a cons cell or the symbol <code>nil</code> or
<code>t</code>, then it can be used by itself as a <var>keylist</var> without
being enclosed in a list.  All key values in the <code>cl-case</code> form
must be distinct.  The final clauses may use <code>t</code> in place of
a <var>keylist</var> to indicate a default clause that should be taken
if none of the other clauses match.  (The symbol <code>otherwise</code>
is also recognized in place of <code>t</code>.  To make a clause that
matches the actual symbol <code>t</code>, <code>nil</code>, or <code>otherwise</code>,
enclose the symbol in a list.)

        <p>For example, this expression reads a keystroke, then does one of
four things depending on whether it is an `<samp><span class="samp">a</span></samp>', a `<samp><span class="samp">b</span></samp>',
a &lt;RET&gt; or <kbd>C-j</kbd>, or anything else.

     <pre class="example">          (cl-case (read-char)
            (?a (do-a-thing))
            (?b (do-b-thing))
            ((?\r ?\n) (do-ret-thing))
            (t (do-other-thing)))
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-ecase</b><var> keyform clause<small class="dots">...</small><a name="index-cl_002decase-33"></a></var><br>
<blockquote><p>This macro is just like <code>cl-case</code>, except that if the key does
not match any of the clauses, an error is signaled rather than
simply returning <code>nil</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-typecase</b><var> keyform clause<small class="dots">...</small><a name="index-cl_002dtypecase-34"></a></var><br>
<blockquote><p>This macro is a version of <code>cl-case</code> that checks for types
rather than values.  Each <var>clause</var> is of the form
`<samp><span class="samp">(</span><var>type</var> <var>body</var><span class="samp">...)</span></samp>'.  See <a href="#Type-Predicates">Type Predicates</a>,
for a description of type specifiers.  For example,

     <pre class="example">          (cl-typecase x
            (integer (munch-integer x))
            (float (munch-float x))
            (string (munch-integer (string-to-int x)))
            (t (munch-anything x)))
     </pre>
        <p>The type specifier <code>t</code> matches any type of object; the word
<code>otherwise</code> is also allowed.  To make one clause match any of
several types, use an <code>(or ...)</code> type specifier. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-etypecase</b><var> keyform clause<small class="dots">...</small><a name="index-cl_002detypecase-35"></a></var><br>
<blockquote><p>This macro is just like <code>cl-typecase</code>, except that if the key does
not match any of the clauses, an error is signaled rather than
simply returning <code>nil</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Blocks-and-Exits"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Iteration">Iteration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditionals">Conditionals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.5 Blocks and Exits</h3>

<p><a name="index-block-36"></a>
Common Lisp <dfn>blocks</dfn> provide a non-local exit mechanism very
similar to <code>catch</code> and <code>throw</code>, with lexical scoping. 
This package actually implements <code>cl-block</code>
in terms of <code>catch</code>; however, the lexical scoping allows the
byte-compiler to omit the costly <code>catch</code> step if the
body of the block does not actually <code>cl-return-from</code> the block.

<div class="defun">
&mdash; Macro: <b>cl-block</b><var> name forms<small class="dots">...</small><a name="index-cl_002dblock-37"></a></var><br>
<blockquote><p>The <var>forms</var> are evaluated as if by a <code>progn</code>.  However,
if any of the <var>forms</var> execute <code>(cl-return-from </code><var>name</var><code>)</code>,
they will jump out and return directly from the <code>cl-block</code> form. 
The <code>cl-block</code> returns the result of the last <var>form</var> unless
a <code>cl-return-from</code> occurs.

        <p>The <code>cl-block</code>/<code>cl-return-from</code> mechanism is quite similar to
the <code>catch</code>/<code>throw</code> mechanism.  The main differences are
that block <var>name</var>s are unevaluated symbols, rather than forms
(such as quoted symbols) that evaluate to a tag at run-time; and
also that blocks are always lexically scoped. 
In a dynamically scoped <code>catch</code>, functions called from the
<code>catch</code> body can also <code>throw</code> to the <code>catch</code>.  This
is not an option for <code>cl-block</code>, where
the <code>cl-return-from</code> referring to a block name must appear
physically within the <var>forms</var> that make up the body of the block. 
They may not appear within other called functions, although they may
appear within macro expansions or <code>lambda</code>s in the body.  Block
names and <code>catch</code> names form independent name-spaces.

        <p>In true Common Lisp, <code>defun</code> and <code>defmacro</code> surround
the function or expander bodies with implicit blocks with the
same name as the function or macro.  This does not occur in Emacs
Lisp, but this package provides <code>cl-defun</code> and <code>cl-defmacro</code>
forms, which do create the implicit block.

        <p>The Common Lisp looping constructs defined by this package,
such as <code>cl-loop</code> and <code>cl-dolist</code>, also create implicit blocks
just as in Common Lisp.

        <p>Because they are implemented in terms of Emacs Lisp's <code>catch</code>
and <code>throw</code>, blocks have the same overhead as actual
<code>catch</code> constructs (roughly two function calls).  However,
the byte compiler will optimize away the <code>catch</code>
if the block does
not in fact contain any <code>cl-return</code> or <code>cl-return-from</code> calls
that jump to it.  This means that <code>cl-do</code> loops and <code>cl-defun</code>
functions that don't use <code>cl-return</code> don't pay the overhead to
support it. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-return-from</b><var> name </var>[<var>result</var>]<var><a name="index-cl_002dreturn_002dfrom-38"></a></var><br>
<blockquote><p>This macro returns from the block named <var>name</var>, which must be
an (unevaluated) symbol.  If a <var>result</var> form is specified, it
is evaluated to produce the result returned from the <code>block</code>. 
Otherwise, <code>nil</code> is returned. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-return</b> [<var>result</var>]<var><a name="index-cl_002dreturn-39"></a></var><br>
<blockquote><p>This macro is exactly like <code>(cl-return-from nil </code><var>result</var><code>)</code>. 
Common Lisp loops like <code>cl-do</code> and <code>cl-dolist</code> implicitly enclose
themselves in <code>nil</code> blocks. 
</p></blockquote></div>

<!-- FIXME?  Maybe this should be in a separate section? -->
<div class="defun">
&mdash; Macro: <b>cl-tagbody</b><var> &amp;rest labels-or-statements<a name="index-cl_002dtagbody-40"></a></var><br>
<blockquote><p>This macro executes statements while allowing for control transfer to
user-defined labels.  Each element of <var>labels-or-statements</var> can
be either a label (an integer or a symbol), or a cons-cell
(a statement).  This distinction is made before macroexpansion. 
Statements are executed in sequence, discarding any return value. 
Any statement can transfer control at any time to the statements that follow
one of the labels with the special form <code>(go </code><var>label</var><code>)</code>. 
Labels have lexical scope and dynamic extent. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Iteration"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Loop-Facility">Loop Facility</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Blocks-and-Exits">Blocks and Exits</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.6 Iteration</h3>

<p class="noindent">The macros described here provide more sophisticated, high-level
looping constructs to complement Emacs Lisp's basic loop forms
(see <a href="elisp.html#Iteration">Iteration</a>).

<div class="defun">
&mdash; Macro: <b>cl-loop</b><var> forms<small class="dots">...</small><a name="index-cl_002dloop-41"></a></var><br>
<blockquote><p>This package supports both the simple, old-style meaning of
<code>loop</code> and the extremely powerful and flexible feature known as
the <dfn>Loop Facility</dfn> or <dfn>Loop Macro</dfn>.  This more advanced
facility is discussed in the following section; see <a href="#Loop-Facility">Loop Facility</a>. 
The simple form of <code>loop</code> is described here.

        <p>If <code>cl-loop</code> is followed by zero or more Lisp expressions,
then <code>(cl-loop </code><var>exprs</var><code>...)</code> simply creates an infinite
loop executing the expressions over and over.  The loop is
enclosed in an implicit <code>nil</code> block.  Thus,

     <pre class="example">          (cl-loop (foo)  (if (no-more) (return 72))  (bar))
     </pre>
        <p class="noindent">is exactly equivalent to

     <pre class="example">          (cl-block nil (while t (foo)  (if (no-more) (return 72))  (bar)))
     </pre>
        <p>If any of the expressions are plain symbols, the loop is instead
interpreted as a Loop Macro specification as described later. 
(This is not a restriction in practice, since a plain symbol
in the above notation would simply access and throw away the
value of a variable.) 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-do</b> (<var>spec<small class="dots">...</small></var>) (<var>end-test </var>[<var>result<small class="dots">...</small></var>])<var> forms<small class="dots">...</small><a name="index-cl_002ddo-42"></a></var><br>
<blockquote><p>This macro creates a general iterative loop.  Each <var>spec</var> is
of the form

     <pre class="example">          (<var>var</var> [<var>init</var> [<var>step</var>]])
     </pre>
        <p>The loop works as follows:  First, each <var>var</var> is bound to the
associated <var>init</var> value as if by a <code>let</code> form.  Then, in
each iteration of the loop, the <var>end-test</var> is evaluated; if
true, the loop is finished.  Otherwise, the body <var>forms</var> are
evaluated, then each <var>var</var> is set to the associated <var>step</var>
expression (as if by a <code>cl-psetq</code> form) and the next iteration
begins.  Once the <var>end-test</var> becomes true, the <var>result</var>
forms are evaluated (with the <var>var</var>s still bound to their
values) to produce the result returned by <code>cl-do</code>.

        <p>The entire <code>cl-do</code> loop is enclosed in an implicit <code>nil</code>
block, so that you can use <code>(cl-return)</code> to break out of the
loop at any time.

        <p>If there are no <var>result</var> forms, the loop returns <code>nil</code>. 
If a given <var>var</var> has no <var>step</var> form, it is bound to its
<var>init</var> value but not otherwise modified during the <code>cl-do</code>
loop (unless the code explicitly modifies it); this case is just
a shorthand for putting a <code>(let ((</code><var>var</var> <var>init</var><code>)) ...)</code>
around the loop.  If <var>init</var> is also omitted it defaults to
<code>nil</code>, and in this case a plain `<samp><var>var</var></samp>' can be used
in place of `<samp><span class="samp">(</span><var>var</var><span class="samp">)</span></samp>', again following the analogy with
<code>let</code>.

        <p>This example (from Steele) illustrates a loop that applies the
function <code>f</code> to successive pairs of values from the lists
<code>foo</code> and <code>bar</code>; it is equivalent to the call
<code>(cl-mapcar 'f foo bar)</code>.  Note that this loop has no body
<var>forms</var> at all, performing all its work as side effects of
the rest of the loop.

     <pre class="example">          (cl-do ((x foo (cdr x))
                  (y bar (cdr y))
                  (z nil (cons (f (car x) (car y)) z)))
               ((or (null x) (null y))
                (nreverse z)))
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-do*</b> (<var>spec<small class="dots">...</small></var>) (<var>end-test </var>[<var>result<small class="dots">...</small></var>])<var> forms<small class="dots">...</small><a name="index-cl_002ddo_002a-43"></a></var><br>
<blockquote><p>This is to <code>cl-do</code> what <code>let*</code> is to <code>let</code>.  In
particular, the initial values are bound as if by <code>let*</code>
rather than <code>let</code>, and the steps are assigned as if by
<code>setq</code> rather than <code>cl-psetq</code>.

        <p>Here is another way to write the above loop:

     <pre class="example">          (cl-do* ((xp foo (cdr xp))
                   (yp bar (cdr yp))
                   (x (car xp) (car xp))
                   (y (car yp) (car yp))
                   z)
            ((or (null xp) (null yp))
             (nreverse z))
            (push (f x y) z))
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-dolist</b> (<var>var list </var>[<var>result</var>])<var> forms<small class="dots">...</small><a name="index-cl_002ddolist-44"></a></var><br>
<blockquote><p>This is exactly like the standard Emacs Lisp macro <code>dolist</code>,
but surrounds the loop with an implicit <code>nil</code> block. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-dotimes</b> (<var>var count </var>[<var>result</var>])<var> forms<small class="dots">...</small><a name="index-cl_002ddotimes-45"></a></var><br>
<blockquote><p>This is exactly like the standard Emacs Lisp macro <code>dotimes</code>,
but surrounds the loop with an implicit <code>nil</code> block. 
The body is executed with <var>var</var> bound to the integers
from zero (inclusive) to <var>count</var> (exclusive), in turn.  Then
<!-- FIXME lispref does not state this part explicitly, could move this there. -->
the <code>result</code> form is evaluated with <var>var</var> bound to the total
number of iterations that were done (i.e., <code>(max 0 </code><var>count</var><code>)</code>)
to get the return value for the loop form. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-do-symbols</b> (<var>var </var>[<var>obarray </var>[<var>result</var>]])<var> forms<small class="dots">...</small><a name="index-cl_002ddo_002dsymbols-46"></a></var><br>
<blockquote><p>This loop iterates over all interned symbols.  If <var>obarray</var>
is specified and is not <code>nil</code>, it loops over all symbols in
that obarray.  For each symbol, the body <var>forms</var> are evaluated
with <var>var</var> bound to that symbol.  The symbols are visited in
an unspecified order.  Afterward the <var>result</var> form, if any,
is evaluated (with <var>var</var> bound to <code>nil</code>) to get the return
value.  The loop is surrounded by an implicit <code>nil</code> block. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-do-all-symbols</b> (<var>var </var>[<var>result</var>])<var> forms<small class="dots">...</small><a name="index-cl_002ddo_002dall_002dsymbols-47"></a></var><br>
<blockquote><p>This is identical to <code>cl-do-symbols</code> except that the <var>obarray</var>
argument is omitted; it always iterates over the default obarray. 
</p></blockquote></div>

   <p>See <a href="#Mapping-over-Sequences">Mapping over Sequences</a>, for some more functions for
iterating over vectors or lists.

<div class="node">
<p><hr>
<a name="Loop-Facility"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Values">Multiple Values</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Iteration">Iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.7 Loop Facility</h3>

<p class="noindent">A common complaint with Lisp's traditional looping constructs was
that they were either too simple and limited, such as <code>dotimes</code>
or <code>while</code>, or too unreadable and obscure, like Common Lisp's
<code>do</code> loop.

   <p>To remedy this, Common Lisp added a construct called the &ldquo;Loop
Facility&rdquo; or &ldquo;<code>loop</code> macro&rdquo;, with an easy-to-use but very
powerful and expressive syntax.

<ul class="menu">
<li><a accesskey="1" href="#Loop-Basics">Loop Basics</a>:            The <code>cl-loop</code> macro, basic clause structure. 
<li><a accesskey="2" href="#Loop-Examples">Loop Examples</a>:          Working examples of the <code>cl-loop</code> macro. 
<li><a accesskey="3" href="#For-Clauses">For Clauses</a>:            Clauses introduced by <code>for</code> or <code>as</code>. 
<li><a accesskey="4" href="#Iteration-Clauses">Iteration Clauses</a>:      <code>repeat</code>, <code>while</code>, <code>thereis</code>, etc. 
<li><a accesskey="5" href="#Accumulation-Clauses">Accumulation Clauses</a>:   <code>collect</code>, <code>sum</code>, <code>maximize</code>, etc. 
<li><a accesskey="6" href="#Other-Clauses">Other Clauses</a>:          <code>with</code>, <code>if</code>, <code>initially</code>, <code>finally</code>. 
</ul>

<div class="node">
<p><hr>
<a name="Loop-Basics"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Loop-Examples">Loop Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Loop-Facility">Loop Facility</a>

</div>

<h4 class="subsection">4.7.1 Loop Basics</h4>

<p class="noindent">The <code>cl-loop</code> macro essentially creates a mini-language within
Lisp that is specially tailored for describing loops.  While this
language is a little strange-looking by the standards of regular Lisp,
it turns out to be very easy to learn and well-suited to its purpose.

   <p>Since <code>cl-loop</code> is a macro, all parsing of the loop language
takes place at byte-compile time; compiled <code>cl-loop</code>s are just
as efficient as the equivalent <code>while</code> loops written longhand.

<div class="defun">
&mdash; Macro: <b>cl-loop</b><var> clauses<small class="dots">...</small><a name="index-cl_002dloop-48"></a></var><br>
<blockquote><p>A loop construct consists of a series of <var>clause</var>s, each
introduced by a symbol like <code>for</code> or <code>do</code>.  Clauses
are simply strung together in the argument list of <code>cl-loop</code>,
with minimal extra parentheses.  The various types of clauses
specify initializations, such as the binding of temporary
variables, actions to be taken in the loop, stepping actions,
and final cleanup.

        <p>Common Lisp specifies a certain general order of clauses in a
loop:

     <pre class="example">          (loop <var>name-clause</var>
                <var>var-clauses</var>...
                <var>action-clauses</var>...)
     </pre>
        <p>The <var>name-clause</var> optionally gives a name to the implicit
block that surrounds the loop.  By default, the implicit block
is named <code>nil</code>.  The <var>var-clauses</var> specify what
variables should be bound during the loop, and how they should
be modified or iterated throughout the course of the loop.  The
<var>action-clauses</var> are things to be done during the loop, such
as computing, collecting, and returning values.

        <p>The Emacs version of the <code>cl-loop</code> macro is less restrictive about
the order of clauses, but things will behave most predictably if
you put the variable-binding clauses <code>with</code>, <code>for</code>, and
<code>repeat</code> before the action clauses.  As in Common Lisp,
<code>initially</code> and <code>finally</code> clauses can go anywhere.

        <p>Loops generally return <code>nil</code> by default, but you can cause
them to return a value by using an accumulation clause like
<code>collect</code>, an end-test clause like <code>always</code>, or an
explicit <code>return</code> clause to jump out of the implicit block. 
(Because the loop body is enclosed in an implicit block, you can
also use regular Lisp <code>cl-return</code> or <code>cl-return-from</code> to
break out of the loop.) 
</p></blockquote></div>

   <p>The following sections give some examples of the loop macro in
action, and describe the particular loop clauses in great detail. 
Consult the second edition of Steele for additional discussion
and examples.

<div class="node">
<p><hr>
<a name="Loop-Examples"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#For-Clauses">For Clauses</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Loop-Basics">Loop Basics</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Loop-Facility">Loop Facility</a>

</div>

<h4 class="subsection">4.7.2 Loop Examples</h4>

<p class="noindent">Before listing the full set of clauses that are allowed, let's
look at a few example loops just to get a feel for the <code>cl-loop</code>
language.

<pre class="example">     (cl-loop for buf in (buffer-list)
              collect (buffer-file-name buf))
</pre>
   <p class="noindent">This loop iterates over all Emacs buffers, using the list
returned by <code>buffer-list</code>.  For each buffer <var>buf</var>,
it calls <code>buffer-file-name</code> and collects the results into
a list, which is then returned from the <code>cl-loop</code> construct. 
The result is a list of the file names of all the buffers in
Emacs's memory.  The words <code>for</code>, <code>in</code>, and <code>collect</code>
are reserved words in the <code>cl-loop</code> language.

<pre class="example">     (cl-loop repeat 20 do (insert "Yowsa\n"))
</pre>
   <p class="noindent">This loop inserts the phrase &ldquo;Yowsa&rdquo; twenty times in the
current buffer.

<pre class="example">     (cl-loop until (eobp) do (munch-line) (forward-line 1))
</pre>
   <p class="noindent">This loop calls <code>munch-line</code> on every line until the end
of the buffer.  If point is already at the end of the buffer,
the loop exits immediately.

<pre class="example">     (cl-loop do (munch-line) until (eobp) do (forward-line 1))
</pre>
   <p class="noindent">This loop is similar to the above one, except that <code>munch-line</code>
is always called at least once.

<pre class="example">     (cl-loop for x from 1 to 100
              for y = (* x x)
              until (&gt;= y 729)
              finally return (list x (= y 729)))
</pre>
   <p class="noindent">This more complicated loop searches for a number <code>x</code> whose
square is 729.  For safety's sake it only examines <code>x</code>
values up to 100; dropping the phrase `<samp><span class="samp">to 100</span></samp>' would
cause the loop to count upwards with no limit.  The second
<code>for</code> clause defines <code>y</code> to be the square of <code>x</code>
within the loop; the expression after the <code>=</code> sign is
reevaluated each time through the loop.  The <code>until</code>
clause gives a condition for terminating the loop, and the
<code>finally</code> clause says what to do when the loop finishes. 
(This particular example was written less concisely than it
could have been, just for the sake of illustration.)

   <p>Note that even though this loop contains three clauses (two
<code>for</code>s and an <code>until</code>) that would have been enough to
define loops all by themselves, it still creates a single loop
rather than some sort of triple-nested loop.  You must explicitly
nest your <code>cl-loop</code> constructs if you want nested loops.

<div class="node">
<p><hr>
<a name="For-Clauses"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Iteration-Clauses">Iteration Clauses</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Loop-Examples">Loop Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Loop-Facility">Loop Facility</a>

</div>

<h4 class="subsection">4.7.3 For Clauses</h4>

<p class="noindent">Most loops are governed by one or more <code>for</code> clauses. 
A <code>for</code> clause simultaneously describes variables to be
bound, how those variables are to be stepped during the loop,
and usually an end condition based on those variables.

   <p>The word <code>as</code> is a synonym for the word <code>for</code>.  This
word is followed by a variable name, then a word like <code>from</code>
or <code>across</code> that describes the kind of iteration desired. 
In Common Lisp, the phrase <code>being the</code> sometimes precedes
the type of iteration; in this package both <code>being</code> and
<code>the</code> are optional.  The word <code>each</code> is a synonym
for <code>the</code>, and the word that follows it may be singular
or plural:  `<samp><span class="samp">for x being the elements of y</span></samp>' or
`<samp><span class="samp">for x being each element of y</span></samp>'.  Which form you use
is purely a matter of style.

   <p>The variable is bound around the loop as if by <code>let</code>:

<pre class="example">     (setq i 'happy)
     (cl-loop for i from 1 to 10 do (do-something-with i))
     i
          =&gt; happy
</pre>
     <dl>
<dt><code>for </code><var>var</var><code> from </code><var>expr1</var><code> to </code><var>expr2</var><code> by </code><var>expr3</var><dd>This type of <code>for</code> clause creates a counting loop.  Each of
the three sub-terms is optional, though there must be at least one
term so that the clause is marked as a counting clause.

     <p>The three expressions are the starting value, the ending value, and
the step value, respectively, of the variable.  The loop counts
upwards by default (<var>expr3</var> must be positive), from <var>expr1</var>
to <var>expr2</var> inclusively.  If you omit the <code>from</code> term, the
loop counts from zero; if you omit the <code>to</code> term, the loop
counts forever without stopping (unless stopped by some other
loop clause, of course); if you omit the <code>by</code> term, the loop
counts in steps of one.

     <p>You can replace the word <code>from</code> with <code>upfrom</code> or
<code>downfrom</code> to indicate the direction of the loop.  Likewise,
you can replace <code>to</code> with <code>upto</code> or <code>downto</code>. 
For example, `<samp><span class="samp">for x from 5 downto 1</span></samp>' executes five times
with <code>x</code> taking on the integers from 5 down to 1 in turn. 
Also, you can replace <code>to</code> with <code>below</code> or <code>above</code>,
which are like <code>upto</code> and <code>downto</code> respectively except
that they are exclusive rather than inclusive limits:

     <pre class="example">          (cl-loop for x to 10 collect x)
                  =&gt; (0 1 2 3 4 5 6 7 8 9 10)
          (cl-loop for x below 10 collect x)
                  =&gt; (0 1 2 3 4 5 6 7 8 9)
     </pre>
     <p>The <code>by</code> value is always positive, even for downward-counting
loops.  Some sort of <code>from</code> value is required for downward
loops; `<samp><span class="samp">for x downto 5</span></samp>' is not a valid loop clause all by
itself.

     <br><dt><code>for </code><var>var</var><code> in </code><var>list</var><code> by </code><var>function</var><dd>This clause iterates <var>var</var> over all the elements of <var>list</var>,
in turn.  If you specify the <code>by</code> term, then <var>function</var>
is used to traverse the list instead of <code>cdr</code>; it must be a
function taking one argument.  For example:

     <pre class="example">          (cl-loop for x in '(1 2 3 4 5 6) collect (* x x))
                  =&gt; (1 4 9 16 25 36)
          (cl-loop for x in '(1 2 3 4 5 6) by 'cddr collect (* x x))
                  =&gt; (1 9 25)
     </pre>
     <br><dt><code>for </code><var>var</var><code> on </code><var>list</var><code> by </code><var>function</var><dd>This clause iterates <var>var</var> over all the cons cells of <var>list</var>.

     <pre class="example">          (cl-loop for x on '(1 2 3 4) collect x)
                  =&gt; ((1 2 3 4) (2 3 4) (3 4) (4))
     </pre>
     <p>With <code>by</code>, there is no real reason that the <code>on</code> expression
must be a list.  For example:

     <pre class="example">          (cl-loop for x on first-animal by 'next-animal collect x)
     </pre>
     <p class="noindent">where <code>(next-animal x)</code> takes an &ldquo;animal&rdquo; <var>x</var> and returns
the next in the (assumed) sequence of animals, or <code>nil</code> if
<var>x</var> was the last animal in the sequence.

     <br><dt><code>for </code><var>var</var><code> in-ref </code><var>list</var><code> by </code><var>function</var><dd>This is like a regular <code>in</code> clause, but <var>var</var> becomes
a <code>setf</code>-able &ldquo;reference&rdquo; onto the elements of the list
rather than just a temporary variable.  For example,

     <pre class="example">          (cl-loop for x in-ref my-list do (cl-incf x))
     </pre>
     <p class="noindent">increments every element of <code>my-list</code> in place.  This clause
is an extension to standard Common Lisp.

     <br><dt><code>for </code><var>var</var><code> across </code><var>array</var><dd>This clause iterates <var>var</var> over all the elements of <var>array</var>,
which may be a vector or a string.

     <pre class="example">          (cl-loop for x across "aeiou"
                   do (use-vowel (char-to-string x)))
     </pre>
     <br><dt><code>for </code><var>var</var><code> across-ref </code><var>array</var><dd>This clause iterates over an array, with <var>var</var> a <code>setf</code>-able
reference onto the elements; see <code>in-ref</code> above.

     <br><dt><code>for </code><var>var</var><code> being the elements of </code><var>sequence</var><dd>This clause iterates over the elements of <var>sequence</var>, which may
be a list, vector, or string.  Since the type must be determined
at run-time, this is somewhat less efficient than <code>in</code> or
<code>across</code>.  The clause may be followed by the additional term
`<samp><span class="samp">using (index </span><var>var2</var><span class="samp">)</span></samp>' to cause <var>var2</var> to be bound to
the successive indices (starting at 0) of the elements.

     <p>This clause type is taken from older versions of the <code>loop</code> macro,
and is not present in modern Common Lisp.  The `<samp><span class="samp">using (sequence ...)</span></samp>'
term of the older macros is not supported.

     <br><dt><code>for </code><var>var</var><code> being the elements of-ref </code><var>sequence</var><dd>This clause iterates over a sequence, with <var>var</var> a <code>setf</code>-able
reference onto the elements; see <code>in-ref</code> above.

     <br><dt><code>for </code><var>var</var><code> being the symbols [of </code><var>obarray</var><code>]</code><dd>This clause iterates over symbols, either over all interned symbols
or over all symbols in <var>obarray</var>.  The loop is executed with
<var>var</var> bound to each symbol in turn.  The symbols are visited in
an unspecified order.

     <p>As an example,

     <pre class="example">          (cl-loop for sym being the symbols
                   when (fboundp sym)
                   when (string-match "^map" (symbol-name sym))
                   collect sym)
     </pre>
     <p class="noindent">returns a list of all the functions whose names begin with `<samp><span class="samp">map</span></samp>'.

     <p>The Common Lisp words <code>external-symbols</code> and <code>present-symbols</code>
are also recognized but are equivalent to <code>symbols</code> in Emacs Lisp.

     <p>Due to a minor implementation restriction, it will not work to have
more than one <code>for</code> clause iterating over symbols, hash tables,
keymaps, overlays, or intervals in a given <code>cl-loop</code>.  Fortunately,
it would rarely if ever be useful to do so.  It <em>is</em> valid to mix
one of these types of clauses with other clauses like <code>for ... to</code>
or <code>while</code>.

     <br><dt><code>for </code><var>var</var><code> being the hash-keys of </code><var>hash-table</var><dt><code>for </code><var>var</var><code> being the hash-values of </code><var>hash-table</var><dd>This clause iterates over the entries in <var>hash-table</var> with
<var>var</var> bound to each key, or value.  A `<samp><span class="samp">using</span></samp>' clause can bind
a second variable to the opposite part.

     <pre class="example">          (cl-loop for k being the hash-keys of h
                         using (hash-values v)
                   do
                   (message "key %S -&gt; value %S" k v))
     </pre>
     <br><dt><code>for </code><var>var</var><code> being the key-codes of </code><var>keymap</var><dt><code>for </code><var>var</var><code> being the key-bindings of </code><var>keymap</var><dd>This clause iterates over the entries in <var>keymap</var>. 
The iteration does not enter nested keymaps but does enter inherited
(parent) keymaps. 
A <code>using</code> clause can access both the codes and the bindings
together.

     <pre class="example">          (cl-loop for c being the key-codes of (current-local-map)
                         using (key-bindings b)
                   do
                   (message "key %S -&gt; binding %S" c b))
     </pre>
     <br><dt><code>for </code><var>var</var><code> being the key-seqs of </code><var>keymap</var><dd>This clause iterates over all key sequences defined by <var>keymap</var>
and its nested keymaps, where <var>var</var> takes on values which are
vectors.  The strings or vectors
are reused for each iteration, so you must copy them if you wish to keep
them permanently.  You can add a `<samp><span class="samp">using (key-bindings ...)</span></samp>'
clause to get the command bindings as well.

     <br><dt><code>for </code><var>var</var><code> being the overlays [of </code><var>buffer</var><code>] ...</code><dd>This clause iterates over the &ldquo;overlays&rdquo; of a buffer
(the clause <code>extents</code> is synonymous
with <code>overlays</code>).  If the <code>of</code> term is omitted, the current
buffer is used. 
This clause also accepts optional `<samp><span class="samp">from </span><var>pos</var></samp>' and
`<samp><span class="samp">to </span><var>pos</var></samp>' terms, limiting the clause to overlays which
overlap the specified region.

     <br><dt><code>for </code><var>var</var><code> being the intervals [of </code><var>buffer</var><code>] ...</code><dd>This clause iterates over all intervals of a buffer with constant
text properties.  The variable <var>var</var> will be bound to conses
of start and end positions, where one start position is always equal
to the previous end position.  The clause allows <code>of</code>,
<code>from</code>, <code>to</code>, and <code>property</code> terms, where the latter
term restricts the search to just the specified property.  The
<code>of</code> term may specify either a buffer or a string.

     <br><dt><code>for </code><var>var</var><code> being the frames</code><dd>This clause iterates over all Emacs frames. The clause <code>screens</code> is
a synonym for <code>frames</code>.  The frames are visited in
<code>next-frame</code> order starting from <code>selected-frame</code>.

     <br><dt><code>for </code><var>var</var><code> being the windows [of </code><var>frame</var><code>]</code><dd>This clause iterates over the windows (in the Emacs sense) of
the current frame, or of the specified <var>frame</var>.  It visits windows
in <code>next-window</code> order starting from <code>selected-window</code>
(or <code>frame-selected-window</code> if you specify <var>frame</var>). 
This clause treats the minibuffer window in the same way as
<code>next-window</code> does.  For greater flexibility, consider using
<code>walk-windows</code> instead.

     <br><dt><code>for </code><var>var</var><code> being the buffers</code><dd>This clause iterates over all buffers in Emacs.  It is equivalent
to `<samp><span class="samp">for </span><var>var</var><span class="samp"> in (buffer-list)</span></samp>'.

     <br><dt><code>for </code><var>var</var><code> = </code><var>expr1</var><code> then </code><var>expr2</var><dd>This clause does a general iteration.  The first time through
the loop, <var>var</var> will be bound to <var>expr1</var>.  On the second
and successive iterations it will be set by evaluating <var>expr2</var>
(which may refer to the old value of <var>var</var>).  For example,
these two loops are effectively the same:

     <pre class="example">          (cl-loop for x on my-list by 'cddr do ...)
          (cl-loop for x = my-list then (cddr x) while x do ...)
     </pre>
     <p>Note that this type of <code>for</code> clause does not imply any sort
of terminating condition; the above example combines it with a
<code>while</code> clause to tell when to end the loop.

     <p>If you omit the <code>then</code> term, <var>expr1</var> is used both for
the initial setting and for successive settings:

     <pre class="example">          (cl-loop for x = (random) when (&gt; x 0) return x)
     </pre>
     <p class="noindent">This loop keeps taking random numbers from the <code>(random)</code>
function until it gets a positive one, which it then returns. 
</dl>

   <p>If you include several <code>for</code> clauses in a row, they are
treated sequentially (as if by <code>let*</code> and <code>setq</code>). 
You can instead use the word <code>and</code> to link the clauses,
in which case they are processed in parallel (as if by <code>let</code>
and <code>cl-psetq</code>).

<pre class="example">     (cl-loop for x below 5 for y = nil then x collect (list x y))
             =&gt; ((0 nil) (1 1) (2 2) (3 3) (4 4))
     (cl-loop for x below 5 and y = nil then x collect (list x y))
             =&gt; ((0 nil) (1 0) (2 1) (3 2) (4 3))
</pre>
   <p class="noindent">In the first loop, <code>y</code> is set based on the value of <code>x</code>
that was just set by the previous clause; in the second loop,
<code>x</code> and <code>y</code> are set simultaneously so <code>y</code> is set
based on the value of <code>x</code> left over from the previous time
through the loop.

   <p><a name="index-destructuring_002c-in-cl_002dloop-49"></a>Another feature of the <code>cl-loop</code> macro is <em>destructuring</em>,
similar in concept to the destructuring provided by <code>defmacro</code>
(see <a href="#Argument-Lists">Argument Lists</a>). 
The <var>var</var> part of any <code>for</code> clause can be given as a list
of variables instead of a single variable.  The values produced
during loop execution must be lists; the values in the lists are
stored in the corresponding variables.

<pre class="example">     (cl-loop for (x y) in '((2 3) (4 5) (6 7)) collect (+ x y))
             =&gt; (5 9 13)
</pre>
   <p>In loop destructuring, if there are more values than variables
the trailing values are ignored, and if there are more variables
than values the trailing variables get the value <code>nil</code>. 
If <code>nil</code> is used as a variable name, the corresponding
values are ignored.  Destructuring may be nested, and dotted
lists of variables like <code>(x . y)</code> are allowed, so for example
to process an alist

<pre class="example">     (cl-loop for (key . value) in '((a . 1) (b . 2))
              collect value)
             =&gt; (1 2)
</pre>
   <div class="node">
<p><hr>
<a name="Iteration-Clauses"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Accumulation-Clauses">Accumulation Clauses</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#For-Clauses">For Clauses</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Loop-Facility">Loop Facility</a>

</div>

<h4 class="subsection">4.7.4 Iteration Clauses</h4>

<p class="noindent">Aside from <code>for</code> clauses, there are several other loop clauses
that control the way the loop operates.  They might be used by
themselves, or in conjunction with one or more <code>for</code> clauses.

     <dl>
<dt><code>repeat </code><var>integer</var><dd>This clause simply counts up to the specified number using an
internal temporary variable.  The loops

     <pre class="example">          (cl-loop repeat (1+ n) do ...)
          (cl-loop for temp to n do ...)
     </pre>
     <p class="noindent">are identical except that the second one forces you to choose
a name for a variable you aren't actually going to use.

     <br><dt><code>while </code><var>condition</var><dd>This clause stops the loop when the specified condition (any Lisp
expression) becomes <code>nil</code>.  For example, the following two
loops are equivalent, except for the implicit <code>nil</code> block
that surrounds the second one:

     <pre class="example">          (while <var>cond</var> <var>forms</var>...)
          (cl-loop while <var>cond</var> do <var>forms</var>...)
     </pre>
     <br><dt><code>until </code><var>condition</var><dd>This clause stops the loop when the specified condition is true,
i.e., non-<code>nil</code>.

     <br><dt><code>always </code><var>condition</var><dd>This clause stops the loop when the specified condition is <code>nil</code>. 
Unlike <code>while</code>, it stops the loop using <code>return nil</code> so that
the <code>finally</code> clauses are not executed.  If all the conditions
were non-<code>nil</code>, the loop returns <code>t</code>:

     <pre class="example">          (if (cl-loop for size in size-list always (&gt; size 10))
              (some-big-sizes)
            (no-big-sizes))
     </pre>
     <br><dt><code>never </code><var>condition</var><dd>This clause is like <code>always</code>, except that the loop returns
<code>t</code> if any conditions were false, or <code>nil</code> otherwise.

     <br><dt><code>thereis </code><var>condition</var><dd>This clause stops the loop when the specified form is non-<code>nil</code>;
in this case, it returns that non-<code>nil</code> value.  If all the
values were <code>nil</code>, the loop returns <code>nil</code>.

     <br><dt><code>iter-by </code><var>iterator</var><dd>This clause iterates over the values from the specified form, an
iterator object.  See (see <a href="elisp.html#Generators">Generators</a>). 
</dl>

<div class="node">
<p><hr>
<a name="Accumulation-Clauses"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-Clauses">Other Clauses</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Iteration-Clauses">Iteration Clauses</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Loop-Facility">Loop Facility</a>

</div>

<h4 class="subsection">4.7.5 Accumulation Clauses</h4>

<p class="noindent">These clauses cause the loop to accumulate information about the
specified Lisp <var>form</var>.  The accumulated result is returned
from the loop unless overridden, say, by a <code>return</code> clause.

     <dl>
<dt><code>collect </code><var>form</var><dd>This clause collects the values of <var>form</var> into a list.  Several
examples of <code>collect</code> appear elsewhere in this manual.

     <p>The word <code>collecting</code> is a synonym for <code>collect</code>, and
likewise for the other accumulation clauses.

     <br><dt><code>append </code><var>form</var><dd>This clause collects lists of values into a result list using
<code>append</code>.

     <br><dt><code>nconc </code><var>form</var><dd>This clause collects lists of values into a result list by
destructively modifying the lists rather than copying them.

     <br><dt><code>concat </code><var>form</var><dd>This clause concatenates the values of the specified <var>form</var>
into a string.  (It and the following clause are extensions to
standard Common Lisp.)

     <br><dt><code>vconcat </code><var>form</var><dd>This clause concatenates the values of the specified <var>form</var>
into a vector.

     <br><dt><code>count </code><var>form</var><dd>This clause counts the number of times the specified <var>form</var>
evaluates to a non-<code>nil</code> value.

     <br><dt><code>sum </code><var>form</var><dd>This clause accumulates the sum of the values of the specified
<var>form</var>, which must evaluate to a number.

     <br><dt><code>maximize </code><var>form</var><dd>This clause accumulates the maximum value of the specified <var>form</var>,
which must evaluate to a number.  The return value is undefined if
<code>maximize</code> is executed zero times.

     <br><dt><code>minimize </code><var>form</var><dd>This clause accumulates the minimum value of the specified <var>form</var>. 
</dl>

   <p>Accumulation clauses can be followed by `<samp><span class="samp">into </span><var>var</var></samp>' to
cause the data to be collected into variable <var>var</var> (which is
automatically <code>let</code>-bound during the loop) rather than an
unnamed temporary variable.  Also, <code>into</code> accumulations do
not automatically imply a return value.  The loop must use some
explicit mechanism, such as <code>finally return</code>, to return
the accumulated result.

   <p>It is valid for several accumulation clauses of the same type to
accumulate into the same place.  From Steele:

<pre class="example">     (cl-loop for name in '(fred sue alice joe june)
              for kids in '((bob ken) () () (kris sunshine) ())
              collect name
              append kids)
             =&gt; (fred bob ken sue alice joe kris sunshine june)
</pre>
   <div class="node">
<p><hr>
<a name="Other-Clauses"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Accumulation-Clauses">Accumulation Clauses</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Loop-Facility">Loop Facility</a>

</div>

<h4 class="subsection">4.7.6 Other Clauses</h4>

<p class="noindent">This section describes the remaining loop clauses.

     <dl>
<dt><code>with </code><var>var</var><code> = </code><var>value</var><dd>This clause binds a variable to a value around the loop, but
otherwise leaves the variable alone during the loop.  The following
loops are basically equivalent:

     <pre class="example">          (cl-loop with x = 17 do ...)
          (let ((x 17)) (cl-loop do ...))
          (cl-loop for x = 17 then x do ...)
     </pre>
     <p>Naturally, the variable <var>var</var> might be used for some purpose
in the rest of the loop.  For example:

     <pre class="example">          (cl-loop for x in my-list  with res = nil  do (push x res)
                   finally return res)
     </pre>
     <p>This loop inserts the elements of <code>my-list</code> at the front of
a new list being accumulated in <code>res</code>, then returns the
list <code>res</code> at the end of the loop.  The effect is similar
to that of a <code>collect</code> clause, but the list gets reversed
by virtue of the fact that elements are being pushed onto the
front of <code>res</code> rather than the end.

     <p>If you omit the <code>=</code> term, the variable is initialized to
<code>nil</code>.  (Thus the `<samp><span class="samp">= nil</span></samp>' in the above example is
unnecessary.)

     <p>Bindings made by <code>with</code> are sequential by default, as if
by <code>let*</code>.  Just like <code>for</code> clauses, <code>with</code> clauses
can be linked with <code>and</code> to cause the bindings to be made by
<code>let</code> instead.

     <br><dt><code>if </code><var>condition</var> <var>clause</var><dd>This clause executes the following loop clause only if the specified
condition is true.  The following <var>clause</var> should be an accumulation,
<code>do</code>, <code>return</code>, <code>if</code>, or <code>unless</code> clause. 
Several clauses may be linked by separating them with <code>and</code>. 
These clauses may be followed by <code>else</code> and a clause or clauses
to execute if the condition was false.  The whole construct may
optionally be followed by the word <code>end</code> (which may be used to
disambiguate an <code>else</code> or <code>and</code> in a nested <code>if</code>).

     <p>The actual non-<code>nil</code> value of the condition form is available
by the name <code>it</code> in the &ldquo;then&rdquo; part.  For example:

     <pre class="example">          (setq funny-numbers '(6 13 -1))
               =&gt; (6 13 -1)
          (cl-loop for x below 10
                   if (cl-oddp x)
                     collect x into odds
                     and if (memq x funny-numbers) return (cdr it) end
                   else
                     collect x into evens
                   finally return (vector odds evens))
                  =&gt; [(1 3 5 7 9) (0 2 4 6 8)]
          (setq funny-numbers '(6 7 13 -1))
               =&gt; (6 7 13 -1)
          (cl-loop &lt;<span class="roman">same thing again</span>&gt;)
                  =&gt; (13 -1)
     </pre>
     <p>Note the use of <code>and</code> to put two clauses into the &ldquo;then&rdquo;
part, one of which is itself an <code>if</code> clause.  Note also that
<code>end</code>, while normally optional, was necessary here to make
it clear that the <code>else</code> refers to the outermost <code>if</code>
clause.  In the first case, the loop returns a vector of lists
of the odd and even values of <var>x</var>.  In the second case, the
odd number 7 is one of the <code>funny-numbers</code> so the loop
returns early; the actual returned value is based on the result
of the <code>memq</code> call.

     <br><dt><code>when </code><var>condition</var> <var>clause</var><dd>This clause is just a synonym for <code>if</code>.

     <br><dt><code>unless </code><var>condition</var> <var>clause</var><dd>The <code>unless</code> clause is just like <code>if</code> except that the
sense of the condition is reversed.

     <br><dt><code>named </code><var>name</var><dd>This clause gives a name other than <code>nil</code> to the implicit
block surrounding the loop.  The <var>name</var> is the symbol to be
used as the block name.

     <br><dt><code>initially [do] </code><var>forms</var><code>...</code><dd>This keyword introduces one or more Lisp forms which will be
executed before the loop itself begins (but after any variables
requested by <code>for</code> or <code>with</code> have been bound to their
initial values).  <code>initially</code> clauses can appear anywhere;
if there are several, they are executed in the order they appear
in the loop.  The keyword <code>do</code> is optional.

     <br><dt><code>finally [do] </code><var>forms</var><code>...</code><dd>This introduces Lisp forms which will be executed after the loop
finishes (say, on request of a <code>for</code> or <code>while</code>). 
<code>initially</code> and <code>finally</code> clauses may appear anywhere
in the loop construct, but they are executed (in the specified
order) at the beginning or end, respectively, of the loop.

     <br><dt><code>finally return </code><var>form</var><dd>This says that <var>form</var> should be executed after the loop
is done to obtain a return value.  (Without this, or some other
clause like <code>collect</code> or <code>return</code>, the loop will simply
return <code>nil</code>.)  Variables bound by <code>for</code>, <code>with</code>,
or <code>into</code> will still contain their final values when <var>form</var>
is executed.

     <br><dt><code>do </code><var>forms</var><code>...</code><dd>The word <code>do</code> may be followed by any number of Lisp expressions
which are executed as an implicit <code>progn</code> in the body of the
loop.  Many of the examples in this section illustrate the use of
<code>do</code>.

     <br><dt><code>return </code><var>form</var><dd>This clause causes the loop to return immediately.  The following
Lisp form is evaluated to give the return value of the loop
form.  The <code>finally</code> clauses, if any, are not executed. 
Of course, <code>return</code> is generally used inside an <code>if</code> or
<code>unless</code>, as its use in a top-level loop clause would mean
the loop would never get to &ldquo;loop&rdquo; more than once.

     <p>The clause `<samp><span class="samp">return </span><var>form</var></samp>' is equivalent to
`<samp><span class="samp">do (cl-return </span><var>form</var><span class="samp">)</span></samp>' (or <code>cl-return-from</code> if the loop
was named).  The <code>return</code> clause is implemented a bit more
efficiently, though. 
</dl>

   <p>While there is no high-level way to add user extensions to <code>cl-loop</code>,
this package does offer two properties called <code>cl-loop-handler</code>
and <code>cl-loop-for-handler</code> which are functions to be called when a
given symbol is encountered as a top-level loop clause or <code>for</code>
clause, respectively.  Consult the source code in file
<samp><span class="file">cl-macs.el</span></samp> for details.

   <p>This package's <code>cl-loop</code> macro is compatible with that of Common
Lisp, except that a few features are not implemented:  <code>loop-finish</code>
and data-type specifiers.  Naturally, the <code>for</code> clauses that
iterate over keymaps, overlays, intervals, frames, windows, and
buffers are Emacs-specific extensions.

<div class="node">
<p><hr>
<a name="Multiple-Values"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Loop-Facility">Loop Facility</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Control-Structure">Control Structure</a>

</div>

<h3 class="section">4.8 Multiple Values</h3>

<p class="noindent">Common Lisp functions can return zero or more results.  Emacs Lisp
functions, by contrast, always return exactly one result.  This
package makes no attempt to emulate Common Lisp multiple return
values; Emacs versions of Common Lisp functions that return more
than one value either return just the first value (as in
<code>cl-compiler-macroexpand</code>) or return a list of values. 
This package <em>does</em> define placeholders
for the Common Lisp functions that work with multiple values, but
in Emacs Lisp these functions simply operate on lists instead. 
The <code>cl-values</code> form, for example, is a synonym for <code>list</code>
in Emacs.

<div class="defun">
&mdash; Macro: <b>cl-multiple-value-bind</b> (<var>var<small class="dots">...</small></var>)<var> values-form forms<small class="dots">...</small><a name="index-cl_002dmultiple_002dvalue_002dbind-50"></a></var><br>
<blockquote><p>This form evaluates <var>values-form</var>, which must return a list of
values.  It then binds the <var>var</var>s to these respective values,
as if by <code>let</code>, and then executes the body <var>forms</var>. 
If there are more <var>var</var>s than values, the extra <var>var</var>s
are bound to <code>nil</code>.  If there are fewer <var>var</var>s than
values, the excess values are ignored. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-multiple-value-setq</b> (<var>var<small class="dots">...</small></var>)<var> form<a name="index-cl_002dmultiple_002dvalue_002dsetq-51"></a></var><br>
<blockquote><p>This form evaluates <var>form</var>, which must return a list of values. 
It then sets the <var>var</var>s to these respective values, as if by
<code>setq</code>.  Extra <var>var</var>s or values are treated the same as
in <code>cl-multiple-value-bind</code>. 
</p></blockquote></div>

   <p>Since a perfect emulation is not feasible in Emacs Lisp, this
package opts to keep it as simple and predictable as possible.

<div class="node">
<p><hr>
<a name="Macros"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Declarations">Declarations</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Control-Structure">Control Structure</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 Macros</h2>

<p class="noindent">This package implements the various Common Lisp features of
<code>defmacro</code>, such as destructuring, <code>&amp;environment</code>,
and <code>&amp;body</code>.  Top-level <code>&amp;whole</code> is not implemented
for <code>defmacro</code> due to technical difficulties. 
See <a href="#Argument-Lists">Argument Lists</a>.

   <p>Destructuring is made available to the user by way of the
following macro:

<div class="defun">
&mdash; Macro: <b>cl-destructuring-bind</b><var> arglist expr forms<small class="dots">...</small><a name="index-cl_002ddestructuring_002dbind-52"></a></var><br>
<blockquote><p>This macro expands to code that executes <var>forms</var>, with
the variables in <var>arglist</var> bound to the list of values
returned by <var>expr</var>.  The <var>arglist</var> can include all
the features allowed for <code>cl-defmacro</code> argument lists,
including destructuring.  (The <code>&amp;environment</code> keyword
is not allowed.)  The macro expansion will signal an error
if <var>expr</var> returns a list of the wrong number of arguments
or with incorrect keyword arguments. 
</p></blockquote></div>

   <p><a name="index-compiler-macros-53"></a><a name="index-define-compiler-macros-54"></a>This package also includes the Common Lisp <code>define-compiler-macro</code>
facility, which allows you to define compile-time expansions and
optimizations for your functions.

<div class="defun">
&mdash; Macro: <b>cl-define-compiler-macro</b><var> name arglist forms<small class="dots">...</small><a name="index-cl_002ddefine_002dcompiler_002dmacro-55"></a></var><br>
<blockquote><p>This form is similar to <code>defmacro</code>, except that it only expands
calls to <var>name</var> at compile-time; calls processed by the Lisp
interpreter are not expanded, nor are they expanded by the
<code>macroexpand</code> function.

        <p>The argument list may begin with a <code>&amp;whole</code> keyword and a
variable.  This variable is bound to the macro-call form itself,
i.e., to a list of the form `<samp><span class="samp">(</span><var>name</var> <var>args</var><span class="samp">...)</span></samp>'. 
If the macro expander returns this form unchanged, then the
compiler treats it as a normal function call.  This allows
compiler macros to work as optimizers for special cases of a
function, leaving complicated cases alone.

        <p>For example, here is a simplified version of a definition that
appears as a standard part of this package:

     <pre class="example">          (cl-define-compiler-macro cl-member (&amp;whole form a list &amp;rest keys)
               (if (and (null keys)
                        (eq (car-safe a) 'quote)
                        (not (floatp (cadr a))))
                   (list 'memq a list)
                 form))
     </pre>
        <p class="noindent">This definition causes <code>(cl-member </code><var>a</var> <var>list</var><code>)</code> to change
to a call to the faster <code>memq</code> in the common case where <var>a</var>
is a non-floating-point constant; if <var>a</var> is anything else, or
if there are any keyword arguments in the call, then the original
<code>cl-member</code> call is left intact.  (The actual compiler macro
for <code>cl-member</code> optimizes a number of other cases, including
common <code>:test</code> predicates.) 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-compiler-macroexpand</b><var> form<a name="index-cl_002dcompiler_002dmacroexpand-56"></a></var><br>
<blockquote><p>This function is analogous to <code>macroexpand</code>, except that it
expands compiler macros rather than regular macros.  It returns
<var>form</var> unchanged if it is not a call to a function for which
a compiler macro has been defined, or if that compiler macro
decided to punt by returning its <code>&amp;whole</code> argument.  Like
<code>macroexpand</code>, it expands repeatedly until it reaches a form
for which no further expansion is possible. 
</p></blockquote></div>

   <p>See <a href="#Macro-Bindings">Macro Bindings</a>, for descriptions of the <code>cl-macrolet</code>
and <code>cl-symbol-macrolet</code> forms for making &ldquo;local&rdquo; macro
definitions.

<div class="node">
<p><hr>
<a name="Declarations"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Symbols">Symbols</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Macros">Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 Declarations</h2>

<p class="noindent">Common Lisp includes a complex and powerful &ldquo;declaration&rdquo;
mechanism that allows you to give the compiler special hints
about the types of data that will be stored in particular variables,
and about the ways those variables and functions will be used.  This
package defines versions of all the Common Lisp declaration forms:
<code>declare</code>, <code>locally</code>, <code>proclaim</code>, <code>declaim</code>,
and <code>the</code>.

   <p>Most of the Common Lisp declarations are not currently useful in Emacs
Lisp.  For example, the byte-code system provides little
opportunity to benefit from type information. 
A few declarations are meaningful when byte compiler optimizations
are enabled, as they are by the default.  Otherwise these
declarations will effectively be ignored.

<div class="defun">
&mdash; Function: <b>cl-proclaim</b><var> decl-spec<a name="index-cl_002dproclaim-57"></a></var><br>
<blockquote><p>This function records a &ldquo;global&rdquo; declaration specified by
<var>decl-spec</var>.  Since <code>cl-proclaim</code> is a function, <var>decl-spec</var>
is evaluated and thus should normally be quoted. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-declaim</b><var> decl-specs<small class="dots">...</small><a name="index-cl_002ddeclaim-58"></a></var><br>
<blockquote><p>This macro is like <code>cl-proclaim</code>, except that it takes any number
of <var>decl-spec</var> arguments, and the arguments are unevaluated and
unquoted.  The <code>cl-declaim</code> macro also puts <code>(cl-eval-when
(compile load eval) ...)</code> around the declarations so that they will
be registered at compile-time as well as at run-time.  (This is vital,
since normally the declarations are meant to influence the way the
compiler treats the rest of the file that contains the <code>cl-declaim</code>
form.) 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-declare</b><var> decl-specs<small class="dots">...</small><a name="index-cl_002ddeclare-59"></a></var><br>
<blockquote><p>This macro is used to make declarations within functions and other
code.  Common Lisp allows declarations in various locations, generally
at the beginning of any of the many &ldquo;implicit <code>progn</code>s&rdquo;
throughout Lisp syntax, such as function bodies, <code>let</code> bodies,
etc.  Currently the only declaration understood by <code>cl-declare</code>
is <code>special</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-locally</b><var> declarations<small class="dots">...</small> forms<small class="dots">...</small><a name="index-cl_002dlocally-60"></a></var><br>
<blockquote><p>In this package, <code>cl-locally</code> is no different from <code>progn</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-the</b><var> type form<a name="index-cl_002dthe-61"></a></var><br>
<blockquote><p><code>cl-the</code> returns the value of <code>form</code>, first checking (if
optimization settings permit) that it is of type <code>type</code>.  Future
byte-compiler optimizations may also make use of this information to
improve runtime efficiency.

        <p>For example, <code>mapcar</code> can map over both lists and arrays.  It is
hard for the compiler to expand <code>mapcar</code> into an in-line loop
unless it knows whether the sequence will be a list or an array ahead
of time.  With <code>(mapcar 'car (cl-the vector foo))</code>, a future
compiler would have enough information to expand the loop in-line. 
For now, Emacs Lisp will treat the above code as exactly equivalent
to <code>(mapcar 'car foo)</code>. 
</p></blockquote></div>

   <p>Each <var>decl-spec</var> in a <code>cl-proclaim</code>, <code>cl-declaim</code>, or
<code>cl-declare</code> should be a list beginning with a symbol that says
what kind of declaration it is.  This package currently understands
<code>special</code>, <code>inline</code>, <code>notinline</code>, <code>optimize</code>,
and <code>warn</code> declarations.  (The <code>warn</code> declaration is an
extension of standard Common Lisp.)  Other Common Lisp declarations,
such as <code>type</code> and <code>ftype</code>, are silently ignored.

     <dl>
<dt><code>special</code><dd><!-- FIXME ? -->
Since all variables in Emacs Lisp are &ldquo;special&rdquo; (in the Common
Lisp sense), <code>special</code> declarations are only advisory.  They
simply tell the byte compiler that the specified
variables are intentionally being referred to without being
bound in the body of the function.  The compiler normally emits
warnings for such references, since they could be typographical
errors for references to local variables.

     <p>The declaration <code>(cl-declare (special </code><var>var1</var> <var>var2</var><code>))</code> is
equivalent to <code>(defvar </code><var>var1</var><code>) (defvar </code><var>var2</var><code>)</code>.

     <p>In top-level contexts, it is generally better to write
<code>(defvar </code><var>var</var><code>)</code> than <code>(cl-declaim (special </code><var>var</var><code>))</code>,
since <code>defvar</code> makes your intentions clearer.

     <br><dt><code>inline</code><dd>The <code>inline</code> <var>decl-spec</var> lists one or more functions
whose bodies should be expanded &ldquo;in-line&rdquo; into calling functions
whenever the compiler is able to arrange for it.  For example,
the function <code>cl-acons</code> is declared <code>inline</code>
by this package so that the form <code>(cl-acons </code><var>key</var> <var>value</var>
<var>alist</var><code>)</code> will
expand directly into <code>(cons (cons </code><var>key</var> <var>value</var><code>) </code><var>alist</var><code>)</code>
when it is called in user functions, so as to save function calls.

     <p>The following declarations are all equivalent.  Note that the
<code>defsubst</code> form is a convenient way to define a function
and declare it inline all at once.

     <pre class="example">          (cl-declaim (inline foo bar))
          (cl-eval-when (compile load eval)
            (cl-proclaim '(inline foo bar)))
          (defsubst foo (...) ...)       ; instead of defun
     </pre>
     <p><strong>Please note:</strong>  this declaration remains in effect after the
containing source file is done.  It is correct to use it to
request that a function you have defined should be inlined,
but it is impolite to use it to request inlining of an external
function.

     <p>In Common Lisp, it is possible to use <code>(declare (inline ...))</code>
before a particular call to a function to cause just that call to
be inlined; the current byte compilers provide no way to implement
this, so <code>(cl-declare (inline ...))</code> is currently ignored by
this package.

     <br><dt><code>notinline</code><dd>The <code>notinline</code> declaration lists functions which should
not be inlined after all; it cancels a previous <code>inline</code>
declaration.

     <br><dt><code>optimize</code><dd>This declaration controls how much optimization is performed by
the compiler.

     <p>The word <code>optimize</code> is followed by any number of lists like
<code>(speed 3)</code> or <code>(safety 2)</code>.  Common Lisp defines several
optimization &ldquo;qualities&rdquo;; this package ignores all but <code>speed</code>
and <code>safety</code>.  The value of a quality should be an integer from
0 to 3, with 0 meaning &ldquo;unimportant&rdquo; and 3 meaning &ldquo;very important&rdquo;. 
The default level for both qualities is 1.

     <p>In this package, the <code>speed</code> quality is tied to the <code>byte-optimize</code>
flag, which is set to <code>nil</code> for <code>(speed 0)</code> and to
<code>t</code> for higher settings; and the <code>safety</code> quality is
tied to the <code>byte-compile-delete-errors</code> flag, which is
set to <code>nil</code> for <code>(safety 3)</code> and to <code>t</code> for all
lower settings.  (The latter flag controls whether the compiler
is allowed to optimize out code whose only side-effect could
be to signal an error, e.g., rewriting <code>(progn foo bar)</code> to
<code>bar</code> when it is not known whether <code>foo</code> will be bound
at run-time.)

     <p>Note that even compiling with <code>(safety 0)</code>, the Emacs
byte-code system provides sufficient checking to prevent real
harm from being done.  For example, barring serious bugs in
Emacs itself, Emacs will not crash with a segmentation fault
just because of an error in a fully-optimized Lisp program.

     <p>The <code>optimize</code> declaration is normally used in a top-level
<code>cl-proclaim</code> or <code>cl-declaim</code> in a file; Common Lisp allows
it to be used with <code>declare</code> to set the level of optimization
locally for a given form, but this will not work correctly with the
current byte-compiler.  (The <code>cl-declare</code>
will set the new optimization level, but that level will not
automatically be unset after the enclosing form is done.)

     <br><dt><code>warn</code><dd>This declaration controls what sorts of warnings are generated
by the byte compiler.  The word <code>warn</code> is followed by any
number of &ldquo;warning qualities&rdquo;, similar in form to optimization
qualities.  The currently supported warning types are
<code>redefine</code>, <code>callargs</code>, <code>unresolved</code>, and
<code>free-vars</code>; in the current system, a value of 0 will
disable these warnings and any higher value will enable them. 
See the documentation of the variable <code>byte-compile-warnings</code>
for more details. 
</dl>

<div class="node">
<p><hr>
<a name="Symbols"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Numbers">Numbers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Declarations">Declarations</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">7 Symbols</h2>

<p class="noindent">This package defines several symbol-related features that were
missing from Emacs Lisp.

<ul class="menu">
<li><a accesskey="1" href="#Property-Lists">Property Lists</a>:        <code>cl-get</code>, <code>cl-remprop</code>, <code>cl-getf</code>, <code>cl-remf</code>. 
<li><a accesskey="2" href="#Creating-Symbols">Creating Symbols</a>:      <code>cl-gensym</code>, <code>cl-gentemp</code>. 
</ul>

<div class="node">
<p><hr>
<a name="Property-Lists"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Creating-Symbols">Creating Symbols</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbols">Symbols</a>

</div>

<h3 class="section">7.1 Property Lists</h3>

<p class="noindent">These functions augment the standard Emacs Lisp functions <code>get</code>
and <code>put</code> for operating on properties attached to symbols. 
There are also functions for working with property lists as
first-class data structures not attached to particular symbols.

<div class="defun">
&mdash; Function: <b>cl-get</b><var> symbol property &amp;optional default<a name="index-cl_002dget-62"></a></var><br>
<blockquote><p>This function is like <code>get</code>, except that if the property is
not found, the <var>default</var> argument provides the return value. 
(The Emacs Lisp <code>get</code> function always uses <code>nil</code> as
the default; this package's <code>cl-get</code> is equivalent to Common
Lisp's <code>get</code>.)

        <p>The <code>cl-get</code> function is <code>setf</code>-able; when used in this
fashion, the <var>default</var> argument is allowed but ignored. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-remprop</b><var> symbol property<a name="index-cl_002dremprop-63"></a></var><br>
<blockquote><p>This function removes the entry for <var>property</var> from the property
list of <var>symbol</var>.  It returns a true value if the property was
indeed found and removed, or <code>nil</code> if there was no such property. 
(This function was probably omitted from Emacs originally because,
since <code>get</code> did not allow a <var>default</var>, it was very difficult
to distinguish between a missing property and a property whose value
was <code>nil</code>; thus, setting a property to <code>nil</code> was close
enough to <code>cl-remprop</code> for most purposes.) 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-getf</b><var> place property &amp;optional default<a name="index-cl_002dgetf-64"></a></var><br>
<blockquote><p>This function scans the list <var>place</var> as if it were a property
list, i.e., a list of alternating property names and values.  If
an even-numbered element of <var>place</var> is found which is <code>eq</code>
to <var>property</var>, the following odd-numbered element is returned. 
Otherwise, <var>default</var> is returned (or <code>nil</code> if no default
is given).

        <p>In particular,

     <pre class="example">          (get sym prop)  ==  (cl-getf (symbol-plist sym) prop)
     </pre>
        <p>It is valid to use <code>cl-getf</code> as a <code>setf</code> place, in which case
its <var>place</var> argument must itself be a valid <code>setf</code> place. 
The <var>default</var> argument, if any, is ignored in this context. 
The effect is to change (via <code>setcar</code>) the value cell in the
list that corresponds to <var>property</var>, or to cons a new property-value
pair onto the list if the property is not yet present.

     <pre class="example">          (put sym prop val) == (setf (cl-getf (symbol-plist sym) prop) val)
     </pre>
        <p>The <code>get</code> and <code>cl-get</code> functions are also <code>setf</code>-able. 
The fact that <code>default</code> is ignored can sometimes be useful:

     <pre class="example">          (cl-incf (cl-get 'foo 'usage-count 0))
     </pre>
        <p>Here, symbol <code>foo</code>'s <code>usage-count</code> property is incremented
if it exists, or set to 1 (an incremented 0) otherwise.

        <p>When not used as a <code>setf</code> form, <code>cl-getf</code> is just a regular
function and its <var>place</var> argument can actually be any Lisp
expression. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-remf</b><var> place property<a name="index-cl_002dremf-65"></a></var><br>
<blockquote><p>This macro removes the property-value pair for <var>property</var> from
the property list stored at <var>place</var>, which is any <code>setf</code>-able
place expression.  It returns true if the property was found.  Note
that if <var>property</var> happens to be first on the list, this will
effectively do a <code>(setf </code><var>place</var><code> (cddr </code><var>place</var><code>))</code>,
whereas if it occurs later, this simply uses <code>setcdr</code> to splice
out the property and value cells. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Creating-Symbols"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Property-Lists">Property Lists</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbols">Symbols</a>

</div>

<h3 class="section">7.2 Creating Symbols</h3>

<p class="noindent">These functions create unique symbols, typically for use as
temporary variables.

<div class="defun">
&mdash; Function: <b>cl-gensym</b><var> &amp;optional x<a name="index-cl_002dgensym-66"></a></var><br>
<blockquote><p>This function creates a new, uninterned symbol (using <code>make-symbol</code>)
with a unique name.  (The name of an uninterned symbol is relevant
only if the symbol is printed.)  By default, the name is generated
from an increasing sequence of numbers, `<samp><span class="samp">G1000</span></samp>', `<samp><span class="samp">G1001</span></samp>',
`<samp><span class="samp">G1002</span></samp>', etc.  If the optional argument <var>x</var> is a string, that
string is used as a prefix instead of `<samp><span class="samp">G</span></samp>'.  Uninterned symbols
are used in macro expansions for temporary variables, to ensure that
their names will not conflict with &ldquo;real&rdquo; variables in the user's
code.

        <p>(Internally, the variable <code>cl--gensym-counter</code> holds the counter
used to generate names.  It is initialized with zero and incremented
after each use.) 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-gentemp</b><var> &amp;optional x<a name="index-cl_002dgentemp-67"></a></var><br>
<blockquote><p>This function is like <code>cl-gensym</code>, except that it produces a new
<em>interned</em> symbol.  If the symbol that is generated already
exists, the function keeps incrementing the counter and trying
again until a new symbol is generated. 
</p></blockquote></div>

   <p>This package automatically creates all keywords that are called for by
<code>&amp;key</code> argument specifiers, and discourages the use of keywords
as data unrelated to keyword arguments, so the related function
<code>defkeyword</code> (to create self-quoting keyword symbols) is not
provided.

<div class="node">
<p><hr>
<a name="Numbers"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sequences">Sequences</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Symbols">Symbols</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">8 Numbers</h2>

<p class="noindent">This section defines a few simple Common Lisp operations on numbers
that were left out of Emacs Lisp.

<ul class="menu">
<li><a accesskey="1" href="#Predicates-on-Numbers">Predicates on Numbers</a>:        <code>cl-plusp</code>, <code>cl-oddp</code>, etc. 
<li><a accesskey="2" href="#Numerical-Functions">Numerical Functions</a>:          <code>cl-floor</code>, <code>cl-ceiling</code>, etc. 
<li><a accesskey="3" href="#Random-Numbers">Random Numbers</a>:               <code>cl-random</code>, <code>cl-make-random-state</code>. 
<li><a accesskey="4" href="#Implementation-Parameters">Implementation Parameters</a>:    <code>cl-most-positive-float</code>, etc. 
</ul>

<div class="node">
<p><hr>
<a name="Predicates-on-Numbers"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Numerical-Functions">Numerical Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Numbers">Numbers</a>

</div>

<h3 class="section">8.1 Predicates on Numbers</h3>

<p class="noindent">These functions return <code>t</code> if the specified condition is
true of the numerical argument, or <code>nil</code> otherwise.

<div class="defun">
&mdash; Function: <b>cl-plusp</b><var> number<a name="index-cl_002dplusp-68"></a></var><br>
<blockquote><p>This predicate tests whether <var>number</var> is positive.  It is an
error if the argument is not a number. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-minusp</b><var> number<a name="index-cl_002dminusp-69"></a></var><br>
<blockquote><p>This predicate tests whether <var>number</var> is negative.  It is an
error if the argument is not a number. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-oddp</b><var> integer<a name="index-cl_002doddp-70"></a></var><br>
<blockquote><p>This predicate tests whether <var>integer</var> is odd.  It is an
error if the argument is not an integer. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-evenp</b><var> integer<a name="index-cl_002devenp-71"></a></var><br>
<blockquote><p>This predicate tests whether <var>integer</var> is even.  It is an
error if the argument is not an integer. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-digit-char-p</b><var> char radix<a name="index-cl_002ddigit_002dchar_002dp-72"></a></var><br>
<blockquote><p>Test if <var>char</var> is a digit in the specified <var>radix</var> (default is
10).  If it is, return the numerical value of digit <var>char</var> in
<var>radix</var>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Numerical-Functions"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Random-Numbers">Random Numbers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Predicates-on-Numbers">Predicates on Numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Numbers">Numbers</a>

</div>

<h3 class="section">8.2 Numerical Functions</h3>

<p class="noindent">These functions perform various arithmetic operations on numbers.

<div class="defun">
&mdash; Function: <b>cl-gcd</b><var> &amp;rest integers<a name="index-cl_002dgcd-73"></a></var><br>
<blockquote><p>This function returns the Greatest Common Divisor of the arguments. 
For one argument, it returns the absolute value of that argument. 
For zero arguments, it returns zero. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-lcm</b><var> &amp;rest integers<a name="index-cl_002dlcm-74"></a></var><br>
<blockquote><p>This function returns the Least Common Multiple of the arguments. 
For one argument, it returns the absolute value of that argument. 
For zero arguments, it returns one. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-isqrt</b><var> integer<a name="index-cl_002disqrt-75"></a></var><br>
<blockquote><p>This function computes the &ldquo;integer square root&rdquo; of its integer
argument, i.e., the greatest integer less than or equal to the true
square root of the argument. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-floor</b><var> number &amp;optional divisor<a name="index-cl_002dfloor-76"></a></var><br>
<blockquote><p>With one argument, <code>cl-floor</code> returns a list of two numbers:
The argument rounded down (toward minus infinity) to an integer,
and the &ldquo;remainder&rdquo; which would have to be added back to the
first return value to yield the argument again.  If the argument
is an integer <var>x</var>, the result is always the list <code>(</code><var>x</var><code> 0)</code>. 
If the argument is a floating-point number, the first
result is a Lisp integer and the second is a Lisp float between
0 (inclusive) and 1 (exclusive).

        <p>With two arguments, <code>cl-floor</code> divides <var>number</var> by
<var>divisor</var>, and returns the floor of the quotient and the
corresponding remainder as a list of two numbers.  If
<code>(cl-floor </code><var>x</var> <var>y</var><code>)</code> returns <code>(</code><var>q</var> <var>r</var><code>)</code>,
then <var>q</var><code>*</code><var>y</var><code> + </code><var>r</var><code> = </code><var>x</var>, with <var>r</var>
between 0 (inclusive) and <var>r</var> (exclusive).  Also, note
that <code>(cl-floor </code><var>x</var><code>)</code> is exactly equivalent to
<code>(cl-floor </code><var>x</var><code> 1)</code>.

        <p>This function is entirely compatible with Common Lisp's <code>floor</code>
function, except that it returns the two results in a list since
Emacs Lisp does not support multiple-valued functions. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-ceiling</b><var> number &amp;optional divisor<a name="index-cl_002dceiling-77"></a></var><br>
<blockquote><p>This function implements the Common Lisp <code>ceiling</code> function,
which is analogous to <code>floor</code> except that it rounds the
argument or quotient of the arguments up toward plus infinity. 
The remainder will be between 0 and minus <var>r</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-truncate</b><var> number &amp;optional divisor<a name="index-cl_002dtruncate-78"></a></var><br>
<blockquote><p>This function implements the Common Lisp <code>truncate</code> function,
which is analogous to <code>floor</code> except that it rounds the
argument or quotient of the arguments toward zero.  Thus it is
equivalent to <code>cl-floor</code> if the argument or quotient is
positive, or to <code>cl-ceiling</code> otherwise.  The remainder has
the same sign as <var>number</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-round</b><var> number &amp;optional divisor<a name="index-cl_002dround-79"></a></var><br>
<blockquote><p>This function implements the Common Lisp <code>round</code> function,
which is analogous to <code>floor</code> except that it rounds the
argument or quotient of the arguments to the nearest integer. 
In the case of a tie (the argument or quotient is exactly
halfway between two integers), it rounds to the even integer. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-mod</b><var> number divisor<a name="index-cl_002dmod-80"></a></var><br>
<blockquote><p>This function returns the same value as the second return value
of <code>cl-floor</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-rem</b><var> number divisor<a name="index-cl_002drem-81"></a></var><br>
<blockquote><p>This function returns the same value as the second return value
of <code>cl-truncate</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-parse-integer</b><var> string &amp;key start end radix junk-allowed<a name="index-cl_002dparse_002dinteger-82"></a></var><br>
<blockquote><p>This function implements the Common Lisp <code>parse-integer</code>
function.  It parses an integer in the specified <var>radix</var> from the
substring of <var>string</var> between <var>start</var> and <var>end</var>.  Any
leading and trailing whitespace chars are ignored.  The function
signals an error if the substring between <var>start</var> and <var>end</var>
cannot be parsed as an integer, unless <var>junk-allowed</var> is
non-<code>nil</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Random-Numbers"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Implementation-Parameters">Implementation Parameters</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Numerical-Functions">Numerical Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Numbers">Numbers</a>

</div>

<h3 class="section">8.3 Random Numbers</h3>

<p class="noindent">This package also provides an implementation of the Common Lisp
random number generator.  It uses its own additive-congruential
algorithm, which is much more likely to give statistically clean
<!-- FIXME?  Still true? -->
random numbers than the simple generators supplied by many
operating systems.

<div class="defun">
&mdash; Function: <b>cl-random</b><var> number &amp;optional state<a name="index-cl_002drandom-83"></a></var><br>
<blockquote><p>This function returns a random nonnegative number less than
<var>number</var>, and of the same type (either integer or floating-point). 
The <var>state</var> argument should be a <code>random-state</code> object
that holds the state of the random number generator.  The
function modifies this state object as a side effect.  If
<var>state</var> is omitted, it defaults to the internal variable
<code>cl--random-state</code>, which contains a pre-initialized
default <code>random-state</code> object.  (Since any number of programs in
the Emacs process may be accessing <code>cl--random-state</code> in
interleaved fashion, the sequence generated from this will be
irreproducible for all intents and purposes.) 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-make-random-state</b><var> &amp;optional state<a name="index-cl_002dmake_002drandom_002dstate-84"></a></var><br>
<blockquote><p>This function creates or copies a <code>random-state</code> object. 
If <var>state</var> is omitted or <code>nil</code>, it returns a new copy of
<code>cl--random-state</code>.  This is a copy in the sense that future
sequences of calls to <code>(cl-random </code><var>n</var><code>)</code> and
<code>(cl-random </code><var>n</var> <var>s</var><code>)</code> (where <var>s</var> is the new
random-state object) will return identical sequences of random
numbers.

        <p>If <var>state</var> is a <code>random-state</code> object, this function
returns a copy of that object.  If <var>state</var> is <code>t</code>, this
function returns a new <code>random-state</code> object seeded from the
date and time.  As an extension to Common Lisp, <var>state</var> may also
be an integer in which case the new object is seeded from that
integer; each different integer seed will result in a completely
different sequence of random numbers.

        <p>It is valid to print a <code>random-state</code> object to a buffer or
file and later read it back with <code>read</code>.  If a program wishes
to use a sequence of pseudo-random numbers which can be reproduced
later for debugging, it can call <code>(cl-make-random-state t)</code> to
get a new sequence, then print this sequence to a file.  When the
program is later rerun, it can read the original run's random-state
from the file. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-random-state-p</b><var> object<a name="index-cl_002drandom_002dstate_002dp-85"></a></var><br>
<blockquote><p>This predicate returns <code>t</code> if <var>object</var> is a
<code>random-state</code> object, or <code>nil</code> otherwise. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Implementation-Parameters"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Random-Numbers">Random Numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Numbers">Numbers</a>

</div>

<h3 class="section">8.4 Implementation Parameters</h3>

<p class="noindent">This package defines several useful constants having to do with
floating-point numbers.

   <p>It determines their values by exercising the computer's
floating-point arithmetic in various ways.  Because this operation
might be slow, the code for initializing them is kept in a separate
function that must be called before the parameters can be used.

<div class="defun">
&mdash; Function: <b>cl-float-limits</b><var><a name="index-cl_002dfloat_002dlimits-86"></a></var><br>
<blockquote><p>This function makes sure that the Common Lisp floating-point parameters
like <code>cl-most-positive-float</code> have been initialized.  Until it is
called, these parameters will be <code>nil</code>. 
<!-- If this version of Emacs does not support floats, the parameters will -->
<!-- remain @code{nil}. -->
If the parameters have already been initialized, the function returns
immediately.

        <p>The algorithm makes assumptions that will be valid for almost all
machines, but will fail if the machine's arithmetic is extremely
unusual, e.g., decimal. 
</p></blockquote></div>

   <p>Since true Common Lisp supports up to four different floating-point
precisions, it has families of constants like
<code>most-positive-single-float</code>, <code>most-positive-double-float</code>,
<code>most-positive-long-float</code>, and so on.  Emacs has only one
floating-point precision, so this package omits the precision word
from the constants' names.

<div class="defun">
&mdash; Variable: <b>cl-most-positive-float</b><var><a name="index-cl_002dmost_002dpositive_002dfloat-87"></a></var><br>
<blockquote><p>This constant equals the largest value a Lisp float can hold. 
For those systems whose arithmetic supports infinities, this is
the largest <em>finite</em> value.  For IEEE machines, the value
is approximately <code>1.79e+308</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>cl-most-negative-float</b><var><a name="index-cl_002dmost_002dnegative_002dfloat-88"></a></var><br>
<blockquote><p>This constant equals the most negative value a Lisp float can hold. 
(It is assumed to be equal to <code>(- cl-most-positive-float)</code>.) 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>cl-least-positive-float</b><var><a name="index-cl_002dleast_002dpositive_002dfloat-89"></a></var><br>
<blockquote><p>This constant equals the smallest Lisp float value greater than zero. 
For IEEE machines, it is about <code>4.94e-324</code> if denormals are
supported or <code>2.22e-308</code> if not. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>cl-least-positive-normalized-float</b><var><a name="index-cl_002dleast_002dpositive_002dnormalized_002dfloat-90"></a></var><br>
<blockquote><p>This constant equals the smallest <em>normalized</em> Lisp float greater
than zero, i.e., the smallest value for which IEEE denormalization
will not result in a loss of precision.  For IEEE machines, this
value is about <code>2.22e-308</code>.  For machines that do not support
the concept of denormalization and gradual underflow, this constant
will always equal <code>cl-least-positive-float</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>cl-least-negative-float</b><var><a name="index-cl_002dleast_002dnegative_002dfloat-91"></a></var><br>
<blockquote><p>This constant is the negative counterpart of <code>cl-least-positive-float</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>cl-least-negative-normalized-float</b><var><a name="index-cl_002dleast_002dnegative_002dnormalized_002dfloat-92"></a></var><br>
<blockquote><p>This constant is the negative counterpart of
<code>cl-least-positive-normalized-float</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>cl-float-epsilon</b><var><a name="index-cl_002dfloat_002depsilon-93"></a></var><br>
<blockquote><p>This constant is the smallest positive Lisp float that can be added
to 1.0 to produce a distinct value.  Adding a smaller number to 1.0
will yield 1.0 again due to roundoff.  For IEEE machines, epsilon
is about <code>2.22e-16</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>cl-float-negative-epsilon</b><var><a name="index-cl_002dfloat_002dnegative_002depsilon-94"></a></var><br>
<blockquote><p>This is the smallest positive value that can be subtracted from
1.0 to produce a distinct value.  For IEEE machines, it is about
<code>1.11e-16</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Sequences"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Lists">Lists</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Numbers">Numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">9 Sequences</h2>

<p class="noindent">Common Lisp defines a number of functions that operate on
<dfn>sequences</dfn>, which are either lists, strings, or vectors. 
Emacs Lisp includes a few of these, notably <code>elt</code> and
<code>length</code>; this package defines most of the rest.

<ul class="menu">
<li><a accesskey="1" href="#Sequence-Basics">Sequence Basics</a>:           Arguments shared by all sequence functions. 
<li><a accesskey="2" href="#Mapping-over-Sequences">Mapping over Sequences</a>:    <code>cl-mapcar</code>, <code>cl-map</code>, <code>cl-maplist</code>, etc. 
<li><a accesskey="3" href="#Sequence-Functions">Sequence Functions</a>:        <code>cl-subseq</code>, <code>cl-remove</code>, <code>cl-substitute</code>, etc. 
<li><a accesskey="4" href="#Searching-Sequences">Searching Sequences</a>:       <code>cl-find</code>, <code>cl-count</code>, <code>cl-search</code>, etc. 
<li><a accesskey="5" href="#Sorting-Sequences">Sorting Sequences</a>:         <code>cl-sort</code>, <code>cl-stable-sort</code>, <code>cl-merge</code>. 
</ul>

<div class="node">
<p><hr>
<a name="Sequence-Basics"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Mapping-over-Sequences">Mapping over Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sequences">Sequences</a>

</div>

<h3 class="section">9.1 Sequence Basics</h3>

<p class="noindent">Many of the sequence functions take keyword arguments; see <a href="#Argument-Lists">Argument Lists</a>.  All keyword arguments are optional and, if specified,
may appear in any order.

   <p>The <code>:key</code> argument should be passed either <code>nil</code>, or a
function of one argument.  This key function is used as a filter
through which the elements of the sequence are seen; for example,
<code>(cl-find x y :key 'car)</code> is similar to <code>(cl-assoc x y)</code>. 
It searches for an element of the list whose <span class="sc">car</span> equals
<code>x</code>, rather than for an element which equals <code>x</code> itself. 
If <code>:key</code> is omitted or <code>nil</code>, the filter is effectively
the identity function.

   <p>The <code>:test</code> and <code>:test-not</code> arguments should be either
<code>nil</code>, or functions of two arguments.  The test function is
used to compare two sequence elements, or to compare a search value
with sequence elements.  (The two values are passed to the test
function in the same order as the original sequence function
arguments from which they are derived, or, if they both come from
the same sequence, in the same order as they appear in that sequence.) 
The <code>:test</code> argument specifies a function which must return
true (non-<code>nil</code>) to indicate a match; instead, you may use
<code>:test-not</code> to give a function which returns <em>false</em> to
indicate a match.  The default test function is <code>eql</code>.

   <p>Many functions that take <var>item</var> and <code>:test</code> or <code>:test-not</code>
arguments also come in <code>-if</code> and <code>-if-not</code> varieties,
where a <var>predicate</var> function is passed instead of <var>item</var>,
and sequence elements match if the predicate returns true on them
(or false in the case of <code>-if-not</code>).  For example:

<pre class="example">     (cl-remove 0 seq :test '=)  ==  (cl-remove-if 'zerop seq)
</pre>
   <p class="noindent">to remove all zeros from sequence <code>seq</code>.

   <p>Some operations can work on a subsequence of the argument sequence;
these function take <code>:start</code> and <code>:end</code> arguments, which
default to zero and the length of the sequence, respectively. 
Only elements between <var>start</var> (inclusive) and <var>end</var>
(exclusive) are affected by the operation.  The <var>end</var> argument
may be passed <code>nil</code> to signify the length of the sequence;
otherwise, both <var>start</var> and <var>end</var> must be integers, with
<code>0 &lt;= </code><var>start</var><code> &lt;= </code><var>end</var><code> &lt;= (length </code><var>seq</var><code>)</code>. 
If the function takes two sequence arguments, the limits are
defined by keywords <code>:start1</code> and <code>:end1</code> for the first,
and <code>:start2</code> and <code>:end2</code> for the second.

   <p>A few functions accept a <code>:from-end</code> argument, which, if
non-<code>nil</code>, causes the operation to go from right-to-left
through the sequence instead of left-to-right, and a <code>:count</code>
argument, which specifies an integer maximum number of elements
to be removed or otherwise processed.

   <p>The sequence functions make no guarantees about the order in
which the <code>:test</code>, <code>:test-not</code>, and <code>:key</code> functions
are called on various elements.  Therefore, it is a bad idea to depend
on side effects of these functions.  For example, <code>:from-end</code>
may cause the sequence to be scanned actually in reverse, or it may
be scanned forwards but computing a result &ldquo;as if&rdquo; it were scanned
backwards.  (Some functions, like <code>cl-mapcar</code> and <code>cl-every</code>,
<em>do</em> specify exactly the order in which the function is called
so side effects are perfectly acceptable in those cases.)

   <p>Strings may contain &ldquo;text properties&rdquo; as well
as character data.  Except as noted, it is undefined whether or
not text properties are preserved by sequence functions.  For
example, <code>(cl-remove ?A </code><var>str</var><code>)</code> may or may not preserve
the properties of the characters copied from <var>str</var> into the
result.

<div class="node">
<p><hr>
<a name="Mapping-over-Sequences"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sequence-Functions">Sequence Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sequence-Basics">Sequence Basics</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sequences">Sequences</a>

</div>

<h3 class="section">9.2 Mapping over Sequences</h3>

<p class="noindent">These functions &ldquo;map&rdquo; the function you specify over the elements
of lists or arrays.  They are all variations on the theme of the
built-in function <code>mapcar</code>.

<div class="defun">
&mdash; Function: <b>cl-mapcar</b><var> function seq &amp;rest more-seqs<a name="index-cl_002dmapcar-95"></a></var><br>
<blockquote><p>This function calls <var>function</var> on successive parallel sets of
elements from its argument sequences.  Given a single <var>seq</var>
argument it is equivalent to <code>mapcar</code>; given <var>n</var> sequences,
it calls the function with the first elements of each of the sequences
as the <var>n</var> arguments to yield the first element of the result
list, then with the second elements, and so on.  The mapping stops as
soon as the shortest sequence runs out.  The argument sequences may
be any mixture of lists, strings, and vectors; the return sequence
is always a list.

        <p>Common Lisp's <code>mapcar</code> accepts multiple arguments but works
only on lists; Emacs Lisp's <code>mapcar</code> accepts a single sequence
argument.  This package's <code>cl-mapcar</code> works as a compatible
superset of both. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-map</b><var> result-type function seq &amp;rest more-seqs<a name="index-cl_002dmap-96"></a></var><br>
<blockquote><p>This function maps <var>function</var> over the argument sequences,
just like <code>cl-mapcar</code>, but it returns a sequence of type
<var>result-type</var> rather than a list.  <var>result-type</var> must
be one of the following symbols: <code>vector</code>, <code>string</code>,
<code>list</code> (in which case the effect is the same as for
<code>cl-mapcar</code>), or <code>nil</code> (in which case the results are
thrown away and <code>cl-map</code> returns <code>nil</code>). 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-maplist</b><var> function list &amp;rest more-lists<a name="index-cl_002dmaplist-97"></a></var><br>
<blockquote><p>This function calls <var>function</var> on each of its argument lists,
then on the <span class="sc">cdr</span>s of those lists, and so on, until the
shortest list runs out.  The results are returned in the form
of a list.  Thus, <code>cl-maplist</code> is like <code>cl-mapcar</code> except
that it passes in the list pointers themselves rather than the
<span class="sc">car</span>s of the advancing pointers. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-mapc</b><var> function seq &amp;rest more-seqs<a name="index-cl_002dmapc-98"></a></var><br>
<blockquote><p>This function is like <code>cl-mapcar</code>, except that the values returned
by <var>function</var> are ignored and thrown away rather than being
collected into a list.  The return value of <code>cl-mapc</code> is <var>seq</var>,
the first sequence.  This function is more general than the Emacs
primitive <code>mapc</code>.  (Note that this function is called
<code>cl-mapc</code> even in <samp><span class="file">cl.el</span></samp>, rather than <code>mapc*</code> as you
might expect.) 
<!-- http://debbugs.gnu.org/6575 -->
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-mapl</b><var> function list &amp;rest more-lists<a name="index-cl_002dmapl-99"></a></var><br>
<blockquote><p>This function is like <code>cl-maplist</code>, except that it throws away
the values returned by <var>function</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-mapcan</b><var> function seq &amp;rest more-seqs<a name="index-cl_002dmapcan-100"></a></var><br>
<blockquote><p>This function is like <code>cl-mapcar</code>, except that it concatenates
the return values (which must be lists) using <code>nconc</code>,
rather than simply collecting them into a list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-mapcon</b><var> function list &amp;rest more-lists<a name="index-cl_002dmapcon-101"></a></var><br>
<blockquote><p>This function is like <code>cl-maplist</code>, except that it concatenates
the return values using <code>nconc</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-some</b><var> predicate seq &amp;rest more-seqs<a name="index-cl_002dsome-102"></a></var><br>
<blockquote><p>This function calls <var>predicate</var> on each element of <var>seq</var>
in turn; if <var>predicate</var> returns a non-<code>nil</code> value,
<code>cl-some</code> returns that value, otherwise it returns <code>nil</code>. 
Given several sequence arguments, it steps through the sequences
in parallel until the shortest one runs out, just as in
<code>cl-mapcar</code>.  You can rely on the left-to-right order in which
the elements are visited, and on the fact that mapping stops
immediately as soon as <var>predicate</var> returns non-<code>nil</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-every</b><var> predicate seq &amp;rest more-seqs<a name="index-cl_002devery-103"></a></var><br>
<blockquote><p>This function calls <var>predicate</var> on each element of the sequence(s)
in turn; it returns <code>nil</code> as soon as <var>predicate</var> returns
<code>nil</code> for any element, or <code>t</code> if the predicate was true
for all elements. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-notany</b><var> predicate seq &amp;rest more-seqs<a name="index-cl_002dnotany-104"></a></var><br>
<blockquote><p>This function calls <var>predicate</var> on each element of the sequence(s)
in turn; it returns <code>nil</code> as soon as <var>predicate</var> returns
a non-<code>nil</code> value for any element, or <code>t</code> if the predicate
was <code>nil</code> for all elements. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-notevery</b><var> predicate seq &amp;rest more-seqs<a name="index-cl_002dnotevery-105"></a></var><br>
<blockquote><p>This function calls <var>predicate</var> on each element of the sequence(s)
in turn; it returns a non-<code>nil</code> value as soon as <var>predicate</var>
returns <code>nil</code> for any element, or <code>t</code> if the predicate was
true for all elements. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-reduce</b><var> function seq </var><tt>&amp;key :from-end :start :end :initial-value :key</tt><var><a name="index-cl_002dreduce-106"></a></var><br>
<blockquote><p>This function combines the elements of <var>seq</var> using an associative
binary operation.  Suppose <var>function</var> is <code>*</code> and <var>seq</var> is
the list <code>(2 3 4 5)</code>.  The first two elements of the list are
combined with <code>(* 2 3) = 6</code>; this is combined with the next
element, <code>(* 6 4) = 24</code>, and that is combined with the final
element: <code>(* 24 5) = 120</code>.  Note that the <code>*</code> function happens
to be self-reducing, so that <code>(* 2 3 4 5)</code> has the same effect as
an explicit call to <code>cl-reduce</code>.

        <p>If <code>:from-end</code> is true, the reduction is right-associative instead
of left-associative:

     <pre class="example">          (cl-reduce '- '(1 2 3 4))
                  == (- (- (- 1 2) 3) 4) =&gt; -8
          (cl-reduce '- '(1 2 3 4) :from-end t)
                  == (- 1 (- 2 (- 3 4))) =&gt; -2
     </pre>
        <p>If <code>:key</code> is specified, it is a function of one argument, which
is called on each of the sequence elements in turn.

        <p>If <code>:initial-value</code> is specified, it is effectively added to the
front (or rear in the case of <code>:from-end</code>) of the sequence. 
The <code>:key</code> function is <em>not</em> applied to the initial value.

        <p>If the sequence, including the initial value, has exactly one element
then that element is returned without ever calling <var>function</var>. 
If the sequence is empty (and there is no initial value), then
<var>function</var> is called with no arguments to obtain the return value. 
</p></blockquote></div>

   <p>All of these mapping operations can be expressed conveniently in
terms of the <code>cl-loop</code> macro.  In compiled code, <code>cl-loop</code> will
be faster since it generates the loop as in-line code with no
function calls.

<div class="node">
<p><hr>
<a name="Sequence-Functions"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Searching-Sequences">Searching Sequences</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Mapping-over-Sequences">Mapping over Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sequences">Sequences</a>

</div>

<h3 class="section">9.3 Sequence Functions</h3>

<p class="noindent">This section describes a number of Common Lisp functions for
operating on sequences.

<div class="defun">
&mdash; Function: <b>cl-subseq</b><var> sequence start &amp;optional end<a name="index-cl_002dsubseq-107"></a></var><br>
<blockquote><p>This function returns a given subsequence of the argument
<var>sequence</var>, which may be a list, string, or vector. 
The indices <var>start</var> and <var>end</var> must be in range, and
<var>start</var> must be no greater than <var>end</var>.  If <var>end</var>
is omitted, it defaults to the length of the sequence.  The
return value is always a copy; it does not share structure
with <var>sequence</var>.

        <p>As an extension to Common Lisp, <var>start</var> and/or <var>end</var>
may be negative, in which case they represent a distance back
from the end of the sequence.  This is for compatibility with
Emacs's <code>substring</code> function.  Note that <code>cl-subseq</code> is
the <em>only</em> sequence function that allows negative
<var>start</var> and <var>end</var>.

        <p>You can use <code>setf</code> on a <code>cl-subseq</code> form to replace a
specified range of elements with elements from another sequence. 
The replacement is done as if by <code>cl-replace</code>, described below. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-concatenate</b><var> result-type &amp;rest seqs<a name="index-cl_002dconcatenate-108"></a></var><br>
<blockquote><p>This function concatenates the argument sequences together to
form a result sequence of type <var>result-type</var>, one of the
symbols <code>vector</code>, <code>string</code>, or <code>list</code>.  The
arguments are always copied, even in cases such as
<code>(cl-concatenate 'list '(1 2 3))</code> where the result is
identical to an argument. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-fill</b><var> seq item </var><tt>&amp;key :start :end</tt><var><a name="index-cl_002dfill-109"></a></var><br>
<blockquote><p>This function fills the elements of the sequence (or the specified
part of the sequence) with the value <var>item</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-replace</b><var> seq1 seq2 </var><tt>&amp;key :start1 :end1 :start2 :end2</tt><var><a name="index-cl_002dreplace-110"></a></var><br>
<blockquote><p>This function copies part of <var>seq2</var> into part of <var>seq1</var>. 
The sequence <var>seq1</var> is not stretched or resized; the amount
of data copied is simply the shorter of the source and destination
(sub)sequences.  The function returns <var>seq1</var>.

        <p>If <var>seq1</var> and <var>seq2</var> are <code>eq</code>, then the replacement
will work correctly even if the regions indicated by the start
and end arguments overlap.  However, if <var>seq1</var> and <var>seq2</var>
are lists that share storage but are not <code>eq</code>, and the
start and end arguments specify overlapping regions, the effect
is undefined. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-remove</b><var> item seq </var><tt>&amp;key :test :test-not :key :count :start :end :from-end</tt><var><a name="index-cl_002dremove-111"></a></var><br>
<blockquote><p>This returns a copy of <var>seq</var> with all elements matching
<var>item</var> removed.  The result may share storage with or be
<code>eq</code> to <var>seq</var> in some circumstances, but the original
<var>seq</var> will not be modified.  The <code>:test</code>, <code>:test-not</code>,
and <code>:key</code> arguments define the matching test that is used;
by default, elements <code>eql</code> to <var>item</var> are removed.  The
<code>:count</code> argument specifies the maximum number of matching
elements that can be removed (only the leftmost <var>count</var> matches
are removed).  The <code>:start</code> and <code>:end</code> arguments specify
a region in <var>seq</var> in which elements will be removed; elements
outside that region are not matched or removed.  The <code>:from-end</code>
argument, if true, says that elements should be deleted from the
end of the sequence rather than the beginning (this matters only
if <var>count</var> was also specified). 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-delete</b><var> item seq </var><tt>&amp;key :test :test-not :key :count :start :end :from-end</tt><var><a name="index-cl_002ddelete-112"></a></var><br>
<blockquote><p>This deletes all elements of <var>seq</var> that match <var>item</var>. 
It is a destructive operation.  Since Emacs Lisp does not support
stretchable strings or vectors, this is the same as <code>cl-remove</code>
for those sequence types.  On lists, <code>cl-remove</code> will copy the
list if necessary to preserve the original list, whereas
<code>cl-delete</code> will splice out parts of the argument list. 
Compare <code>append</code> and <code>nconc</code>, which are analogous
non-destructive and destructive list operations in Emacs Lisp. 
</p></blockquote></div>

   <p><a name="index-cl_002dremove_002dif-113"></a><a name="index-cl_002dremove_002dif_002dnot-114"></a><a name="index-cl_002ddelete_002dif-115"></a><a name="index-cl_002ddelete_002dif_002dnot-116"></a>The predicate-oriented functions <code>cl-remove-if</code>, <code>cl-remove-if-not</code>,
<code>cl-delete-if</code>, and <code>cl-delete-if-not</code> are defined similarly.

<div class="defun">
&mdash; Function: <b>cl-remove-duplicates</b><var> seq </var><tt>&amp;key :test :test-not :key :start :end :from-end</tt><var><a name="index-cl_002dremove_002dduplicates-117"></a></var><br>
<blockquote><p>This function returns a copy of <var>seq</var> with duplicate elements
removed.  Specifically, if two elements from the sequence match
according to the <code>:test</code>, <code>:test-not</code>, and <code>:key</code>
arguments, only the rightmost one is retained.  If <code>:from-end</code>
is true, the leftmost one is retained instead.  If <code>:start</code> or
<code>:end</code> is specified, only elements within that subsequence are
examined or removed. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-delete-duplicates</b><var> seq </var><tt>&amp;key :test :test-not :key :start :end :from-end</tt><var><a name="index-cl_002ddelete_002dduplicates-118"></a></var><br>
<blockquote><p>This function deletes duplicate elements from <var>seq</var>.  It is
a destructive version of <code>cl-remove-duplicates</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-substitute</b><var> new old seq </var><tt>&amp;key :test :test-not :key :count :start :end :from-end</tt><var><a name="index-cl_002dsubstitute-119"></a></var><br>
<blockquote><p>This function returns a copy of <var>seq</var>, with all elements
matching <var>old</var> replaced with <var>new</var>.  The <code>:count</code>,
<code>:start</code>, <code>:end</code>, and <code>:from-end</code> arguments may be
used to limit the number of substitutions made. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-nsubstitute</b><var> new old seq </var><tt>&amp;key :test :test-not :key :count :start :end :from-end</tt><var><a name="index-cl_002dnsubstitute-120"></a></var><br>
<blockquote><p>This is a destructive version of <code>cl-substitute</code>; it performs
the substitution using <code>setcar</code> or <code>aset</code> rather than
by returning a changed copy of the sequence. 
</p></blockquote></div>

   <p><a name="index-cl_002dsubstitute_002dif-121"></a><a name="index-cl_002dsubstitute_002dif_002dnot-122"></a><a name="index-cl_002dnsubstitute_002dif-123"></a><a name="index-cl_002dnsubstitute_002dif_002dnot-124"></a>The functions <code>cl-substitute-if</code>, <code>cl-substitute-if-not</code>,
<code>cl-nsubstitute-if</code>, and <code>cl-nsubstitute-if-not</code> are defined
similarly.  For these, a <var>predicate</var> is given in place of the
<var>old</var> argument.

<div class="node">
<p><hr>
<a name="Searching-Sequences"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sorting-Sequences">Sorting Sequences</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sequence-Functions">Sequence Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sequences">Sequences</a>

</div>

<h3 class="section">9.4 Searching Sequences</h3>

<p class="noindent">These functions search for elements or subsequences in a sequence. 
(See also <code>cl-member</code> and <code>cl-assoc</code>; see <a href="#Lists">Lists</a>.)

<div class="defun">
&mdash; Function: <b>cl-find</b><var> item seq </var><tt>&amp;key :test :test-not :key :start :end :from-end</tt><var><a name="index-cl_002dfind-125"></a></var><br>
<blockquote><p>This function searches <var>seq</var> for an element matching <var>item</var>. 
If it finds a match, it returns the matching element.  Otherwise,
it returns <code>nil</code>.  It returns the leftmost match, unless
<code>:from-end</code> is true, in which case it returns the rightmost
match.  The <code>:start</code> and <code>:end</code> arguments may be used to
limit the range of elements that are searched. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-position</b><var> item seq </var><tt>&amp;key :test :test-not :key :start :end :from-end</tt><var><a name="index-cl_002dposition-126"></a></var><br>
<blockquote><p>This function is like <code>cl-find</code>, except that it returns the
integer position in the sequence of the matching item rather than
the item itself.  The position is relative to the start of the
sequence as a whole, even if <code>:start</code> is non-zero.  The function
returns <code>nil</code> if no matching element was found. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-count</b><var> item seq </var><tt>&amp;key :test :test-not :key :start :end</tt><var><a name="index-cl_002dcount-127"></a></var><br>
<blockquote><p>This function returns the number of elements of <var>seq</var> which
match <var>item</var>.  The result is always a nonnegative integer. 
</p></blockquote></div>

   <p><a name="index-cl_002dfind_002dif-128"></a><a name="index-cl_002dfind_002dif_002dnot-129"></a><a name="index-cl_002dposition_002dif-130"></a><a name="index-cl_002dposition_002dif_002dnot-131"></a><a name="index-cl_002dcount_002dif-132"></a><a name="index-cl_002dcount_002dif_002dnot-133"></a>The <code>cl-find-if</code>, <code>cl-find-if-not</code>, <code>cl-position-if</code>,
<code>cl-position-if-not</code>, <code>cl-count-if</code>, and <code>cl-count-if-not</code>
functions are defined similarly.

<div class="defun">
&mdash; Function: <b>cl-mismatch</b><var> seq1 seq2 </var><tt>&amp;key :test :test-not :key :start1 :end1 :start2 :end2 :from-end</tt><var><a name="index-cl_002dmismatch-134"></a></var><br>
<blockquote><p>This function compares the specified parts of <var>seq1</var> and
<var>seq2</var>.  If they are the same length and the corresponding
elements match (according to <code>:test</code>, <code>:test-not</code>,
and <code>:key</code>), the function returns <code>nil</code>.  If there is
a mismatch, the function returns the index (relative to <var>seq1</var>)
of the first mismatching element.  This will be the leftmost pair of
elements that do not match, or the position at which the shorter of
the two otherwise-matching sequences runs out.

        <p>If <code>:from-end</code> is true, then the elements are compared from right
to left starting at <code>(1- </code><var>end1</var><code>)</code> and <code>(1- </code><var>end2</var><code>)</code>. 
If the sequences differ, then one plus the index of the rightmost
difference (relative to <var>seq1</var>) is returned.

        <p>An interesting example is <code>(cl-mismatch str1 str2 :key 'upcase)</code>,
which compares two strings case-insensitively. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-search</b><var> seq1 seq2 </var><tt>&amp;key :test :test-not :key :from-end :start1 :end1 :start2 :end2</tt><var><a name="index-cl_002dsearch-135"></a></var><br>
<blockquote><p>This function searches <var>seq2</var> for a subsequence that matches
<var>seq1</var> (or part of it specified by <code>:start1</code> and
<code>:end1</code>).  Only matches that fall entirely within the region
defined by <code>:start2</code> and <code>:end2</code> will be considered. 
The return value is the index of the leftmost element of the
leftmost match, relative to the start of <var>seq2</var>, or <code>nil</code>
if no matches were found.  If <code>:from-end</code> is true, the
function finds the <em>rightmost</em> matching subsequence. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Sorting-Sequences"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Searching-Sequences">Searching Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sequences">Sequences</a>

</div>

<h3 class="section">9.5 Sorting Sequences</h3>

<div class="defun">
&mdash; Function: <b>cl-sort</b><var> seq predicate </var><tt>&amp;key :key</tt><var><a name="index-cl_002dsort-136"></a></var><br>
<blockquote><p>This function sorts <var>seq</var> into increasing order as determined
by using <var>predicate</var> to compare pairs of elements.  <var>predicate</var>
should return true (non-<code>nil</code>) if and only if its first argument
is less than (not equal to) its second argument.  For example,
<code>&lt;</code> and <code>string-lessp</code> are suitable predicate functions
for sorting numbers and strings, respectively; <code>&gt;</code> would sort
numbers into decreasing rather than increasing order.

        <p>This function differs from Emacs's built-in <code>sort</code> in that it
can operate on any type of sequence, not just lists.  Also, it
accepts a <code>:key</code> argument, which is used to preprocess data
fed to the <var>predicate</var> function.  For example,

     <pre class="example">          (setq data (cl-sort data 'string-lessp :key 'downcase))
     </pre>
        <p class="noindent">sorts <var>data</var>, a sequence of strings, into increasing alphabetical
order without regard to case.  A <code>:key</code> function of <code>car</code>
would be useful for sorting association lists.  It should only be a
simple accessor though, since it's used heavily in the current
implementation.

        <p>The <code>cl-sort</code> function is destructive; it sorts lists by actually
rearranging the <span class="sc">cdr</span> pointers in suitable fashion. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-stable-sort</b><var> seq predicate </var><tt>&amp;key :key</tt><var><a name="index-cl_002dstable_002dsort-137"></a></var><br>
<blockquote><p>This function sorts <var>seq</var> <dfn>stably</dfn>, meaning two elements
which are equal in terms of <var>predicate</var> are guaranteed not to
be rearranged out of their original order by the sort.

        <p>In practice, <code>cl-sort</code> and <code>cl-stable-sort</code> are equivalent
in Emacs Lisp because the underlying <code>sort</code> function is
stable by default.  However, this package reserves the right to
use non-stable methods for <code>cl-sort</code> in the future. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-merge</b><var> type seq1 seq2 predicate </var><tt>&amp;key :key</tt><var><a name="index-cl_002dmerge-138"></a></var><br>
<blockquote><p>This function merges two sequences <var>seq1</var> and <var>seq2</var> by
interleaving their elements.  The result sequence, of type <var>type</var>
(in the sense of <code>cl-concatenate</code>), has length equal to the sum
of the lengths of the two input sequences.  The sequences may be
modified destructively.  Order of elements within <var>seq1</var> and
<var>seq2</var> is preserved in the interleaving; elements of the two
sequences are compared by <var>predicate</var> (in the sense of
<code>sort</code>) and the lesser element goes first in the result. 
When elements are equal, those from <var>seq1</var> precede those from
<var>seq2</var> in the result.  Thus, if <var>seq1</var> and <var>seq2</var> are
both sorted according to <var>predicate</var>, then the result will be
a merged sequence which is (stably) sorted according to
<var>predicate</var>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Lists"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Structures">Structures</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sequences">Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">10 Lists</h2>

<p class="noindent">The functions described here operate on lists.

<ul class="menu">
<li><a accesskey="1" href="#List-Functions">List Functions</a>:                 <code>cl-caddr</code>, <code>cl-first</code>, <code>cl-list*</code>, etc. 
<li><a accesskey="2" href="#Substitution-of-Expressions">Substitution of Expressions</a>:    <code>cl-subst</code>, <code>cl-sublis</code>, etc. 
<li><a accesskey="3" href="#Lists-as-Sets">Lists as Sets</a>:                  <code>cl-member</code>, <code>cl-adjoin</code>, <code>cl-union</code>, etc. 
<li><a accesskey="4" href="#Association-Lists">Association Lists</a>:              <code>cl-assoc</code>, <code>cl-acons</code>, <code>cl-pairlis</code>, etc. 
</ul>

<div class="node">
<p><hr>
<a name="List-Functions"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Substitution-of-Expressions">Substitution of Expressions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Lists">Lists</a>

</div>

<h3 class="section">10.1 List Functions</h3>

<p class="noindent">This section describes a number of simple operations on lists,
i.e., chains of cons cells.

<div class="defun">
&mdash; Function: <b>cl-caddr</b><var> x<a name="index-cl_002dcaddr-139"></a></var><br>
<blockquote><p>This function is equivalent to <code>(car (cdr (cdr </code><var>x</var><code>)))</code>. 
Likewise, this package defines all 24 <code>c</code><var>xxx</var><code>r</code> functions
where <var>xxx</var> is up to four `<samp><span class="samp">a</span></samp>'s and/or `<samp><span class="samp">d</span></samp>'s. 
All of these functions are <code>setf</code>-able, and calls to them
are expanded inline by the byte-compiler for maximum efficiency. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-first</b><var> x<a name="index-cl_002dfirst-140"></a></var><br>
<blockquote><p>This function is a synonym for <code>(car </code><var>x</var><code>)</code>.  Likewise,
the functions <code>cl-second</code>, <code>cl-third</code>, <small class="dots">...</small>, through
<code>cl-tenth</code> return the given element of the list <var>x</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-rest</b><var> x<a name="index-cl_002drest-141"></a></var><br>
<blockquote><p>This function is a synonym for <code>(cdr </code><var>x</var><code>)</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-endp</b><var> x<a name="index-cl_002dendp-142"></a></var><br>
<blockquote><p>This function acts like <code>null</code>, but signals an error if <code>x</code>
is neither a <code>nil</code> nor a cons cell. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-list-length</b><var> x<a name="index-cl_002dlist_002dlength-143"></a></var><br>
<blockquote><p>This function returns the length of list <var>x</var>, exactly like
<code>(length </code><var>x</var><code>)</code>, except that if <var>x</var> is a circular
list (where the <span class="sc">cdr</span>-chain forms a loop rather than terminating
with <code>nil</code>), this function returns <code>nil</code>.  (The regular
<code>length</code> function would get stuck if given a circular list. 
See also the <code>safe-length</code> function.) 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-list*</b><var> arg &amp;rest others<a name="index-cl_002dlist_002a-144"></a></var><br>
<blockquote><p>This function constructs a list of its arguments.  The final
argument becomes the <span class="sc">cdr</span> of the last cell constructed. 
Thus, <code>(cl-list* </code><var>a</var> <var>b</var> <var>c</var><code>)</code> is equivalent to
<code>(cons </code><var>a</var><code> (cons </code><var>b</var> <var>c</var><code>))</code>, and
<code>(cl-list* </code><var>a</var> <var>b</var><code> nil)</code> is equivalent to
<code>(list </code><var>a</var> <var>b</var><code>)</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-ldiff</b><var> list sublist<a name="index-cl_002dldiff-145"></a></var><br>
<blockquote><p>If <var>sublist</var> is a sublist of <var>list</var>, i.e., is <code>eq</code> to
one of the cons cells of <var>list</var>, then this function returns
a copy of the part of <var>list</var> up to but not including
<var>sublist</var>.  For example, <code>(cl-ldiff x (cddr x))</code> returns
the first two elements of the list <code>x</code>.  The result is a
copy; the original <var>list</var> is not modified.  If <var>sublist</var>
is not a sublist of <var>list</var>, a copy of the entire <var>list</var>
is returned. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-copy-list</b><var> list<a name="index-cl_002dcopy_002dlist-146"></a></var><br>
<blockquote><p>This function returns a copy of the list <var>list</var>.  It copies
dotted lists like <code>(1 2 . 3)</code> correctly. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-tree-equal</b><var> x y </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dtree_002dequal-147"></a></var><br>
<blockquote><p>This function compares two trees of cons cells.  If <var>x</var> and
<var>y</var> are both cons cells, their <span class="sc">car</span>s and <span class="sc">cdr</span>s are
compared recursively.  If neither <var>x</var> nor <var>y</var> is a cons
cell, they are compared by <code>eql</code>, or according to the
specified test.  The <code>:key</code> function, if specified, is
applied to the elements of both trees.  See <a href="#Sequences">Sequences</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Substitution-of-Expressions"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Lists-as-Sets">Lists as Sets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#List-Functions">List Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Lists">Lists</a>

</div>

<h3 class="section">10.2 Substitution of Expressions</h3>

<p class="noindent">These functions substitute elements throughout a tree of cons
cells.  (See <a href="#Sequence-Functions">Sequence Functions</a>, for the <code>cl-substitute</code>
function, which works on just the top-level elements of a list.)

<div class="defun">
&mdash; Function: <b>cl-subst</b><var> new old tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dsubst-148"></a></var><br>
<blockquote><p>This function substitutes occurrences of <var>old</var> with <var>new</var>
in <var>tree</var>, a tree of cons cells.  It returns a substituted
tree, which will be a copy except that it may share storage with
the argument <var>tree</var> in parts where no substitutions occurred. 
The original <var>tree</var> is not modified.  This function recurses
on, and compares against <var>old</var>, both <span class="sc">car</span>s and <span class="sc">cdr</span>s
of the component cons cells.  If <var>old</var> is itself a cons cell,
then matching cells in the tree are substituted as usual without
recursively substituting in that cell.  Comparisons with <var>old</var>
are done according to the specified test (<code>eql</code> by default). 
The <code>:key</code> function is applied to the elements of the tree
but not to <var>old</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-nsubst</b><var> new old tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dnsubst-149"></a></var><br>
<blockquote><p>This function is like <code>cl-subst</code>, except that it works by
destructive modification (by <code>setcar</code> or <code>setcdr</code>)
rather than copying. 
</p></blockquote></div>

   <p><a name="index-cl_002dsubst_002dif-150"></a><a name="index-cl_002dsubst_002dif_002dnot-151"></a><a name="index-cl_002dnsubst_002dif-152"></a><a name="index-cl_002dnsubst_002dif_002dnot-153"></a>The <code>cl-subst-if</code>, <code>cl-subst-if-not</code>, <code>cl-nsubst-if</code>, and
<code>cl-nsubst-if-not</code> functions are defined similarly.

<div class="defun">
&mdash; Function: <b>cl-sublis</b><var> alist tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dsublis-154"></a></var><br>
<blockquote><p>This function is like <code>cl-subst</code>, except that it takes an
association list <var>alist</var> of <var>old</var>-<var>new</var> pairs. 
Each element of the tree (after applying the <code>:key</code>
function, if any), is compared with the <span class="sc">car</span>s of
<var>alist</var>; if it matches, it is replaced by the corresponding
<span class="sc">cdr</span>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-nsublis</b><var> alist tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dnsublis-155"></a></var><br>
<blockquote><p>This is a destructive version of <code>cl-sublis</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Lists-as-Sets"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Association-Lists">Association Lists</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Substitution-of-Expressions">Substitution of Expressions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Lists">Lists</a>

</div>

<h3 class="section">10.3 Lists as Sets</h3>

<p class="noindent">These functions perform operations on lists that represent sets
of elements.

<div class="defun">
&mdash; Function: <b>cl-member</b><var> item list </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dmember-156"></a></var><br>
<blockquote><p>This function searches <var>list</var> for an element matching <var>item</var>. 
If a match is found, it returns the cons cell whose <span class="sc">car</span> was
the matching element.  Otherwise, it returns <code>nil</code>.  Elements
are compared by <code>eql</code> by default; you can use the <code>:test</code>,
<code>:test-not</code>, and <code>:key</code> arguments to modify this behavior. 
See <a href="#Sequences">Sequences</a>.

        <p>The standard Emacs lisp function <code>member</code> uses <code>equal</code> for
comparisons; it is equivalent to <code>(cl-member </code><var>item</var> <var>list</var><code>
:test 'equal)</code>.  With no keyword arguments, <code>cl-member</code> is
equivalent to <code>memq</code>. 
</p></blockquote></div>

   <p><a name="index-cl_002dmember_002dif-157"></a><a name="index-cl_002dmember_002dif_002dnot-158"></a>The <code>cl-member-if</code> and <code>cl-member-if-not</code> functions
analogously search for elements that satisfy a given predicate.

<div class="defun">
&mdash; Function: <b>cl-tailp</b><var> sublist list<a name="index-cl_002dtailp-159"></a></var><br>
<blockquote><p>This function returns <code>t</code> if <var>sublist</var> is a sublist of
<var>list</var>, i.e., if <var>sublist</var> is <code>eql</code> to <var>list</var> or to
any of its <span class="sc">cdr</span>s. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-adjoin</b><var> item list </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dadjoin-160"></a></var><br>
<blockquote><p>This function conses <var>item</var> onto the front of <var>list</var>,
like <code>(cons </code><var>item</var> <var>list</var><code>)</code>, but only if <var>item</var>
is not already present on the list (as determined by <code>cl-member</code>). 
If a <code>:key</code> argument is specified, it is applied to
<var>item</var> as well as to the elements of <var>list</var> during
the search, on the reasoning that <var>item</var> is &ldquo;about&rdquo; to
become part of the list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-union</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dunion-161"></a></var><br>
<blockquote><p>This function combines two lists that represent sets of items,
returning a list that represents the union of those two sets. 
The resulting list contains all items that appear in <var>list1</var>
or <var>list2</var>, and no others.  If an item appears in both
<var>list1</var> and <var>list2</var> it is copied only once.  If
an item is duplicated in <var>list1</var> or <var>list2</var>, it is
undefined whether or not that duplication will survive in the
result list.  The order of elements in the result list is also
undefined. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-nunion</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dnunion-162"></a></var><br>
<blockquote><p>This is a destructive version of <code>cl-union</code>; rather than copying,
it tries to reuse the storage of the argument lists if possible. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-intersection</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dintersection-163"></a></var><br>
<blockquote><p>This function computes the intersection of the sets represented
by <var>list1</var> and <var>list2</var>.  It returns the list of items
that appear in both <var>list1</var> and <var>list2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-nintersection</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dnintersection-164"></a></var><br>
<blockquote><p>This is a destructive version of <code>cl-intersection</code>.  It
tries to reuse storage of <var>list1</var> rather than copying. 
It does <em>not</em> reuse the storage of <var>list2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-set-difference</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dset_002ddifference-165"></a></var><br>
<blockquote><p>This function computes the &ldquo;set difference&rdquo; of <var>list1</var>
and <var>list2</var>, i.e., the set of elements that appear in
<var>list1</var> but <em>not</em> in <var>list2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-nset-difference</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dnset_002ddifference-166"></a></var><br>
<blockquote><p>This is a destructive <code>cl-set-difference</code>, which will try
to reuse <var>list1</var> if possible. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-set-exclusive-or</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dset_002dexclusive_002dor-167"></a></var><br>
<blockquote><p>This function computes the &ldquo;set exclusive or&rdquo; of <var>list1</var>
and <var>list2</var>, i.e., the set of elements that appear in
exactly one of <var>list1</var> and <var>list2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-nset-exclusive-or</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dnset_002dexclusive_002dor-168"></a></var><br>
<blockquote><p>This is a destructive <code>cl-set-exclusive-or</code>, which will try
to reuse <var>list1</var> and <var>list2</var> if possible. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-subsetp</b><var> list1 list2 </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dsubsetp-169"></a></var><br>
<blockquote><p>This function checks whether <var>list1</var> represents a subset
of <var>list2</var>, i.e., whether every element of <var>list1</var>
also appears in <var>list2</var>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Association-Lists"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Lists-as-Sets">Lists as Sets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Lists">Lists</a>

</div>

<h3 class="section">10.4 Association Lists</h3>

<p class="noindent">An <dfn>association list</dfn> is a list representing a mapping from
one set of values to another; any list whose elements are cons
cells is an association list.

<div class="defun">
&mdash; Function: <b>cl-assoc</b><var> item a-list </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002dassoc-170"></a></var><br>
<blockquote><p>This function searches the association list <var>a-list</var> for an
element whose <span class="sc">car</span> matches (in the sense of <code>:test</code>,
<code>:test-not</code>, and <code>:key</code>, or by comparison with <code>eql</code>)
a given <var>item</var>.  It returns the matching element, if any,
otherwise <code>nil</code>.  It ignores elements of <var>a-list</var> that
are not cons cells.  (This corresponds to the behavior of
<code>assq</code> and <code>assoc</code> in Emacs Lisp; Common Lisp's
<code>assoc</code> ignores <code>nil</code>s but considers any other non-cons
elements of <var>a-list</var> to be an error.) 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-rassoc</b><var> item a-list </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-cl_002drassoc-171"></a></var><br>
<blockquote><p>This function searches for an element whose <span class="sc">cdr</span> matches
<var>item</var>.  If <var>a-list</var> represents a mapping, this applies
the inverse of the mapping to <var>item</var>. 
</p></blockquote></div>

   <p><a name="index-cl_002dassoc_002dif-172"></a><a name="index-cl_002dassoc_002dif_002dnot-173"></a><a name="index-cl_002drassoc_002dif-174"></a><a name="index-cl_002drassoc_002dif_002dnot-175"></a>The <code>cl-assoc-if</code>, <code>cl-assoc-if-not</code>, <code>cl-rassoc-if</code>,
and <code>cl-rassoc-if-not</code> functions are defined similarly.

   <p>Two simple functions for constructing association lists are:

<div class="defun">
&mdash; Function: <b>cl-acons</b><var> key value alist<a name="index-cl_002dacons-176"></a></var><br>
<blockquote><p>This is equivalent to <code>(cons (cons </code><var>key</var> <var>value</var><code>) </code><var>alist</var><code>)</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-pairlis</b><var> keys values &amp;optional alist<a name="index-cl_002dpairlis-177"></a></var><br>
<blockquote><p>This is equivalent to <code>(nconc (cl-mapcar 'cons </code><var>keys</var> <var>values</var><code>)
</code><var>alist</var><code>)</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Structures"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Assertions">Assertions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Lists">Lists</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">11 Structures</h2>

<p class="noindent">The Common Lisp <dfn>structure</dfn> mechanism provides a general way
to define data types similar to C's <code>struct</code> types.  A
structure is a Lisp object containing some number of <dfn>slots</dfn>,
each of which can hold any Lisp data object.  Functions are
provided for accessing and setting the slots, creating or copying
structure objects, and recognizing objects of a particular structure
type.

   <p>In true Common Lisp, each structure type is a new type distinct
from all existing Lisp types.  Since the underlying Emacs Lisp
system provides no way to create new distinct types, this package
implements structures as vectors (or lists upon request) with a
special &ldquo;tag&rdquo; symbol to identify them.

<div class="defun">
&mdash; Macro: <b>cl-defstruct</b><var> name slots<small class="dots">...</small><a name="index-cl_002ddefstruct-178"></a></var><br>
<blockquote><p>The <code>cl-defstruct</code> form defines a new structure type called
<var>name</var>, with the specified <var>slots</var>.  (The <var>slots</var>
may begin with a string which documents the structure type.) 
In the simplest case, <var>name</var> and each of the <var>slots</var>
are symbols.  For example,

     <pre class="example">          (cl-defstruct person name age sex)
     </pre>
        <p class="noindent">defines a struct type called <code>person</code> that contains three
slots.  Given a <code>person</code> object <var>p</var>, you can access those
slots by calling <code>(person-name </code><var>p</var><code>)</code>, <code>(person-age </code><var>p</var><code>)</code>,
and <code>(person-sex </code><var>p</var><code>)</code>.  You can also change these slots by
using <code>setf</code> on any of these place forms, for example:

     <pre class="example">          (cl-incf (person-age birthday-boy))
     </pre>
        <p>You can create a new <code>person</code> by calling <code>make-person</code>,
which takes keyword arguments <code>:name</code>, <code>:age</code>, and
<code>:sex</code> to specify the initial values of these slots in the
new object.  (Omitting any of these arguments leaves the corresponding
slot &ldquo;undefined&rdquo;, according to the Common Lisp standard; in Emacs
Lisp, such uninitialized slots are filled with <code>nil</code>.)

        <p>Given a <code>person</code>, <code>(copy-person </code><var>p</var><code>)</code> makes a new
object of the same type whose slots are <code>eq</code> to those of <var>p</var>.

        <p>Given any Lisp object <var>x</var>, <code>(person-p </code><var>x</var><code>)</code> returns
true if <var>x</var> looks like a <code>person</code>, and false otherwise.  (Again,
in Common Lisp this predicate would be exact; in Emacs Lisp the
best it can do is verify that <var>x</var> is a vector of the correct
length that starts with the correct tag symbol.)

        <p>Accessors like <code>person-name</code> normally check their arguments
(effectively using <code>person-p</code>) and signal an error if the
argument is the wrong type.  This check is affected by
<code>(optimize (safety ...))</code> declarations.  Safety level 1,
the default, uses a somewhat optimized check that will detect all
incorrect arguments, but may use an uninformative error message
(e.g., &ldquo;expected a vector&rdquo; instead of &ldquo;expected a <code>person</code>&rdquo;). 
Safety level 0 omits all checks except as provided by the underlying
<code>aref</code> call; safety levels 2 and 3 do rigorous checking that will
always print a descriptive error message for incorrect inputs. 
See <a href="#Declarations">Declarations</a>.

     <pre class="example">          (setq dave (make-person :name "Dave" :sex 'male))
               =&gt; [cl-struct-person "Dave" nil male]
          (setq other (copy-person dave))
               =&gt; [cl-struct-person "Dave" nil male]
          (eq dave other)
               =&gt; nil
          (eq (person-name dave) (person-name other))
               =&gt; t
          (person-p dave)
               =&gt; t
          (person-p [1 2 3 4])
               =&gt; nil
          (person-p "Bogus")
               =&gt; nil
          (person-p '[cl-struct-person counterfeit person object])
               =&gt; t
     </pre>
        <p>In general, <var>name</var> is either a name symbol or a list of a name
symbol followed by any number of <dfn>struct options</dfn>; each <var>slot</var>
is either a slot symbol or a list of the form `<samp><span class="samp">(</span><var>slot-name</var>
<var>default-value</var> <var>slot-options</var><span class="samp">...)</span></samp>'.  The <var>default-value</var>
is a Lisp form that is evaluated any time an instance of the
structure type is created without specifying that slot's value.

        <p>Common Lisp defines several slot options, but the only one
implemented in this package is <code>:read-only</code>.  A non-<code>nil</code>
value for this option means the slot should not be <code>setf</code>-able;
the slot's value is determined when the object is created and does
not change afterward.

     <pre class="example">          (cl-defstruct person
               (name nil :read-only t)
               age
               (sex 'unknown))
     </pre>
        <p>Any slot options other than <code>:read-only</code> are ignored.

        <p>For obscure historical reasons, structure options take a different
form than slot options.  A structure option is either a keyword
symbol, or a list beginning with a keyword symbol possibly followed
by arguments.  (By contrast, slot options are key-value pairs not
enclosed in lists.)

     <pre class="example">          (cl-defstruct (person (:constructor create-person)
                                (:type list)
                                :named)
               name age sex)
     </pre>
        <p>The following structure options are recognized.

          <dl>
<dt><code>:conc-name</code><dd>The argument is a symbol whose print name is used as the prefix for
the names of slot accessor functions.  The default is the name of
the struct type followed by a hyphen.  The option <code>(:conc-name p-)</code>
would change this prefix to <code>p-</code>.  Specifying <code>nil</code> as an
argument means no prefix, so that the slot names themselves are used
to name the accessor functions.

          <br><dt><code>:constructor</code><dd>In the simple case, this option takes one argument which is an
alternate name to use for the constructor function.  The default
is <code>make-</code><var>name</var>, e.g., <code>make-person</code>.  The above
example changes this to <code>create-person</code>.  Specifying <code>nil</code>
as an argument means that no standard constructor should be
generated at all.

          <p>In the full form of this option, the constructor name is followed
by an arbitrary argument list.  See <a href="#Program-Structure">Program Structure</a>, for a
description of the format of Common Lisp argument lists.  All
options, such as <code>&amp;rest</code> and <code>&amp;key</code>, are supported. 
The argument names should match the slot names; each slot is
initialized from the corresponding argument.  Slots whose names
do not appear in the argument list are initialized based on the
<var>default-value</var> in their slot descriptor.  Also, <code>&amp;optional</code>
and <code>&amp;key</code> arguments that don't specify defaults take their
defaults from the slot descriptor.  It is valid to include arguments
that don't correspond to slot names; these are useful if they are
referred to in the defaults for optional, keyword, or <code>&amp;aux</code>
arguments that <em>do</em> correspond to slots.

          <p>You can specify any number of full-format <code>:constructor</code>
options on a structure.  The default constructor is still generated
as well unless you disable it with a simple-format <code>:constructor</code>
option.

          <pre class="example">               (cl-defstruct
                   (person
                    (:constructor nil)   ; no default constructor
                    (:constructor new-person
                                  (name sex &amp;optional (age 0)))
                    (:constructor new-hound (&amp;key (name "Rover")
                                                  (dog-years 0)
                                             &amp;aux (age (* 7 dog-years))
                                                  (sex 'canine))))
                   name age sex)
          </pre>
          <p>The first constructor here takes its arguments positionally rather
than by keyword.  (In official Common Lisp terminology, constructors
that work By Order of Arguments instead of by keyword are called
&ldquo;BOA constructors&rdquo;.  No, I'm not making this up.)  For example,
<code>(new-person "Jane" 'female)</code> generates a person whose slots
are <code>"Jane"</code>, 0, and <code>female</code>, respectively.

          <p>The second constructor takes two keyword arguments, <code>:name</code>,
which initializes the <code>name</code> slot and defaults to <code>"Rover"</code>,
and <code>:dog-years</code>, which does not itself correspond to a slot
but which is used to initialize the <code>age</code> slot.  The <code>sex</code>
slot is forced to the symbol <code>canine</code> with no syntax for
overriding it.

          <br><dt><code>:copier</code><dd>The argument is an alternate name for the copier function for
this type.  The default is <code>copy-</code><var>name</var>.  <code>nil</code>
means not to generate a copier function.  (In this implementation,
all copier functions are simply synonyms for <code>copy-sequence</code>.)

          <br><dt><code>:predicate</code><dd>The argument is an alternate name for the predicate that recognizes
objects of this type.  The default is <var>name</var><code>-p</code>.  <code>nil</code>
means not to generate a predicate function.  (If the <code>:type</code>
option is used without the <code>:named</code> option, no predicate is
ever generated.)

          <p>In true Common Lisp, <code>typep</code> is always able to recognize a
structure object even if <code>:predicate</code> was used.  In this
package, <code>cl-typep</code> simply looks for a function called
<var>typename</var><code>-p</code>, so it will work for structure types
only if they used the default predicate name.

          <br><dt><code>:include</code><dd>This option implements a very limited form of C++-style inheritance. 
The argument is the name of another structure type previously
created with <code>cl-defstruct</code>.  The effect is to cause the new
structure type to inherit all of the included structure's slots
(plus, of course, any new slots described by this struct's slot
descriptors).  The new structure is considered a &ldquo;specialization&rdquo;
of the included one.  In fact, the predicate and slot accessors
for the included type will also accept objects of the new type.

          <p>If there are extra arguments to the <code>:include</code> option after
the included-structure name, these options are treated as replacement
slot descriptors for slots in the included structure, possibly with
modified default values.  Borrowing an example from Steele:

          <pre class="example">               (cl-defstruct person name (age 0) sex)
                       =&gt; person
               (cl-defstruct (astronaut (:include person (age 45)))
                    helmet-size
                    (favorite-beverage 'tang))
                       =&gt; astronaut
               
               (setq joe (make-person :name "Joe"))
                    =&gt; [cl-struct-person "Joe" 0 nil]
               (setq buzz (make-astronaut :name "Buzz"))
                    =&gt; [cl-struct-astronaut "Buzz" 45 nil nil tang]
               
               (list (person-p joe) (person-p buzz))
                    =&gt; (t t)
               (list (astronaut-p joe) (astronaut-p buzz))
                    =&gt; (nil t)
               
               (person-name buzz)
                    =&gt; "Buzz"
               (astronaut-name joe)
                    =&gt; error: "astronaut-name accessing a non-astronaut"
          </pre>
          <p>Thus, if <code>astronaut</code> is a specialization of <code>person</code>,
then every <code>astronaut</code> is also a <code>person</code> (but not the
other way around).  Every <code>astronaut</code> includes all the slots
of a <code>person</code>, plus extra slots that are specific to
astronauts.  Operations that work on people (like <code>person-name</code>)
work on astronauts just like other people.

          <br><dt><code>:print-function</code><dd>In full Common Lisp, this option allows you to specify a function
that is called to print an instance of the structure type.  The
Emacs Lisp system offers no hooks into the Lisp printer which would
allow for such a feature, so this package simply ignores
<code>:print-function</code>.

          <br><dt><code>:type</code><dd>The argument should be one of the symbols <code>vector</code> or <code>list</code>. 
This tells which underlying Lisp data type should be used to implement
the new structure type.  Vectors are used by default, but
<code>(:type list)</code> will cause structure objects to be stored as
lists instead.

          <p>The vector representation for structure objects has the advantage
that all structure slots can be accessed quickly, although creating
vectors is a bit slower in Emacs Lisp.  Lists are easier to create,
but take a relatively long time accessing the later slots.

          <br><dt><code>:named</code><dd>This option, which takes no arguments, causes a characteristic &ldquo;tag&rdquo;
symbol to be stored at the front of the structure object.  Using
<code>:type</code> without also using <code>:named</code> will result in a
structure type stored as plain vectors or lists with no identifying
features.

          <p>The default, if you don't specify <code>:type</code> explicitly, is to
use named vectors.  Therefore, <code>:named</code> is only useful in
conjunction with <code>:type</code>.

          <pre class="example">               (cl-defstruct (person1) name age sex)
               (cl-defstruct (person2 (:type list) :named) name age sex)
               (cl-defstruct (person3 (:type list)) name age sex)
               
               (setq p1 (make-person1))
                    =&gt; [cl-struct-person1 nil nil nil]
               (setq p2 (make-person2))
                    =&gt; (person2 nil nil nil)
               (setq p3 (make-person3))
                    =&gt; (nil nil nil)
               
               (person1-p p1)
                    =&gt; t
               (person2-p p2)
                    =&gt; t
               (person3-p p3)
                    =&gt; error: function person3-p undefined
          </pre>
          <p>Since unnamed structures don't have tags, <code>cl-defstruct</code> is not
able to make a useful predicate for recognizing them.  Also,
accessors like <code>person3-name</code> will be generated but they
will not be able to do any type checking.  The <code>person3-name</code>
function, for example, will simply be a synonym for <code>car</code> in
this case.  By contrast, <code>person2-name</code> is able to verify
that its argument is indeed a <code>person2</code> object before
proceeding.

          <br><dt><code>:initial-offset</code><dd>The argument must be a nonnegative integer.  It specifies a
number of slots to be left &ldquo;empty&rdquo; at the front of the
structure.  If the structure is named, the tag appears at the
specified position in the list or vector; otherwise, the first
slot appears at that position.  Earlier positions are filled
with <code>nil</code> by the constructors and ignored otherwise.  If
the type <code>:include</code>s another type, then <code>:initial-offset</code>
specifies a number of slots to be skipped between the last slot
of the included type and the first new slot. 
</dl>
        </p></blockquote></div>

   <p>Except as noted, the <code>cl-defstruct</code> facility of this package is
entirely compatible with that of Common Lisp.

   <p>The <code>cl-defstruct</code> package also provides a few structure
introspection functions.

<div class="defun">
&mdash; Function: <b>cl-struct-sequence-type</b><var> struct-type<a name="index-cl_002dstruct_002dsequence_002dtype-179"></a></var><br>
<blockquote><p>This function returns the underlying data structure for
<code>struct-type</code>, which is a symbol.  It returns <code>vector</code> or
<code>list</code>, or <code>nil</code> if <code>struct-type</code> is not actually a
structure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-struct-slot-info</b><var> struct-type<a name="index-cl_002dstruct_002dslot_002dinfo-180"></a></var><br>
<blockquote><p>This function returns a list of slot descriptors for structure
<code>struct-type</code>.  Each entry in the list is <code>(name . opts)</code>,
where <code>name</code> is the name of the slot and <code>opts</code> is the list
of slot options given to <code>defstruct</code>.  Dummy entries represent
the slots used for the struct name and that are skipped to implement
<code>:initial-offset</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-struct-slot-offset</b><var> struct-type slot-name<a name="index-cl_002dstruct_002dslot_002doffset-181"></a></var><br>
<blockquote><p>Return the offset of slot <code>slot-name</code> in <code>struct-type</code>.  The
returned zero-based slot index is relative to the start of the
structure data type and is adjusted for any structure name and
:initial-offset slots.  Signal error if struct <code>struct-type</code> does
not contain <code>slot-name</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>cl-struct-slot-value</b><var> struct-type slot-name inst<a name="index-cl_002dstruct_002dslot_002dvalue-182"></a></var><br>
<blockquote><p>Return the value of slot <code>slot-name</code> in <code>inst</code> of
<code>struct-type</code>.  <code>struct</code> and <code>slot-name</code> are symbols. 
<code>inst</code> is a structure instance.  This routine is also a
<code>setf</code> place.  Can signal the same errors as <code>cl-struct-slot-offset</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Assertions"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Efficiency-Concerns">Efficiency Concerns</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Structures">Structures</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">12 Assertions and Errors</h2>

<p class="noindent">This section describes two macros that test <dfn>assertions</dfn>, i.e.,
conditions which must be true if the program is operating correctly. 
Assertions never add to the behavior of a Lisp program; they simply
make &ldquo;sanity checks&rdquo; to make sure everything is as it should be.

   <p>If the optimization property <code>speed</code> has been set to 3, and
<code>safety</code> is less than 3, then the byte-compiler will optimize
away the following assertions.  Because assertions might be optimized
away, it is a bad idea for them to include side-effects.

<div class="defun">
&mdash; Macro: <b>cl-assert</b><var> test-form </var>[<var>show-args string args<small class="dots">...</small></var>]<var><a name="index-cl_002dassert-183"></a></var><br>
<blockquote><p>This form verifies that <var>test-form</var> is true (i.e., evaluates to
a non-<code>nil</code> value).  If so, it returns <code>nil</code>.  If the test
is not satisfied, <code>cl-assert</code> signals an error.

        <p>A default error message will be supplied which includes <var>test-form</var>. 
You can specify a different error message by including a <var>string</var>
argument plus optional extra arguments.  Those arguments are simply
passed to <code>error</code> to signal the error.

        <p>If the optional second argument <var>show-args</var> is <code>t</code> instead
of <code>nil</code>, then the error message (with or without <var>string</var>)
will also include all non-constant arguments of the top-level
<var>form</var>.  For example:

     <pre class="example">          (cl-assert (&gt; x 10) t "x is too small: %d")
     </pre>
        <p>This usage of <var>show-args</var> is an extension to Common Lisp.  In
true Common Lisp, the second argument gives a list of <var>places</var>
which can be <code>setf</code>'d by the user before continuing from the
error.  Since Emacs Lisp does not support continuable errors, it
makes no sense to specify <var>places</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>cl-check-type</b><var> form type </var>[<var>string</var>]<var><a name="index-cl_002dcheck_002dtype-184"></a></var><br>
<blockquote><p>This form verifies that <var>form</var> evaluates to a value of type
<var>type</var>.  If so, it returns <code>nil</code>.  If not, <code>cl-check-type</code>
signals a <code>wrong-type-argument</code> error.  The default error message
lists the erroneous value along with <var>type</var> and <var>form</var>
themselves.  If <var>string</var> is specified, it is included in the
error message in place of <var>type</var>.  For example:

     <pre class="example">          (cl-check-type x (integer 1 *) "a positive integer")
     </pre>
        <p>See <a href="#Type-Predicates">Type Predicates</a>, for a description of the type specifiers
that may be used for <var>type</var>.

        <p>Note that in Common Lisp, the first argument to <code>check-type</code>
must be a <var>place</var> suitable for use by <code>setf</code>, because
<code>check-type</code> signals a continuable error that allows the
user to modify <var>place</var>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Efficiency-Concerns"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Common-Lisp-Compatibility">Common Lisp Compatibility</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assertions">Assertions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix A Efficiency Concerns</h2>

<h3 class="appendixsec">A.1 Macros</h3>

<p class="noindent">Many of the advanced features of this package, such as <code>cl-defun</code>,
<code>cl-loop</code>, etc., are implemented as Lisp macros.  In
byte-compiled code, these complex notations will be expanded into
equivalent Lisp code which is simple and efficient.  For example,
the form

<pre class="example">     (cl-incf i n)
</pre>
   <p class="noindent">is expanded at compile-time to the Lisp form

<pre class="example">     (setq i (+ i n))
</pre>
   <p class="noindent">which is the most efficient ways of doing this operation
in Lisp.  Thus, there is no performance penalty for using the more
readable <code>cl-incf</code> form in your compiled code.

   <p><em>Interpreted</em> code, on the other hand, must expand these macros
every time they are executed.  For this reason it is strongly
recommended that code making heavy use of macros be compiled. 
A loop using <code>cl-incf</code> a hundred times will execute considerably
faster if compiled, and will also garbage-collect less because the
macro expansion will not have to be generated, used, and thrown away a
hundred times.

   <p>You can find out how a macro expands by using the
<code>cl-prettyexpand</code> function.

<div class="defun">
&mdash; Function: <b>cl-prettyexpand</b><var> form &amp;optional full<a name="index-cl_002dprettyexpand-185"></a></var><br>
<blockquote><p>This function takes a single Lisp form as an argument and inserts
a nicely formatted copy of it in the current buffer (which must be
in Lisp mode so that indentation works properly).  It also expands
all Lisp macros that appear in the form.  The easiest way to use
this function is to go to the <samp><span class="file">*scratch*</span></samp> buffer and type, say,

     <pre class="example">          (cl-prettyexpand '(cl-loop for x below 10 collect x))
     </pre>
        <p class="noindent">and type <kbd>C-x C-e</kbd> immediately after the closing parenthesis;
an expansion similar to:

     <pre class="example">          (cl-block nil
               (let* ((x 0)
                      (G1004 nil))
                 (while (&lt; x 10)
                   (setq G1004 (cons x G1004))
                   (setq x (+ x 1)))
                 (nreverse G1004)))
     </pre>
        <p class="noindent">will be inserted into the buffer.  (The <code>cl-block</code> macro is
expanded differently in the interpreter and compiler, so
<code>cl-prettyexpand</code> just leaves it alone.  The temporary
variable <code>G1004</code> was created by <code>cl-gensym</code>.)

        <p>If the optional argument <var>full</var> is true, then <em>all</em>
macros are expanded, including <code>cl-block</code>, <code>cl-eval-when</code>,
and compiler macros.  Expansion is done as if <var>form</var> were
a top-level form in a file being compiled.

     <!-- FIXME none of these examples are still applicable. -->
<p>Note that <code>cl-adjoin</code>, <code>cl-caddr</code>, and <code>cl-member</code> all
have built-in compiler macros to optimize them in common cases. 
</p></blockquote></div>

<h3 class="appendixsec">A.2 Error Checking</h3>

<p class="noindent">Common Lisp compliance has in general not been sacrificed for the
sake of efficiency.  A few exceptions have been made for cases
where substantial gains were possible at the expense of marginal
incompatibility.

   <p>The Common Lisp standard (as embodied in Steele's book) uses the
phrase &ldquo;it is an error if&rdquo; to indicate a situation that is not
supposed to arise in complying programs; implementations are strongly
encouraged but not required to signal an error in these situations. 
This package sometimes omits such error checking in the interest of
compactness and efficiency.  For example, <code>cl-do</code> variable
specifiers are supposed to be lists of one, two, or three forms; extra
forms are ignored by this package rather than signaling a syntax
error.  Functions taking keyword arguments will accept an odd number
of arguments, treating the trailing keyword as if it were followed by
the value <code>nil</code>.

   <p>Argument lists (as processed by <code>cl-defun</code> and friends)
<em>are</em> checked rigorously except for the minor point just
mentioned; in particular, keyword arguments are checked for
validity, and <code>&amp;allow-other-keys</code> and <code>:allow-other-keys</code>
are fully implemented.  Keyword validity checking is slightly
time consuming (though not too bad in byte-compiled code);
you can use <code>&amp;allow-other-keys</code> to omit this check.  Functions
defined in this package such as <code>cl-find</code> and <code>cl-member</code>
do check their keyword arguments for validity.

<h3 class="appendixsec">A.3 Compiler Optimizations</h3>

<p class="noindent">Changing the value of <code>byte-optimize</code> from the default <code>t</code>
is highly discouraged; many of the Common
Lisp macros emit
code that can be improved by optimization.  In particular,
<code>cl-block</code>s (whether explicit or implicit in constructs like
<code>cl-defun</code> and <code>cl-loop</code>) carry a fair run-time penalty; the
byte-compiler removes <code>cl-block</code>s that are not actually
referenced by <code>cl-return</code> or <code>cl-return-from</code> inside the block.

<div class="node">
<p><hr>
<a name="Common-Lisp-Compatibility"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Porting-Common-Lisp">Porting Common Lisp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Efficiency-Concerns">Efficiency Concerns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix B Common Lisp Compatibility</h2>

<p class="noindent">The following is a list of all known incompatibilities between this
package and Common Lisp as documented in Steele (2nd edition).

   <p>The word <code>cl-defun</code> is required instead of <code>defun</code> in order
to use extended Common Lisp argument lists in a function.  Likewise,
<code>cl-defmacro</code> and <code>cl-function</code> are versions of those forms
which understand full-featured argument lists.  The <code>&amp;whole</code>
keyword does not work in <code>cl-defmacro</code> argument lists (except
inside recursive argument lists).

   <p>The <code>equal</code> predicate does not distinguish
between IEEE floating-point plus and minus zero.  The <code>cl-equalp</code>
predicate has several differences with Common Lisp; see <a href="#Predicates">Predicates</a>.

   <p>The <code>cl-do-all-symbols</code> form is the same as <code>cl-do-symbols</code>
with no <var>obarray</var> argument.  In Common Lisp, this form would
iterate over all symbols in all packages.  Since Emacs obarrays
are not a first-class package mechanism, there is no way for
<code>cl-do-all-symbols</code> to locate any but the default obarray.

   <p>The <code>cl-loop</code> macro is complete except that <code>loop-finish</code>
and type specifiers are unimplemented.

   <p>The multiple-value return facility treats lists as multiple
values, since Emacs Lisp cannot support multiple return values
directly.  The macros will be compatible with Common Lisp if
<code>cl-values</code> or <code>cl-values-list</code> is always used to return to
a <code>cl-multiple-value-bind</code> or other multiple-value receiver;
if <code>cl-values</code> is used without <code>cl-multiple-value-...</code>
or vice-versa the effect will be different from Common Lisp.

   <p>Many Common Lisp declarations are ignored, and others match
the Common Lisp standard in concept but not in detail.  For
example, local <code>special</code> declarations, which are purely
advisory in Emacs Lisp, do not rigorously obey the scoping rules
set down in Steele's book.

   <p>The variable <code>cl--gensym-counter</code> starts out with zero.

   <p>The <code>cl-defstruct</code> facility is compatible, except that structures
are of type <code>:type vector :named</code> by default rather than some
special, distinct type.  Also, the <code>:type</code> slot option is ignored.

   <p>The second argument of <code>cl-check-type</code> is treated differently.

<div class="node">
<p><hr>
<a name="Porting-Common-Lisp"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Obsolete-Features">Obsolete Features</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Common-Lisp-Compatibility">Common Lisp Compatibility</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix C Porting Common Lisp</h2>

<p class="noindent">This package is meant to be used as an extension to Emacs Lisp,
not as an Emacs implementation of true Common Lisp.  Some of the
remaining differences between Emacs Lisp and Common Lisp make it
difficult to port large Common Lisp applications to Emacs.  For
one, some of the features in this package are not fully compliant
with ANSI or Steele; see <a href="#Common-Lisp-Compatibility">Common Lisp Compatibility</a>.  But there
are also quite a few features that this package does not provide
at all.  Here are some major omissions that you will want to watch out
for when bringing Common Lisp code into Emacs.

     <ul>
<li>Case-insensitivity.  Symbols in Common Lisp are case-insensitive
by default.  Some programs refer to a function or variable as
<code>foo</code> in one place and <code>Foo</code> or <code>FOO</code> in another. 
Emacs Lisp will treat these as three distinct symbols.

     <p>Some Common Lisp code is written entirely in upper case.  While Emacs
is happy to let the program's own functions and variables use
this convention, calls to Lisp builtins like <code>if</code> and
<code>defun</code> will have to be changed to lower case.

     <li>Lexical scoping.  In Common Lisp, function arguments and <code>let</code>
bindings apply only to references physically within their bodies (or
within macro expansions in their bodies).  Traditionally, Emacs Lisp
uses <dfn>dynamic scoping</dfn> wherein a binding to a variable is visible
even inside functions called from the body. 
See <a href="elisp.html#Dynamic-Binding">Dynamic Binding</a>. 
Lexical binding is available since Emacs 24.1, so be sure to set
<code>lexical-binding</code> to <code>t</code> if you need to emulate this aspect
of Common Lisp.  See <a href="elisp.html#Lexical-Binding">Lexical Binding</a>.

     <p>Here is an example of a Common Lisp code fragment that would fail in
Emacs Lisp if <code>lexical-binding</code> were set to <code>nil</code>:

     <pre class="example">          (defun map-odd-elements (func list)
            (loop for x in list
                  for flag = t then (not flag)
                  collect (if flag x (funcall func x))))
          
          (defun add-odd-elements (list x)
            (map-odd-elements (lambda (a) (+ a x)) list))
     </pre>
     <p class="noindent">With lexical binding, the two functions' usages of <code>x</code> are
completely independent.  With dynamic binding, the binding to <code>x</code>
made by <code>add-odd-elements</code> will have been hidden by the binding
in <code>map-odd-elements</code> by the time the <code>(+ a x)</code> function is
called.

     <p>Internally, this package uses lexical binding so that such problems do
not occur.  See <a href="#Obsolete-Lexical-Binding">Obsolete Lexical Binding</a>, for a description of the obsolete
<code>lexical-let</code> form that emulates a Common Lisp-style lexical
binding when dynamic binding is in use.

     <li>Reader macros.  Common Lisp includes a second type of macro that
works at the level of individual characters.  For example, Common
Lisp implements the quote notation by a reader macro called <code>'</code>,
whereas Emacs Lisp's parser just treats quote as a special case. 
Some Lisp packages use reader macros to create special syntaxes
for themselves, which the Emacs parser is incapable of reading.

     <li>Other syntactic features.  Common Lisp provides a number of
notations beginning with <code>#</code> that the Emacs Lisp parser
won't understand.  For example, `<samp><span class="samp">#| ... |#</span></samp>' is an
alternate comment notation, and `<samp><span class="samp">#+lucid (foo)</span></samp>' tells
the parser to ignore the <code>(foo)</code> except in Lucid Common
Lisp.

     <li>Packages.  In Common Lisp, symbols are divided into <dfn>packages</dfn>. 
Symbols that are Lisp built-ins are typically stored in one package;
symbols that are vendor extensions are put in another, and each
application program would have a package for its own symbols. 
Certain symbols are &ldquo;exported&rdquo; by a package and others are
internal; certain packages &ldquo;use&rdquo; or import the exported symbols
of other packages.  To access symbols that would not normally be
visible due to this importing and exporting, Common Lisp provides
a syntax like <code>package:symbol</code> or <code>package::symbol</code>.

     <p>Emacs Lisp has a single namespace for all interned symbols, and
then uses a naming convention of putting a prefix like <code>cl-</code>
in front of the name.  Some Emacs packages adopt the Common Lisp-like
convention of using <code>cl:</code> or <code>cl::</code> as the prefix. 
However, the Emacs parser does not understand colons and just
treats them as part of the symbol name.  Thus, while <code>mapcar</code>
and <code>lisp:mapcar</code> may refer to the same symbol in Common
Lisp, they are totally distinct in Emacs Lisp.  Common Lisp
programs that refer to a symbol by the full name sometimes
and the short name other times will not port cleanly to Emacs.

     <p>Emacs Lisp does have a concept of &ldquo;obarrays&rdquo;, which are
package-like collections of symbols, but this feature is not
strong enough to be used as a true package mechanism.

     <li>The <code>format</code> function is quite different between Common
Lisp and Emacs Lisp.  It takes an additional &ldquo;destination&rdquo;
argument before the format string.  A destination of <code>nil</code>
means to format to a string as in Emacs Lisp; a destination
of <code>t</code> means to write to the terminal (similar to
<code>message</code> in Emacs).  Also, format control strings are
utterly different; <code>~</code> is used instead of <code>%</code> to
introduce format codes, and the set of available codes is
much richer.  There are no notations like <code>\n</code> for
string literals; instead, <code>format</code> is used with the
&ldquo;newline&rdquo; format code, <code>~%</code>.  More advanced formatting
codes provide such features as paragraph filling, case
conversion, and even loops and conditionals.

     <p>While it would have been possible to implement most of Common
Lisp <code>format</code> in this package (under the name <code>cl-format</code>,
of course), it was not deemed worthwhile.  It would have required
a huge amount of code to implement even a decent subset of
<code>format</code>, yet the functionality it would provide over
Emacs Lisp's <code>format</code> would rarely be useful.

     <li>Vector constants use square brackets in Emacs Lisp, but
<code>#(a b c)</code> notation in Common Lisp.  To further complicate
matters, Emacs has its own <code>#(</code> notation for
something entirely different&mdash;strings with properties.

     <li>Characters are distinct from integers in Common Lisp.  The notation
for character constants is also different: <code>#\A</code> in Common Lisp
where Emacs Lisp uses <code>?A</code>.  Also, <code>string=</code> and
<code>string-equal</code> are synonyms in Emacs Lisp, whereas the latter is
case-insensitive in Common Lisp.

     <li>Data types.  Some Common Lisp data types do not exist in Emacs
Lisp.  Rational numbers and complex numbers are not present,
nor are large integers (all integers are &ldquo;fixnums&rdquo;).  All
arrays are one-dimensional.  There are no readtables or pathnames;
streams are a set of existing data types rather than a new data
type of their own.  Hash tables, random-states, structures, and
packages (obarrays) are built from Lisp vectors or lists rather
than being distinct types.

     <li>The Common Lisp Object System (CLOS) is not implemented,
nor is the Common Lisp Condition System.  However, the EIEIO package
(see <a href="eieio.html#Top">Introduction</a>) does implement some
CLOS functionality.

     <li>Common Lisp features that are completely redundant with Emacs
Lisp features of a different name generally have not been
implemented.  For example, Common Lisp writes <code>defconstant</code>
where Emacs Lisp uses <code>defconst</code>.  Similarly, <code>make-list</code>
takes its arguments in different ways in the two Lisps but does
exactly the same thing, so this package has not bothered to
implement a Common Lisp-style <code>make-list</code>.

     <li>A few more notable Common Lisp features not included in this package:
<code>compiler-let</code>, <code>prog</code>, <code>ldb/dpb</code>, <code>cerror</code>.

     <li>Recursion.  While recursion works in Emacs Lisp just like it
does in Common Lisp, various details of the Emacs Lisp system
and compiler make recursion much less efficient than it is in
most Lisps.  Some schools of thought prefer to use recursion
in Lisp over other techniques; they would sum a list of
numbers using something like

     <pre class="example">          (defun sum-list (list)
            (if list
                (+ (car list) (sum-list (cdr list)))
              0))
     </pre>
     <p class="noindent">where a more iteratively-minded programmer might write one of
these forms:

     <pre class="example">          (let ((total 0)) (dolist (x my-list) (incf total x)) total)
          (loop for x in my-list sum x)
     </pre>
     <p>While this would be mainly a stylistic choice in most Common Lisps,
in Emacs Lisp you should be aware that the iterative forms are
much faster than recursion.  Also, Lisp programmers will want to
note that the current Emacs Lisp compiler does not optimize tail
recursion. 
</ul>

<div class="node">
<p><hr>
<a name="Obsolete-Features"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Porting-Common-Lisp">Porting Common Lisp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix D Obsolete Features</h2>

<p>This section describes some features of the package that are obsolete
and should not be used in new code.  They are either only provided by
the old <samp><span class="file">cl.el</span></samp> entry point, not by the newer <samp><span class="file">cl-lib.el</span></samp>;
or where versions with a `<samp><span class="samp">cl-</span></samp>' prefix do exist they do not behave
in exactly the same way.

<ul class="menu">
<li><a accesskey="1" href="#Obsolete-Lexical-Binding">Obsolete Lexical Binding</a>:     An approximation of lexical binding. 
<li><a accesskey="2" href="#Obsolete-Macros">Obsolete Macros</a>:              Obsolete macros. 
<li><a accesskey="3" href="#Obsolete-Setf-Customization">Obsolete Setf Customization</a>:  Obsolete ways to customize setf. 
</ul>

<div class="node">
<p><hr>
<a name="Obsolete-Lexical-Binding"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Obsolete-Macros">Obsolete Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Obsolete-Features">Obsolete Features</a>

</div>

<h3 class="appendixsec">D.1 Obsolete Lexical Binding</h3>

<p>The following macros are extensions to Common Lisp, where all bindings
are lexical unless declared otherwise.  These features are likewise
obsolete since the introduction of true lexical binding in Emacs 24.1.

<div class="defun">
&mdash; Macro: <b>lexical-let</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-lexical_002dlet-186"></a></var><br>
<blockquote><p>This form is exactly like <code>let</code> except that the bindings it
establishes are purely lexical. 
</p></blockquote></div>

<!-- FIXME remove this and refer to elisp manual. -->
<!-- Maybe merge some stuff from here to there? -->
<p class="noindent">Lexical bindings are similar to local variables in a language like C:
Only the code physically within the body of the <code>lexical-let</code>
(after macro expansion) may refer to the bound variables.

<pre class="example">     (setq a 5)
     (defun foo (b) (+ a b))
     (let ((a 2)) (foo a))
          =&gt; 4
     (lexical-let ((a 2)) (foo a))
          =&gt; 7
</pre>
   <p class="noindent">In this example, a regular <code>let</code> binding of <code>a</code> actually
makes a temporary change to the global variable <code>a</code>, so <code>foo</code>
is able to see the binding of <code>a</code> to 2.  But <code>lexical-let</code>
actually creates a distinct local variable <code>a</code> for use within its
body, without any effect on the global variable of the same name.

   <p>The most important use of lexical bindings is to create <dfn>closures</dfn>. 
A closure is a function object that refers to an outside lexical
variable (see <a href="elisp.html#Closures">Closures</a>). 
For example:

<pre class="example">     (defun make-adder (n)
       (lexical-let ((n n))
         (function (lambda (m) (+ n m)))))
     (setq add17 (make-adder 17))
     (funcall add17 4)
          =&gt; 21
</pre>
   <p class="noindent">The call <code>(make-adder 17)</code> returns a function object which adds
17 to its argument.  If <code>let</code> had been used instead of
<code>lexical-let</code>, the function object would have referred to the
global <code>n</code>, which would have been bound to 17 only during the
call to <code>make-adder</code> itself.

<pre class="example">     (defun make-counter ()
       (lexical-let ((n 0))
         (cl-function (lambda (&amp;optional (m 1)) (cl-incf n m)))))
     (setq count-1 (make-counter))
     (funcall count-1 3)
          =&gt; 3
     (funcall count-1 14)
          =&gt; 17
     (setq count-2 (make-counter))
     (funcall count-2 5)
          =&gt; 5
     (funcall count-1 2)
          =&gt; 19
     (funcall count-2)
          =&gt; 6
</pre>
   <p class="noindent">Here we see that each call to <code>make-counter</code> creates a distinct
local variable <code>n</code>, which serves as a private counter for the
function object that is returned.

   <p>Closed-over lexical variables persist until the last reference to
them goes away, just like all other Lisp objects.  For example,
<code>count-2</code> refers to a function object which refers to an
instance of the variable <code>n</code>; this is the only reference
to that variable, so after <code>(setq count-2 nil)</code> the garbage
collector would be able to delete this instance of <code>n</code>. 
Of course, if a <code>lexical-let</code> does not actually create any
closures, then the lexical variables are free as soon as the
<code>lexical-let</code> returns.

   <p>Many closures are used only during the extent of the bindings they
refer to; these are known as &ldquo;downward funargs&rdquo; in Lisp parlance. 
When a closure is used in this way, regular Emacs Lisp dynamic
bindings suffice and will be more efficient than <code>lexical-let</code>
closures:

<pre class="example">     (defun add-to-list (x list)
       (mapcar (lambda (y) (+ x y))) list)
     (add-to-list 7 '(1 2 5))
          =&gt; (8 9 12)
</pre>
   <p class="noindent">Since this lambda is only used while <code>x</code> is still bound,
it is not necessary to make a true closure out of it.

   <p>You can use <code>defun</code> or <code>flet</code> inside a <code>lexical-let</code>
to create a named closure.  If several closures are created in the
body of a single <code>lexical-let</code>, they all close over the same
instance of the lexical variable.

<div class="defun">
&mdash; Macro: <b>lexical-let*</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-lexical_002dlet_002a-187"></a></var><br>
<blockquote><p>This form is just like <code>lexical-let</code>, except that the bindings
are made sequentially in the manner of <code>let*</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Obsolete-Macros"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Obsolete-Setf-Customization">Obsolete Setf Customization</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Obsolete-Lexical-Binding">Obsolete Lexical Binding</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Obsolete-Features">Obsolete Features</a>

</div>

<h3 class="appendixsec">D.2 Obsolete Macros</h3>

<p>The following macros are obsolete, and are replaced by versions with
a `<samp><span class="samp">cl-</span></samp>' prefix that do not behave in exactly the same way. 
Consequently, the <samp><span class="file">cl.el</span></samp> versions are not simply aliases to the
<samp><span class="file">cl-lib.el</span></samp> versions.

<div class="defun">
&mdash; Macro: <b>flet</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-flet-188"></a></var><br>
<blockquote><p>This macro is replaced by <code>cl-flet</code> (see <a href="#Function-Bindings">Function Bindings</a>),
which behaves the same way as Common Lisp's <code>flet</code>. 
This <code>flet</code> takes the same arguments as <code>cl-flet</code>, but does
not behave in precisely the same way.

        <p>While <code>flet</code> in Common Lisp establishes a lexical function
binding, this <code>flet</code> makes a dynamic binding (it dates from a
time before Emacs had lexical binding).  The result is
that <code>flet</code> affects indirect calls to a function as well as calls
directly inside the <code>flet</code> form itself.

        <p>This will even work on Emacs primitives, although note that some calls
to primitive functions internal to Emacs are made without going
through the symbol's function cell, and so will not be affected by
<code>flet</code>.  For example,

     <pre class="example">          (flet ((message (&amp;rest args) (push args saved-msgs)))
            (do-something))
     </pre>
        <p>This code attempts to replace the built-in function <code>message</code>
with a function that simply saves the messages in a list rather
than displaying them.  The original definition of <code>message</code>
will be restored after <code>do-something</code> exits.  This code will
work fine on messages generated by other Lisp code, but messages
generated directly inside Emacs will not be caught since they make
direct C-language calls to the message routines rather than going
through the Lisp <code>message</code> function.

        <p>For those cases where the dynamic scoping of <code>flet</code> is desired,
<code>cl-flet</code> is clearly not a substitute.  The most direct replacement would
be instead to use <code>cl-letf</code> to temporarily rebind <code>(symbol-function
'</code><var>fun</var><code>)</code>.  But in most cases, a better substitute is to use advice, such
as:

     <pre class="example">          (defvar my-fun-advice-enable nil)
          (add-advice '<var>fun</var> :around
                      (lambda (orig &amp;rest args)
                        (if my-fun-advice-enable (do-something)
                          (apply orig args))))
     </pre>
        <p>so that you can then replace the <code>flet</code> with a simple dynamically scoped
binding of <code>my-fun-advice-enable</code>.

     <!-- Bug#411. -->
<p>Note that many primitives (e.g., <code>+</code>) have special byte-compile handling. 
Attempts to redefine such functions using <code>flet</code>, <code>cl-letf</code>, or
advice will fail when byte-compiled. 
<!-- Or cl-flet. -->
<!-- In such cases, use @code{labels} instead. -->
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>labels</b> (<var>bindings<small class="dots">...</small></var>)<var> forms<small class="dots">...</small><a name="index-labels-189"></a></var><br>
<blockquote><p>This macro is replaced by <code>cl-labels</code> (see <a href="#Function-Bindings">Function Bindings</a>),
which behaves the same way as Common Lisp's <code>labels</code>. 
This <code>labels</code> takes the same arguments as <code>cl-labels</code>, but
does not behave in precisely the same way.

        <p>This version of <code>labels</code> uses the obsolete <code>lexical-let</code>
form (see <a href="#Obsolete-Lexical-Binding">Obsolete Lexical Binding</a>), rather than the true
lexical binding that <code>cl-labels</code> uses. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Obsolete-Setf-Customization"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Obsolete-Macros">Obsolete Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Obsolete-Features">Obsolete Features</a>

</div>

<h3 class="appendixsec">D.3 Obsolete Ways to Customize Setf</h3>

<p>Common Lisp defines three macros, <code>define-modify-macro</code>,
<code>defsetf</code>, and <code>define-setf-method</code>, that allow the
user to extend generalized variables in various ways. 
In Emacs, these are obsolete, replaced by various features of
<samp><span class="file">gv.el</span></samp> in Emacs 24.3. 
See <a href="elisp.html#Adding-Generalized-Variables">Adding Generalized Variables</a>.

<div class="defun">
&mdash; Macro: <b>define-modify-macro</b><var> name arglist function </var>[<var>doc-string</var>]<var><a name="index-define_002dmodify_002dmacro-190"></a></var><br>
<blockquote><p>This macro defines a &ldquo;read-modify-write&rdquo; macro similar to
<code>cl-incf</code> and <code>cl-decf</code>.  You can replace this macro
with <code>gv-letplace</code>.

        <p>The macro <var>name</var> is defined to take a <var>place</var> argument
followed by additional arguments described by <var>arglist</var>.  The call

     <pre class="example">          (<var>name</var> <var>place</var> <var>args</var>...)
     </pre>
        <p class="noindent">will be expanded to

     <pre class="example">          (cl-callf <var>func</var> <var>place</var> <var>args</var>...)
     </pre>
        <p class="noindent">which in turn is roughly equivalent to

     <pre class="example">          (setf <var>place</var> (<var>func</var> <var>place</var> <var>args</var>...))
     </pre>
        <p>For example:

     <pre class="example">          (define-modify-macro incf (&amp;optional (n 1)) +)
          (define-modify-macro concatf (&amp;rest args) concat)
     </pre>
        <p>Note that <code>&amp;key</code> is not allowed in <var>arglist</var>, but
<code>&amp;rest</code> is sufficient to pass keywords on to the function.

        <p>Most of the modify macros defined by Common Lisp do not exactly
follow the pattern of <code>define-modify-macro</code>.  For example,
<code>push</code> takes its arguments in the wrong order, and <code>pop</code>
is completely irregular.

        <p>The above <code>incf</code> example could be written using
<code>gv-letplace</code> as:
     <pre class="example">          (defmacro incf (place &amp;optional n)
            (gv-letplace (getter setter) place
              (macroexp-let2 nil v (or n 1)
                (funcall setter `(+ ,v ,getter)))))
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>defsetf</b><var> access-fn update-fn<a name="index-defsetf-191"></a></var><br>
<blockquote><p>This is the simpler of two <code>defsetf</code> forms, and is
replaced by <code>gv-define-simple-setter</code>.

        <p>With <var>access-fn</var> the name of a function that accesses a place,
this declares <var>update-fn</var> to be the corresponding store function. 
From now on,

     <pre class="example">          (setf (<var>access-fn</var> <var>arg1</var> <var>arg2</var> <var>arg3</var>) <var>value</var>)
     </pre>
        <p class="noindent">will be expanded to

     <pre class="example">          (<var>update-fn</var> <var>arg1</var> <var>arg2</var> <var>arg3</var> <var>value</var>)
     </pre>
        <p class="noindent">The <var>update-fn</var> is required to be either a true function, or
a macro that evaluates its arguments in a function-like way.  Also,
the <var>update-fn</var> is expected to return <var>value</var> as its result. 
Otherwise, the above expansion would not obey the rules for the way
<code>setf</code> is supposed to behave.

        <p>As a special (non-Common-Lisp) extension, a third argument of <code>t</code>
to <code>defsetf</code> says that the return value of <code>update-fn</code> is
not suitable, so that the above <code>setf</code> should be expanded to
something more like

     <pre class="example">          (let ((temp <var>value</var>))
            (<var>update-fn</var> <var>arg1</var> <var>arg2</var> <var>arg3</var> temp)
            temp)
     </pre>
        <p>Some examples are:

     <pre class="example">          (defsetf car setcar)
          (defsetf buffer-name rename-buffer t)
     </pre>
        <p>These translate directly to <code>gv-define-simple-setter</code>:

     <pre class="example">          (gv-define-simple-setter car setcar)
          (gv-define-simple-setter buffer-name rename-buffer t)
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>defsetf</b><var> access-fn arglist </var>(<var>store-var</var>)<var> forms<small class="dots">...</small><a name="index-defsetf-192"></a></var><br>
<blockquote><p>This is the second, more complex, form of <code>defsetf</code>. 
It can be replaced by <code>gv-define-setter</code>.

        <p>This form of <code>defsetf</code> is rather like <code>defmacro</code> except for
the additional <var>store-var</var> argument.  The <var>forms</var> should
return a Lisp form that stores the value of <var>store-var</var> into the
generalized variable formed by a call to <var>access-fn</var> with
arguments described by <var>arglist</var>.  The <var>forms</var> may begin with
a string which documents the <code>setf</code> method (analogous to the doc
string that appears at the front of a function).

        <p>For example, the simple form of <code>defsetf</code> is shorthand for

     <pre class="example">          (defsetf <var>access-fn</var> (&amp;rest args) (store)
            (append '(<var>update-fn</var>) args (list store)))
     </pre>
        <p>The Lisp form that is returned can access the arguments from
<var>arglist</var> and <var>store-var</var> in an unrestricted fashion;
macros like <code>cl-incf</code> that invoke this
setf-method will insert temporary variables as needed to make
sure the apparent order of evaluation is preserved.

        <p>Another standard example:

     <pre class="example">          (defsetf nth (n x) (store)
            `(setcar (nthcdr ,n ,x) ,store))
     </pre>
        <p>You could write this using <code>gv-define-setter</code> as:

     <pre class="example">          (gv-define-setter nth (store n x)
            `(setcar (nthcdr ,n ,x) ,store))
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>define-setf-method</b><var> access-fn arglist forms<small class="dots">...</small><a name="index-define_002dsetf_002dmethod-193"></a></var><br>
<blockquote><p>This is the most general way to create new place forms.  You can
replace this by <code>gv-define-setter</code> or <code>gv-define-expander</code>.

        <p>When a <code>setf</code> to <var>access-fn</var> with arguments described by
<var>arglist</var> is expanded, the <var>forms</var> are evaluated and must
return a list of five items:

          <ol type=1 start=1>
<li>A list of <dfn>temporary variables</dfn>.

          <li>A list of <dfn>value forms</dfn> corresponding to the temporary variables
above.  The temporary variables will be bound to these value forms
as the first step of any operation on the generalized variable.

          <li>A list of exactly one <dfn>store variable</dfn> (generally obtained
from a call to <code>gensym</code>).

          <li>A Lisp form that stores the contents of the store variable into
the generalized variable, assuming the temporaries have been
bound as described above.

          <li>A Lisp form that accesses the contents of the generalized variable,
assuming the temporaries have been bound.
             </ol>

        <p>This is exactly like the Common Lisp macro of the same name,
except that the method returns a list of five values rather
than the five values themselves, since Emacs Lisp does not
support Common Lisp's notion of multiple return values. 
(Note that the <code>setf</code> implementation provided by <samp><span class="file">gv.el</span></samp>
does not use this five item format.  Its use here is only for
backwards compatibility.)

        <p>Once again, the <var>forms</var> may begin with a documentation string.

        <p>A setf-method should be maximally conservative with regard to
temporary variables.  In the setf-methods generated by
<code>defsetf</code>, the second return value is simply the list of
arguments in the place form, and the first return value is a
list of a corresponding number of temporary variables generated
<!-- FIXME I don't think this is true anymore. -->
by <code>cl-gensym</code>.  Macros like <code>cl-incf</code> that
use this setf-method will optimize away most temporaries that
turn out to be unnecessary, so there is little reason for the
setf-method itself to optimize. 
</p></blockquote></div>

<!-- Removed in Emacs 24.3, not possible to make a compatible replacement. -->
<div class="node">
<p><hr>
<a name="GNU-Free-Documentation-License"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Function-Index">Function Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Obsolete-Features">Obsolete Features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix E GNU Free Documentation License</h2>

<!-- The GNU Free Documentation License. -->
<div align="center">Version 1.3, 3 November 2008</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
     <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type=1 start=0>
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     <p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     <p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     <li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     <p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     <p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     <p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     <p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     <p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.

     <p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input
format, SGML or XML using a publicly available
DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples
of transparent image formats include PNG, XCF and
JPG.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, SGML or
XML for which the DTD and/or processing tools are
not generally available, and the machine-generated HTML,
PostScript or PDF produced by some word processors for
output purposes only.

     <p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     <p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.

     <p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.

     <p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     <li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     <p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     <li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     <p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     <p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     <p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     <li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          <ol type=A start=1>
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          <li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          <li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          <li>Preserve all the copyright notices of the Document.

          <li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          <li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          <li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          <li>Include an unaltered copy of this License.

          <li>Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          <li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          <li>For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          <li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          <li>Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

          <li>Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

          <li>Preserve any Warranty Disclaimers.
          </ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     <p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     <p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     <p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     <li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     <p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     <p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;

     <li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     <p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     <li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     <p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     <li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     <p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     <li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

     <p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     <p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     <p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

     <li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     <p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

     <li>RELICENSING

     <p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.

     <p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

     <p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.

     <p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

     <p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

        </ol>

<h3 class="heading">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with<small class="dots">...</small>Texts.&rdquo; line with this:

<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   <p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
<div class="node">
<p><hr>
<a name="Function-Index"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variable-Index">Variable Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Function Index</h2>

<ul class="index-fn" compact>
<li><a href="#index-cl_002dacons-176"><code>cl-acons</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002dadjoin-160"><code>cl-adjoin</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dassert-183"><code>cl-assert</code></a>: <a href="#Assertions">Assertions</a></li>
<li><a href="#index-cl_002dassoc-170"><code>cl-assoc</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002dassoc_002dif-172"><code>cl-assoc-if</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002dassoc_002dif_002dnot-173"><code>cl-assoc-if-not</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002dblock-37"><code>cl-block</code></a>: <a href="#Blocks-and-Exits">Blocks and Exits</a></li>
<li><a href="#index-cl_002dcaddr-139"><code>cl-caddr</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dcallf-25"><code>cl-callf</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dcallf2-26"><code>cl-callf2</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dcase-32"><code>cl-case</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-cl_002dceiling-77"><code>cl-ceiling</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dcheck_002dtype-184"><code>cl-check-type</code></a>: <a href="#Assertions">Assertions</a></li>
<li><a href="#index-cl_002dcoerce-13"><code>cl-coerce</code></a>: <a href="#Type-Predicates">Type Predicates</a></li>
<li><a href="#index-cl_002dcompiler_002dmacroexpand-56"><code>cl-compiler-macroexpand</code></a>: <a href="#Macros">Macros</a></li>
<li><a href="#index-cl_002dconcatenate-108"><code>cl-concatenate</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dcopy_002dlist-146"><code>cl-copy-list</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dcount-127"><code>cl-count</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dcount_002dif-132"><code>cl-count-if</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dcount_002dif_002dnot-133"><code>cl-count-if-not</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002ddecf-19"><code>cl-decf</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002ddeclaim-58"><code>cl-declaim</code></a>: <a href="#Declarations">Declarations</a></li>
<li><a href="#index-cl_002ddeclare-59"><code>cl-declare</code></a>: <a href="#Declarations">Declarations</a></li>
<li><a href="#index-cl_002ddefine_002dcompiler_002dmacro-55"><code>cl-define-compiler-macro</code></a>: <a href="#Macros">Macros</a></li>
<li><a href="#index-cl_002ddefmacro-6"><code>cl-defmacro</code></a>: <a href="#Argument-Lists">Argument Lists</a></li>
<li><a href="#index-cl_002ddefstruct-178"><code>cl-defstruct</code></a>: <a href="#Structures">Structures</a></li>
<li><a href="#index-cl_002ddefsubst-5"><code>cl-defsubst</code></a>: <a href="#Argument-Lists">Argument Lists</a></li>
<li><a href="#index-cl_002ddeftype-14"><code>cl-deftype</code></a>: <a href="#Type-Predicates">Type Predicates</a></li>
<li><a href="#index-cl_002ddefun-3"><code>cl-defun</code></a>: <a href="#Argument-Lists">Argument Lists</a></li>
<li><a href="#index-cl_002ddelete-112"><code>cl-delete</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002ddelete_002dduplicates-118"><code>cl-delete-duplicates</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002ddelete_002dif-115"><code>cl-delete-if</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002ddelete_002dif_002dnot-116"><code>cl-delete-if-not</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002ddestructuring_002dbind-52"><code>cl-destructuring-bind</code></a>: <a href="#Macros">Macros</a></li>
<li><a href="#index-cl_002ddigit_002dchar_002dp-72"><code>cl-digit-char-p</code></a>: <a href="#Predicates-on-Numbers">Predicates on Numbers</a></li>
<li><a href="#index-cl_002ddo-42"><code>cl-do</code></a>: <a href="#Iteration">Iteration</a></li>
<li><a href="#index-cl_002ddo_002a-43"><code>cl-do*</code></a>: <a href="#Iteration">Iteration</a></li>
<li><a href="#index-cl_002ddo_002dall_002dsymbols-47"><code>cl-do-all-symbols</code></a>: <a href="#Iteration">Iteration</a></li>
<li><a href="#index-cl_002ddo_002dsymbols-46"><code>cl-do-symbols</code></a>: <a href="#Iteration">Iteration</a></li>
<li><a href="#index-cl_002ddolist-44"><code>cl-dolist</code></a>: <a href="#Iteration">Iteration</a></li>
<li><a href="#index-cl_002ddotimes-45"><code>cl-dotimes</code></a>: <a href="#Iteration">Iteration</a></li>
<li><a href="#index-cl_002decase-33"><code>cl-ecase</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-cl_002dendp-142"><code>cl-endp</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dequalp-15"><code>cl-equalp</code></a>: <a href="#Equality-Predicates">Equality Predicates</a></li>
<li><a href="#index-cl_002detypecase-35"><code>cl-etypecase</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-cl_002deval_002dwhen-9"><code>cl-eval-when</code></a>: <a href="#Time-of-Evaluation">Time of Evaluation</a></li>
<li><a href="#index-cl_002devenp-71"><code>cl-evenp</code></a>: <a href="#Predicates-on-Numbers">Predicates on Numbers</a></li>
<li><a href="#index-cl_002devery-103"><code>cl-every</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dfill-109"><code>cl-fill</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dfind-125"><code>cl-find</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dfind_002dif-128"><code>cl-find-if</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dfind_002dif_002dnot-129"><code>cl-find-if-not</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dfirst-140"><code>cl-first</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dflet-28"><code>cl-flet</code></a>: <a href="#Function-Bindings">Function Bindings</a></li>
<li><a href="#index-cl_002dfloat_002dlimits-86"><code>cl-float-limits</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dfloor-76"><code>cl-floor</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dfunction-7"><code>cl-function</code></a>: <a href="#Argument-Lists">Argument Lists</a></li>
<li><a href="#index-cl_002dgcd-73"><code>cl-gcd</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dgensym-66"><code>cl-gensym</code></a>: <a href="#Creating-Symbols">Creating Symbols</a></li>
<li><a href="#index-cl_002dgentemp-67"><code>cl-gentemp</code></a>: <a href="#Creating-Symbols">Creating Symbols</a></li>
<li><a href="#index-cl_002dget-62"><code>cl-get</code></a>: <a href="#Property-Lists">Property Lists</a></li>
<li><a href="#index-cl_002dgetf-64"><code>cl-getf</code></a>: <a href="#Property-Lists">Property Lists</a></li>
<li><a href="#index-cl_002dincf-18"><code>cl-incf</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dintersection-163"><code>cl-intersection</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002disqrt-75"><code>cl-isqrt</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002diter_002ddefun-4"><code>cl-iter-defun</code></a>: <a href="#Argument-Lists">Argument Lists</a></li>
<li><a href="#index-cl_002dlabels-29"><code>cl-labels</code></a>: <a href="#Function-Bindings">Function Bindings</a></li>
<li><a href="#index-cl_002dlcm-74"><code>cl-lcm</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dldiff-145"><code>cl-ldiff</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dletf-23"><code>cl-letf</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dletf_002a-24"><code>cl-letf*</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dlist_002a-144"><code>cl-list*</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dlist_002dlength-143"><code>cl-list-length</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dload_002dtime_002dvalue-11"><code>cl-load-time-value</code></a>: <a href="#Time-of-Evaluation">Time of Evaluation</a></li>
<li><a href="#index-cl_002dlocally-60"><code>cl-locally</code></a>: <a href="#Declarations">Declarations</a></li>
<li><a href="#index-cl_002dloop-41"><code>cl-loop</code></a>: <a href="#Iteration">Iteration</a></li>
<li><a href="#index-cl_002dloop-48"><code>cl-loop</code></a>: <a href="#Loop-Basics">Loop Basics</a></li>
<li><a href="#index-cl_002dmacrolet-30"><code>cl-macrolet</code></a>: <a href="#Macro-Bindings">Macro Bindings</a></li>
<li><a href="#index-cl_002dmake_002drandom_002dstate-84"><code>cl-make-random-state</code></a>: <a href="#Random-Numbers">Random Numbers</a></li>
<li><a href="#index-cl_002dmap-96"><code>cl-map</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dmapc-98"><code>cl-mapc</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dmapcan-100"><code>cl-mapcan</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dmapcar-95"><code>cl-mapcar</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dmapcon-101"><code>cl-mapcon</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dmapl-99"><code>cl-mapl</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dmaplist-97"><code>cl-maplist</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dmember-156"><code>cl-member</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dmember_002dif-157"><code>cl-member-if</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dmember_002dif_002dnot-158"><code>cl-member-if-not</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dmerge-138"><code>cl-merge</code></a>: <a href="#Sorting-Sequences">Sorting Sequences</a></li>
<li><a href="#index-cl_002dminusp-69"><code>cl-minusp</code></a>: <a href="#Predicates-on-Numbers">Predicates on Numbers</a></li>
<li><a href="#index-cl_002dmismatch-134"><code>cl-mismatch</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dmod-80"><code>cl-mod</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dmultiple_002dvalue_002dbind-50"><code>cl-multiple-value-bind</code></a>: <a href="#Multiple-Values">Multiple Values</a></li>
<li><a href="#index-cl_002dmultiple_002dvalue_002dsetq-51"><code>cl-multiple-value-setq</code></a>: <a href="#Multiple-Values">Multiple Values</a></li>
<li><a href="#index-cl_002dnintersection-164"><code>cl-nintersection</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dnotany-104"><code>cl-notany</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dnotevery-105"><code>cl-notevery</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dnset_002ddifference-166"><code>cl-nset-difference</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dnset_002dexclusive_002dor-168"><code>cl-nset-exclusive-or</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dnsublis-155"><code>cl-nsublis</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dnsubst-149"><code>cl-nsubst</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dnsubst_002dif-152"><code>cl-nsubst-if</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dnsubst_002dif_002dnot-153"><code>cl-nsubst-if-not</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dnsubstitute-120"><code>cl-nsubstitute</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dnsubstitute_002dif-123"><code>cl-nsubstitute-if</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dnsubstitute_002dif_002dnot-124"><code>cl-nsubstitute-if-not</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dnunion-162"><code>cl-nunion</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002doddp-70"><code>cl-oddp</code></a>: <a href="#Predicates-on-Numbers">Predicates on Numbers</a></li>
<li><a href="#index-cl_002dpairlis-177"><code>cl-pairlis</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002dparse_002dinteger-82"><code>cl-parse-integer</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dplusp-68"><code>cl-plusp</code></a>: <a href="#Predicates-on-Numbers">Predicates on Numbers</a></li>
<li><a href="#index-cl_002dposition-126"><code>cl-position</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dposition_002dif-130"><code>cl-position-if</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dposition_002dif_002dnot-131"><code>cl-position-if-not</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dprettyexpand-185"><code>cl-prettyexpand</code></a>: <a href="#Efficiency-Concerns">Efficiency Concerns</a></li>
<li><a href="#index-cl_002dproclaim-57"><code>cl-proclaim</code></a>: <a href="#Declarations">Declarations</a></li>
<li><a href="#index-cl_002dprogv-27"><code>cl-progv</code></a>: <a href="#Dynamic-Bindings">Dynamic Bindings</a></li>
<li><a href="#index-cl_002dpsetf-17"><code>cl-psetf</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dpsetq-16"><code>cl-psetq</code></a>: <a href="#Assignment">Assignment</a></li>
<li><a href="#index-cl_002dpushnew-20"><code>cl-pushnew</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002drandom-83"><code>cl-random</code></a>: <a href="#Random-Numbers">Random Numbers</a></li>
<li><a href="#index-cl_002drandom_002dstate_002dp-85"><code>cl-random-state-p</code></a>: <a href="#Random-Numbers">Random Numbers</a></li>
<li><a href="#index-cl_002drassoc-171"><code>cl-rassoc</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002drassoc_002dif-174"><code>cl-rassoc-if</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002drassoc_002dif_002dnot-175"><code>cl-rassoc-if-not</code></a>: <a href="#Association-Lists">Association Lists</a></li>
<li><a href="#index-cl_002dreduce-106"><code>cl-reduce</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002drem-81"><code>cl-rem</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dremf-65"><code>cl-remf</code></a>: <a href="#Property-Lists">Property Lists</a></li>
<li><a href="#index-cl_002dremove-111"><code>cl-remove</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dremove_002dduplicates-117"><code>cl-remove-duplicates</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dremove_002dif-113"><code>cl-remove-if</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dremove_002dif_002dnot-114"><code>cl-remove-if-not</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dremprop-63"><code>cl-remprop</code></a>: <a href="#Property-Lists">Property Lists</a></li>
<li><a href="#index-cl_002dreplace-110"><code>cl-replace</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002drest-141"><code>cl-rest</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dreturn-39"><code>cl-return</code></a>: <a href="#Blocks-and-Exits">Blocks and Exits</a></li>
<li><a href="#index-cl_002dreturn_002dfrom-38"><code>cl-return-from</code></a>: <a href="#Blocks-and-Exits">Blocks and Exits</a></li>
<li><a href="#index-cl_002drotatef-22"><code>cl-rotatef</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dround-79"><code>cl-round</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dsearch-135"><code>cl-search</code></a>: <a href="#Searching-Sequences">Searching Sequences</a></li>
<li><a href="#index-cl_002dset_002ddifference-165"><code>cl-set-difference</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dset_002dexclusive_002dor-167"><code>cl-set-exclusive-or</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dshiftf-21"><code>cl-shiftf</code></a>: <a href="#Modify-Macros">Modify Macros</a></li>
<li><a href="#index-cl_002dsome-102"><code>cl-some</code></a>: <a href="#Mapping-over-Sequences">Mapping over Sequences</a></li>
<li><a href="#index-cl_002dsort-136"><code>cl-sort</code></a>: <a href="#Sorting-Sequences">Sorting Sequences</a></li>
<li><a href="#index-cl_002dstable_002dsort-137"><code>cl-stable-sort</code></a>: <a href="#Sorting-Sequences">Sorting Sequences</a></li>
<li><a href="#index-cl_002dstruct_002dsequence_002dtype-179"><code>cl-struct-sequence-type</code></a>: <a href="#Structures">Structures</a></li>
<li><a href="#index-cl_002dstruct_002dslot_002dinfo-180"><code>cl-struct-slot-info</code></a>: <a href="#Structures">Structures</a></li>
<li><a href="#index-cl_002dstruct_002dslot_002doffset-181"><code>cl-struct-slot-offset</code></a>: <a href="#Structures">Structures</a></li>
<li><a href="#index-cl_002dstruct_002dslot_002dvalue-182"><code>cl-struct-slot-value</code></a>: <a href="#Structures">Structures</a></li>
<li><a href="#index-cl_002dsublis-154"><code>cl-sublis</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dsubseq-107"><code>cl-subseq</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dsubsetp-169"><code>cl-subsetp</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dsubst-148"><code>cl-subst</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dsubst_002dif-150"><code>cl-subst-if</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dsubst_002dif_002dnot-151"><code>cl-subst-if-not</code></a>: <a href="#Substitution-of-Expressions">Substitution of Expressions</a></li>
<li><a href="#index-cl_002dsubstitute-119"><code>cl-substitute</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dsubstitute_002dif-121"><code>cl-substitute-if</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dsubstitute_002dif_002dnot-122"><code>cl-substitute-if-not</code></a>: <a href="#Sequence-Functions">Sequence Functions</a></li>
<li><a href="#index-cl_002dsymbol_002dmacrolet-31"><code>cl-symbol-macrolet</code></a>: <a href="#Macro-Bindings">Macro Bindings</a></li>
<li><a href="#index-cl_002dtagbody-40"><code>cl-tagbody</code></a>: <a href="#Blocks-and-Exits">Blocks and Exits</a></li>
<li><a href="#index-cl_002dtailp-159"><code>cl-tailp</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-cl_002dthe-61"><code>cl-the</code></a>: <a href="#Declarations">Declarations</a></li>
<li><a href="#index-cl_002dtree_002dequal-147"><code>cl-tree-equal</code></a>: <a href="#List-Functions">List Functions</a></li>
<li><a href="#index-cl_002dtruncate-78"><code>cl-truncate</code></a>: <a href="#Numerical-Functions">Numerical Functions</a></li>
<li><a href="#index-cl_002dtypecase-34"><code>cl-typecase</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-cl_002dtypep-12"><code>cl-typep</code></a>: <a href="#Type-Predicates">Type Predicates</a></li>
<li><a href="#index-cl_002dunion-161"><code>cl-union</code></a>: <a href="#Lists-as-Sets">Lists as Sets</a></li>
<li><a href="#index-define_002dmodify_002dmacro-190"><code>define-modify-macro</code></a>: <a href="#Obsolete-Setf-Customization">Obsolete Setf Customization</a></li>
<li><a href="#index-define_002dsetf_002dmethod-193"><code>define-setf-method</code></a>: <a href="#Obsolete-Setf-Customization">Obsolete Setf Customization</a></li>
<li><a href="#index-defsetf-191"><code>defsetf</code></a>: <a href="#Obsolete-Setf-Customization">Obsolete Setf Customization</a></li>
<li><a href="#index-eval_002dwhen_002dcompile-10"><code>eval-when-compile</code></a>: <a href="#Time-of-Evaluation">Time of Evaluation</a></li>
<li><a href="#index-flet-188"><code>flet</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-labels-189"><code>labels</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-lexical_002dlet-186"><code>lexical-let</code></a>: <a href="#Obsolete-Lexical-Binding">Obsolete Lexical Binding</a></li>
<li><a href="#index-lexical_002dlet_002a-187"><code>lexical-let*</code></a>: <a href="#Obsolete-Lexical-Binding">Obsolete Lexical Binding</a></li>
   </ul><div class="node">
<p><hr>
<a name="Variable-Index"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Function-Index">Function Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Variable Index</h2>



<ul class="index-vr" compact>
<li><a href="#index-cl_002dfloat_002depsilon-93"><code>cl-float-epsilon</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dfloat_002dnegative_002depsilon-94"><code>cl-float-negative-epsilon</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dleast_002dnegative_002dfloat-91"><code>cl-least-negative-float</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dleast_002dnegative_002dnormalized_002dfloat-92"><code>cl-least-negative-normalized-float</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dleast_002dpositive_002dfloat-89"><code>cl-least-positive-float</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dleast_002dpositive_002dnormalized_002dfloat-90"><code>cl-least-positive-normalized-float</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dmost_002dnegative_002dfloat-88"><code>cl-most-negative-float</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
<li><a href="#index-cl_002dmost_002dpositive_002dfloat-87"><code>cl-most-positive-float</code></a>: <a href="#Implementation-Parameters">Implementation Parameters</a></li>
   </ul></body></html>

