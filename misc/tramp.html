<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html lang="en">
<head>
<title>TRAMP User Manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="TRAMP User Manual">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1999-2016 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being "A GNU Manual", and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     "GNU Free Documentation License".

     (a) The FSF's Back-Cover Text is: "You have the freedom to copy
     and modify this GNU manual."
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">TRAMP User Manual</h1>
   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li>
<a name="toc_Top" href="#Top"><span class="sc">tramp</span> version 2.2.13.25.1 User Manual</a>
</li>
<li>
<a name="toc_Overview" href="#Overview">1 An overview of <span class="sc">tramp</span></a>
</li>
<li>
<a name="toc_Obtaining-Tramp" href="#Obtaining-Tramp">2 Obtaining Tramp.</a>
</li>
<li>
<a name="toc_History" href="#History">3 History of <span class="sc">tramp</span></a>
</li>
<li>
<a name="toc_Configuration" href="#Configuration">4 Configuring <span class="sc">tramp</span></a>
<ul>
<li>
<a href="#Connection-types">4.1 Types of connections to remote hosts</a>
</li>
<li>
<a href="#Inline-methods">4.2 Inline methods</a>
</li>
<li>
<a href="#External-methods">4.3 External methods</a>
</li>
<li>
<a href="#GVFS-based-methods">4.4 GVFS based external methods</a>
</li>
<li>
<a href="#Gateway-methods">4.5 Gateway methods</a>
</li>
<li>
<a href="#Default-Method">4.6 Selecting a default method</a>
<ul>
<li>
<a href="#Default-Method">4.6.1 Which method to use?</a>
</li>
</ul>
</li>
<li>
<a href="#Default-User">4.7 Selecting a default user</a>
</li>
<li>
<a href="#Default-Host">4.8 Selecting a default host</a>
</li>
<li>
<a href="#Multi_002dhops">4.9 Connecting to a remote host using multiple hops</a>
</li>
<li>
<a href="#Customizing-Methods">4.10 Using Non-Standard Methods</a>
</li>
<li>
<a href="#Customizing-Completion">4.11 Selecting config files for user/host name completion</a>
</li>
<li>
<a href="#Password-handling">4.12 Reusing passwords for several connections</a>
<ul>
<li>
<a href="#Password-handling">4.12.1 Using an authentication file</a>
</li>
<li>
<a href="#Password-handling">4.12.2 Caching passwords</a>
</li>
</ul>
</li>
<li>
<a href="#Connection-caching">4.13 Reusing connection related information</a>
</li>
<li>
<a href="#Predefined-connection-information">4.14 Setting own connection related information</a>
</li>
<li>
<a href="#Remote-programs">4.15 How <span class="sc">tramp</span> finds and uses programs on the remote host</a>
</li>
<li>
<a href="#Remote-shell-setup">4.16 Remote shell setup hints</a>
</li>
<li>
<a href="#Android-shell-setup">4.17 Android shell setup hints</a>
</li>
<li>
<a href="#Auto_002dsave-and-Backup">4.18 Auto-save and Backup configuration</a>
</li>
<li>
<a href="#Windows-setup-hints">4.19 Issues with Cygwin ssh</a>
</li>
</ul>
</li>
<li>
<a name="toc_Usage" href="#Usage">5 Using <span class="sc">tramp</span></a>
<ul>
<li>
<a href="#File-name-Syntax">5.1 <span class="sc">tramp</span> file name conventions</a>
</li>
<li>
<a href="#File-name-completion">5.2 File name completion</a>
</li>
<li>
<a href="#Ad_002dhoc-multi_002dhops">5.3 Declaring multiple hops in the file name</a>
</li>
<li>
<a href="#Remote-processes">5.4 Integration with other Emacs packages</a>
<ul>
<li>
<a href="#Remote-processes">5.4.1 Running remote programs that create local X11 windows</a>
</li>
<li>
<a href="#Remote-processes">5.4.2 Running <code>shell</code> on a remote host</a>
</li>
<li>
<a href="#Remote-processes">5.4.3 Running <code>shell-command</code> on a remote host</a>
</li>
<li>
<a href="#Remote-processes">5.4.4 Running <code>eshell</code> on a remote host</a>
</li>
<li>
<a href="#Remote-processes">5.4.5 Running a debugger on a remote host</a>
</li>
<li>
<a href="#Remote-processes">5.4.6 Running remote processes on Windows hosts</a>
</li>
</ul>
</li>
<li>
<a href="#Cleanup-remote-connections">5.5 Cleanup remote connections</a>
</li>
</ul>
</li>
<li>
<a name="toc_Bug-Reports" href="#Bug-Reports">6 Reporting Bugs and Problems</a>
</li>
<li>
<a name="toc_Frequently-Asked-Questions" href="#Frequently-Asked-Questions">7 Frequently Asked Questions</a>
</li>
<li>
<a name="toc_Files-directories-and-localnames" href="#Files-directories-and-localnames">8 How file names, directories and localnames are mangled and managed.</a>
<ul>
<li>
<a href="#Localname-deconstruction">8.1 Splitting a localname into its component parts</a>
</li>
<li>
<a href="#External-packages">8.2 Integrating with external Lisp packages</a>
<ul>
<li>
<a href="#External-packages">8.2.1 File name completion.</a>
</li>
<li>
<a href="#External-packages">8.2.2 File attributes cache.</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a name="toc_Traces-and-Profiles" href="#Traces-and-Profiles">9 How to Customize Traces</a>
</li>
<li>
<a name="toc_Issues" href="#Issues">10 Debatable Issues and What Was Decided</a>
</li>
<li>
<a name="toc_GNU-Free-Documentation-License" href="#GNU-Free-Documentation-License">Appendix A GNU Free Documentation License</a>
</li>
<li>
<a name="toc_Function-Index" href="#Function-Index">Function Index</a>
</li>
<li>
<a name="toc_Variable-Index" href="#Variable-Index">Variable Index</a>
</li>
<li>
<a name="toc_Concept-Index" href="#Concept-Index">Concept Index</a>
</li>
</ul>
</div>



<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Top"></a></div>

<h2 class="unnumbered">
<span class="sc">tramp</span> version 2.2.13.25.1 User Manual</h2>

<p>This file documents <span class="sc">tramp</span> version 2.2.13.25.1, a remote file
editing package for Emacs.

   </p>
<p><span class="sc">tramp</span> stands for “Transparent Remote (file) Access, Multiple
Protocol”.  This package provides remote file editing, similar to
Ange-FTP.

   </p>
<p>The difference is that Ange-FTP uses FTP to transfer
files between the local and the remote host, whereas <span class="sc">tramp</span> uses a
combination of <samp><span class="command">rsh</span></samp> and <samp><span class="command">rcp</span></samp> or other work-alike
programs, such as <samp><span class="command">ssh</span></samp>/<samp><span class="command">scp</span></samp>.

   </p>
<p>You can find the latest version of this document on the web at
<a href="http://www.gnu.org/software/tramp/">http://www.gnu.org/software/tramp/</a>.

<!-- Pointer to the other Emacs flavor is necessary only in case of -->
<!-- standalone installation. -->
</p>
<p>The latest release of <span class="sc">tramp</span> is available for
<a href="ftp://ftp.gnu.org/gnu/tramp/">download</a>, or you may see
<a href="#Obtaining-Tramp">Obtaining Tramp</a> for more details, including the Git server
details.

   </p>
<p><span class="sc">tramp</span> also has a <a href="http://savannah.gnu.org/projects/tramp/">Savannah Project Page</a>.

   </p>
<p>There is a mailing list for <span class="sc">tramp</span>, available at
<a href="mailto:tramp-devel@gnu.org">tramp-devel@gnu.org</a>, and archived at
<a href="http://lists.gnu.org/archive/html/tramp-devel/">the <span class="sc">tramp</span> Mail Archive</a>. 
Older archives are located at
<a href="http://sourceforge.net/mailarchive/forum.php?forum=tramp-devel">SourceForge Mail Archive</a> and
<a href="http://www.mail-archive.com/emacs-rcp@ls6.cs.uni-dortmund.de/">The Mail Archive</a>. 
<!-- in HTML output, there's no new paragraph. -->
<br><br>

   </p>
<p>Copyright © 1999–2016 Free Software Foundation, Inc.

   </p>
<blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being “A GNU Manual”,
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled “GNU Free Documentation License”.

        <p>(a) The FSF's Back-Cover Text is: “You have the freedom to
copy and modify this GNU manual.”
</p>
</blockquote>

<ul class="menu">
<li>
<a accesskey="1" href="#Overview">Overview</a>:                     What <span class="sc">tramp</span> can and cannot do.

</li>
</ul>
<p>For the end user:

</p>
<ul class="menu">
<li>
<a accesskey="2" href="#Obtaining-Tramp">Obtaining Tramp</a>:              How to obtain <span class="sc">tramp</span>. 
</li>
<li>
<a accesskey="3" href="#History">History</a>:                      History of <span class="sc">tramp</span>. 
</li>
<li>
<a accesskey="4" href="#Configuration">Configuration</a>:                Configuring <span class="sc">tramp</span> for use. 
</li>
<li>
<a accesskey="5" href="#Usage">Usage</a>:                        An overview of the operation of <span class="sc">tramp</span>. 
</li>
<li>
<a accesskey="6" href="#Bug-Reports">Bug Reports</a>:                  Reporting Bugs and Problems. 
</li>
<li>
<a accesskey="7" href="#Frequently-Asked-Questions">Frequently Asked Questions</a>:   Questions and answers from the mailing list.

</li>
</ul>
<p>For the developer:

</p>
<ul class="menu">
<li>
<a accesskey="8" href="#Files-directories-and-localnames">Files directories and localnames</a>
                                How file names, directories and localnames
                                  are mangled and managed. 
</li>
<li>
<a accesskey="9" href="#Traces-and-Profiles">Traces and Profiles</a>:          How to Customize Traces. 
</li>
<li>
<a href="#Issues">Issues</a>:                       Debatable Issues and What Was Decided.

</li>
<li>
<a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:  The license for this documentation. 
</li>
<li>
<a href="#Function-Index">Function Index</a>:               <span class="sc">tramp</span> functions. 
</li>
<li>
<a href="#Variable-Index">Variable Index</a>:               User options and variables. 
</li>
<li>
<a href="#Concept-Index">Concept Index</a>:                An item for each concept.

</li>
</ul>
<p>--- The Detailed Node Listing ---

</p>
<p>Configuring <span class="sc">tramp</span> for use

</p>
<ul class="menu">
<li>
<a href="#Connection-types">Connection types</a>:             Types of connections to remote hosts. 
</li>
<li>
<a href="#Inline-methods">Inline methods</a>:               Inline methods. 
</li>
<li>
<a href="#External-methods">External methods</a>:             External methods.

</li>
<li>
<a href="#GVFS-based-methods">GVFS based methods</a>:           GVFS based external methods.

</li>
<li>
<a href="#Gateway-methods">Gateway methods</a>:              Gateway methods. 
</li>
<li>
<a href="#Default-Method">Default Method</a>:               Selecting a default method. 
</li>
<li>
<a href="#Default-User">Default User</a>:                 Selecting a default user. 
</li>
<li>
<a href="#Default-Host">Default Host</a>:                 Selecting a default host. 
</li>
<li>
<a href="#Multi_002dhops">Multi-hops</a>:                   Connecting to a remote host using multiple hops. 
</li>
<li>
<a href="#Customizing-Methods">Customizing Methods</a>:          Using Non-Standard Methods. 
</li>
<li>
<a href="#Customizing-Completion">Customizing Completion</a>:       Selecting config files for user/host name completion. 
</li>
<li>
<a href="#Password-handling">Password handling</a>:            Reusing passwords for several connections. 
</li>
<li>
<a href="#Connection-caching">Connection caching</a>:           Reusing connection related information. 
</li>
<li>
<a href="#Predefined-connection-information">Predefined connection information</a>
                                Setting own connection related information. 
</li>
<li>
<a href="#Remote-programs">Remote programs</a>:              How <span class="sc">tramp</span> finds and uses programs on the remote host. 
</li>
<li>
<a href="#Remote-shell-setup">Remote shell setup</a>:           Remote shell setup hints. 
</li>
<li>
<a href="#Android-shell-setup">Android shell setup</a>:          Android shell setup hints. 
</li>
<li>
<a href="#Auto_002dsave-and-Backup">Auto-save and Backup</a>:         Auto-save and Backup. 
</li>
<li>
<a href="#Windows-setup-hints">Windows setup hints</a>:          Issues with Cygwin ssh.

</li>
</ul>
<p>Using <span class="sc">tramp</span>

</p>
<ul class="menu">
<li>
<a href="#File-name-Syntax">File name Syntax</a>:             <span class="sc">tramp</span> file name conventions. 
</li>
<li>
<a href="#File-name-completion">File name completion</a>:         File name completion. 
</li>
<li>
<a href="#Ad_002dhoc-multi_002dhops">Ad-hoc multi-hops</a>:            Declaring multiple hops in the file name. 
</li>
<li>
<a href="#Remote-processes">Remote processes</a>:             Integration with other Emacs packages. 
</li>
<li>
<a href="#Cleanup-remote-connections">Cleanup remote connections</a>:   Cleanup remote connections.

</li>
</ul>
<p>How file names, directories and localnames are mangled and managed

</p>
<ul class="menu">
<li>
<a href="#Localname-deconstruction">Localname deconstruction</a>:     Breaking a localname into its components.

</li>
<li>
<a href="#External-packages">External packages</a>:            Integration with external Lisp packages.

   </li>
</ul>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Overview"></a></div>

<h2 class="chapter">1 An overview of <span class="sc">tramp</span>
</h2>

<p><a name="index-overview-1"></a>
<span class="sc">tramp</span> is for transparently accessing remote files from within
Emacs.  <span class="sc">tramp</span> enables an easy, convenient, and
consistent interface to remote files as if they are local files. 
<span class="sc">tramp</span>'s transparency extends to editing, version control, and
<code>dired</code>.

   </p>
<p><span class="sc">tramp</span> can access remote hosts using any number of access
methods, such as <samp><span class="command">rsh</span></samp>, <samp><span class="command">rlogin</span></samp>, <samp><span class="command">telnet</span></samp>,
and related programs.  If these programs can successfully pass
<acronym>ASCII]</acronym> characters, <span class="sc">tramp</span> can use them. 
<span class="sc">tramp</span> does not require or mandate 8-bit clean connections.

   </p>
<p><span class="sc">tramp</span>'s most common access method is through <samp><span class="command">ssh</span></samp>, a
more secure alternative to <samp><span class="command">ftp</span></samp> and other older access
methods.

   </p>
<p><span class="sc">tramp</span> on Windows operating systems is integrated with the
PuTTY package, and uses the <samp><span class="command">plink</span></samp> program.

   </p>
<p><span class="sc">tramp</span> mostly operates transparently in the background using
the connection programs.  As long as these programs enable remote login
and can use the terminal, <span class="sc">tramp</span> can adapt them for seamless
and transparent access.

   </p>
<p><span class="sc">tramp</span> temporarily transfers a remote file's contents to the
local host editing and related operations.  <span class="sc">tramp</span> can also
transfer files between hosts using standard Emacs interfaces, a
benefit of direct integration of <span class="sc">tramp</span> in Emacs.

   </p>
<p><span class="sc">tramp</span> can transfer files using any number of available host
programs for remote files, such as <samp><span class="command">rcp</span></samp>, <samp><span class="command">scp</span></samp>,
<samp><span class="command">rsync</span></samp> or (under Windows) <samp><span class="command">pscp</span></samp>.  <span class="sc">tramp</span>
provides easy ways to specify these programs and customize them to
specific files, hosts, or access methods.

   </p>
<p>For faster small-size file transfers, <span class="sc">tramp</span> supports encoded
transfers directly through the shell using <samp><span class="command">mimencode</span></samp> or
<samp><span class="command">uuencode</span></samp> provided such tools are available on the remote
host.

</p>
<h5 class="subsubheading">
<span class="sc">tramp</span> behind the scenes</h5>

<p><a name="index-behind-the-scenes-2"></a><a name="index-details-of-operation-3"></a><a name="index-how-it-works-4"></a>
Accessing a remote file through <span class="sc">tramp</span> entails a series of
actions, many of which are transparent to the user.  Yet some actions
may require user response (such as entering passwords or completing
file names).  One typical scenario, opening a file on a remote host, is
presented here to illustrate the steps involved:

   </p>
<p><kbd>C-x C-f</kbd> to initiate find-file, enter part of the <span class="sc">tramp</span>
file name, then hit <kbd>&lt;TAB&gt;</kbd> for completion.  If this is the
first time connection to that host, here's what happens:

     </p>
<ul>
<li>
<span class="sc">tramp</span> invokes `<samp><span class="samp">telnet </span><var>host</var></samp>' or `<samp><span class="samp">rsh </span><var>host</var><span class="samp">
-l </span><var>user</var></samp>' and establishes an external process to connect to the
remote host.  <span class="sc">tramp</span> communicates with the process through an
Emacs buffer, which also shows output from the remote
host.

     </li>
<li>The remote host may prompt for a login name (for <samp><span class="command">telnet</span></samp>, for
example) in the buffer.  If on the other hand, the login name was
included in the file name portion, <span class="sc">tramp</span> sends the login name
followed by a newline.

     </li>
<li>The remote host may then prompt for a password or pass phrase (for
<samp><span class="command">rsh</span></samp> or for <samp><span class="command">telnet</span></samp>).  <span class="sc">tramp</span> displays the
password prompt in the minibuffer.  <span class="sc">tramp</span> then sends whatever
is entered to the remote host, followed by a newline.

     </li>
<li>
<span class="sc">tramp</span> now waits for either the shell prompt or a failed login
message.

     <p>If <span class="sc">tramp</span> does not receive any messages within a timeout period
(a minute, for example), then <span class="sc">tramp</span> responds with an error
message about not finding the remote shell prompt.  If any messages
from the remote host, <span class="sc">tramp</span> displays them in the buffer.

     </p>
<p>For any `<samp><span class="samp">login failed</span></samp>' message from the remote host,
<span class="sc">tramp</span> aborts the login attempt, and repeats the login steps
again.

     </p>
</li>
<li>Upon successful login and <span class="sc">tramp</span> recognizes the shell prompt
from the remote host, <span class="sc">tramp</span> prepares the shell environment by
turning off echoing, setting shell prompt, and other housekeeping
chores.

     <p><strong>Note</strong> that for the remote shell, <span class="sc">tramp</span> invokes
<samp><span class="command">/bin/sh</span></samp>.  The remote host must recognize `<samp><span class="samp">exec /bin/sh</span></samp>'
and execute the appropriate shell.  This shell must support Bourne
shell syntax.

     </p>
</li>
<li>
<span class="sc">tramp</span> executes <samp><span class="command">cd</span></samp> and <samp><span class="command">ls</span></samp> commands to find
which files exist on the remote host.  <span class="sc">tramp</span> sometimes uses
<samp><span class="command">echo</span></samp> with globbing.  <span class="sc">tramp</span> checks if a file or
directory is writable with <samp><span class="command">test</span></samp>.  After each command,
<span class="sc">tramp</span> parses the output from the remote host for completing
the next operation.

     </li>
<li>After remote file name completion, <span class="sc">tramp</span> transfers the file
contents from the remote host.

     <p>For inline transfers, <span class="sc">tramp</span> sends a command, such as
`<samp><span class="samp">mimencode -b /path/to/remote/file</span></samp>', waits until the output has
accumulated in the buffer, decodes that output to produce the file's
contents.

     </p>
<p>For external transfers, <span class="sc">tramp</span> sends a command as follows:
     </p>
<pre class="example">          rcp user@host:/path/to/remote/file /tmp/tramp.4711
     </pre>
     <p><span class="sc">tramp</span> reads the local temporary file <samp><span class="file">/tmp/tramp.4711</span></samp>
into a buffer, and then deletes the temporary file.

     </p>
</li>
<li>Edit, modify, change the buffer contents as normal, and then save the
buffer wth <kbd>C-x C-s</kbd>.

     </li>
<li>
<span class="sc">tramp</span> transfers the buffer contents to the remote host in
a reverse of the process using the appropriate inline or external
program. 
</li>
</ul>

   <p>I hope this has provided you with a basic overview of what happens
behind the scenes when you open a file with <span class="sc">tramp</span>.

<!-- For the end user -->
</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Obtaining-Tramp"></a></div>

<h2 class="chapter">2 Obtaining Tramp.</h2>

<p><a name="index-obtaining-Tramp-5"></a>
<span class="sc">tramp</span> is included as part of Emacs (since Emacs version 22.1).

   </p>
<p><span class="sc">tramp</span> is also freely packaged for download on the Internet at
<a href="ftp://ftp.gnu.org/gnu/tramp/">ftp://ftp.gnu.org/gnu/tramp/</a>.

   </p>
<p><span class="sc">tramp</span> development versions are available on Git servers. 
Development versions contain new and incomplete features.

   </p>
<p>One way to obtain from Git server is to visit the Savannah project
page at the following URL and then clicking on the Git link in the
navigation bar at the top.

</p>
<p class="noindent"><a href="http://savannah.gnu.org/projects/tramp/">http://savannah.gnu.org/projects/tramp/</a>

</p>
<p class="noindent">Another way is to follow the terminal session below:

</p>
<pre class="example">     ] <strong>cd ~/emacs</strong>
     ] <strong>git clone git://git.savannah.gnu.org/tramp.git</strong>
</pre>
   <p class="noindent">From behind a firewall:

</p>
<pre class="example">     ] <strong>git config --global http.proxy http://user:pwd@proxy.server.com:8080</strong>
     ] <strong>git clone http://git.savannah.gnu.org/r/tramp.git</strong>
</pre>
   <p class="noindent">Tramp developers:

</p>
<pre class="example">     ] <strong>git clone login@git.sv.gnu.org:/srv/git/tramp.git</strong>
</pre>
   <p class="noindent">After one of the above commands, <samp><span class="file">~/emacs/tramp</span></samp> will
containing the latest version of <span class="sc">tramp</span>.

</p>
<p class="noindent">To fetch updates from the repository, use git pull:

</p>
<pre class="example">     ] <strong>cd ~/emacs/tramp</strong>
     ] <strong>git pull</strong>
</pre>
   <p class="noindent">Run <samp><span class="command">autoconf</span></samp> as follows to generate an up-to-date
<samp><span class="file">configure</span></samp> script:

</p>
<pre class="example">     ] <strong>cd ~/emacs/tramp</strong>
     ] <strong>autoconf</strong>
</pre>
   <mbp:pagebreak></mbp:pagebreak><div class="node"><a name="History"></a></div>

<h2 class="chapter">3 History of <span class="sc">tramp</span>
</h2>

<p><a name="index-history-6"></a><a name="index-development-history-7"></a>
<span class="sc">tramp</span> development started at the end of November 1998 as
<samp><span class="file">rssh.el</span></samp>.  It provided only one method of access.  It used
<samp><span class="command">ssh</span></samp> for login and <samp><span class="command">scp</span></samp> to transfer file contents. 
The name was changed to <samp><span class="file">rcp.el</span></samp> before it got its preset name
<span class="sc">tramp</span>.  New methods of remote access were added, so was support
for version control.

   </p>
<p>April 2000 was the first time when multi-hop methods were added.  In
July 2002, <span class="sc">tramp</span> unified file names with Ange-FTP.  In July
2004, proxy hosts replaced multi-hop methods.  Running commands on
remote hosts was introduced in December 2005. 
Support for gateways since April 2007. 
GVFS integration started in February 2009. 
Remote commands on Windows hosts since September 2011. 
Ad-hoc multi-hop methods (with a changed syntax) re-enabled in November
2011.

   </p>
<p>In November 2012, added Juergen Hoetzel's <samp><span class="file">tramp-adb.el</span></samp>.

   </p>
<p>In December 2001, XEmacs package repository adds <span class="sc">tramp</span>.

<!-- Installation chapter is necessary only in case of standalone -->
<!-- installation.  Text taken from trampinst.texi. -->
</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Configuration"></a></div>

<h2 class="chapter">4 Configuring <span class="sc">tramp</span>
</h2>

<p><a name="index-configuration-8"></a><a name="index-default-configuration-9"></a>
<span class="sc">tramp</span> is initially configured to use the <samp><span class="command">scp</span></samp> program
to connect to the remote host.  Just type <kbd>C-x C-f</kbd> and then enter
file name <samp><span class="file">/user@host:/path/to.file</span></samp>.  For details,
see See <a href="#Default-Method">Default Method</a>.

   </p>
<p>For problems related to the behavior of remote shell, see <a href="#Remote-shell-setup">Remote shell setup</a> for details.

   </p>
<p>For changing the connection type and file access method from the
defaults to one of several other options, see (see <a href="#Connection-types">Connection types</a>).

   </p>
<p><strong>Note</strong> that some user options and variables described in these
examples are not auto loaded by Emacs.  All examples
require <span class="sc">tramp</span> is installed and loaded:

</p>
<pre class="lisp">     (require 'tramp)
</pre>
   <ul class="menu">
<li>
<a accesskey="1" href="#Connection-types">Connection types</a>:             Types of connections to remote hosts. 
</li>
<li>
<a accesskey="2" href="#Inline-methods">Inline methods</a>:               Inline methods. 
</li>
<li>
<a accesskey="3" href="#External-methods">External methods</a>:             External methods.

</li>
<li>
<a accesskey="4" href="#GVFS-based-methods">GVFS based methods</a>:           GVFS based external methods.

</li>
<li>
<a accesskey="5" href="#Gateway-methods">Gateway methods</a>:              Gateway methods. 
</li>
<li>
<a accesskey="6" href="#Default-Method">Default Method</a>:               Selecting a default method. 
                                  Here we also try to help those who
                                  don't have the foggiest which method
                                  is right for them. 
</li>
<li>
<a accesskey="7" href="#Default-User">Default User</a>:                 Selecting a default user. 
</li>
<li>
<a accesskey="8" href="#Default-Host">Default Host</a>:                 Selecting a default host. 
</li>
<li>
<a accesskey="9" href="#Multi_002dhops">Multi-hops</a>:                   Connecting to a remote host using multiple hops. 
</li>
<li>
<a href="#Customizing-Methods">Customizing Methods</a>:          Using Non-Standard Methods. 
</li>
<li>
<a href="#Customizing-Completion">Customizing Completion</a>:       Selecting config files for user/host name completion. 
</li>
<li>
<a href="#Password-handling">Password handling</a>:            Reusing passwords for several connections. 
</li>
<li>
<a href="#Connection-caching">Connection caching</a>:           Reusing connection related information. 
</li>
<li>
<a href="#Predefined-connection-information">Predefined connection information</a>
                                Setting own connection related information. 
</li>
<li>
<a href="#Remote-programs">Remote programs</a>:              How <span class="sc">tramp</span> finds and uses programs on the remote host. 
</li>
<li>
<a href="#Remote-shell-setup">Remote shell setup</a>:           Remote shell setup hints. 
</li>
<li>
<a href="#Android-shell-setup">Android shell setup</a>:          Android shell setup hints. 
</li>
<li>
<a href="#Auto_002dsave-and-Backup">Auto-save and Backup</a>:         Auto-save and Backup. 
</li>
<li>
<a href="#Windows-setup-hints">Windows setup hints</a>:          Issues with Cygwin ssh. 
</li>
</ul>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Connection-types"></a></div>

<h3 class="section">4.1 Types of connections to remote hosts</h3>

<p><a name="index-connection-types_002c-overview-10"></a>
<dfn>Inline method</dfn> and <dfn>external method</dfn> are the two basic types
of access methods.  While they both use the same remote shell access
programs, such as <samp><span class="command">rsh</span></samp>, <samp><span class="command">ssh</span></samp>, or <samp><span class="command">telnet</span></samp>,
they differ in the file access methods.  Choosing the right method
becomes important for editing files, transferring large files, or
operating on a large number of files.

   </p>
<p><a name="index-inline-methods-11"></a><a name="index-external-methods-12"></a><a name="index-methods_002c-inline-13"></a><a name="index-methods_002c-external-14"></a>
The performance of the external methods is generally better than that
of the inline methods, at least for large files.  This is caused by
the need to encode and decode the data when transferring inline.

   </p>
<p>The one exception to this rule are the <samp><span class="option">scp</span></samp>-based access
methods.  While these methods do see better performance when actually
transferring files, the overhead of the cryptographic negotiation at
startup may drown out the improvement in file transfer times.

   </p>
<p>External methods should be configured such a way that they don't
require a password (with <samp><span class="command">ssh-agent</span></samp>, or such alike).  Modern
<samp><span class="command">scp</span></samp> implementations offer options to reuse existing
<samp><span class="command">ssh</span></samp> connections, which will be enabled by default if
available.  If it isn't possible, you should consider <a href="#Password-handling">Password handling</a>, otherwise you will be prompted for a password every copy
action.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Inline-methods"></a></div>

<h3 class="section">4.2 Inline methods</h3>

<p><a name="index-inline-methods-15"></a><a name="index-methods_002c-inline-16"></a>
Inline methods use the same login connection to transfer file
contents.  Inline methods are quick and easy for small files.  They
depend on the availability of suitable encoding and decoding programs
on the remote host.  For local source and destination, <span class="sc">tramp</span>
may use built-in equivalents of such programs in Emacs.

   </p>
<p>Inline methods can work in situations where an external transfer
program is unavailable.  Inline methods also work when transferring
files between different <em>user identities</em> on the same host.

   </p>
<p><a name="index-uuencode-17"></a><a name="index-mimencode-18"></a><a name="index-base_002d64-encoding-19"></a>
<span class="sc">tramp</span> checks the remote host for the availability and
usability of <samp><span class="command">mimencode</span></samp> (part of the <samp><span class="command">metamail</span></samp>
package) or <samp><span class="command">uuencode</span></samp>.  <span class="sc">tramp</span> uses the first reliable
command it finds.  <span class="sc">tramp</span>'s search path can be customized, see
<a href="#Remote-programs">Remote programs</a>.

   </p>
<p>In case both <samp><span class="command">mimencode</span></samp> and <samp><span class="command">uuencode</span></samp> are
unavailable, <span class="sc">tramp</span> first transfers a small Perl program to the
remote host, and then tries that program for encoding and decoding.

   </p>
<p>To increase transfer speeds for large text files, use compression
before encoding.  The variable <var>tramp-inline-compress-start-size</var>
specifies the file size for such optimization.

     </p>
<dl>
<dt><samp><span class="option">rsh</span></samp></dt>
<dd>
<a name="index-method-rsh-20"></a><a name="index-rsh-method-21"></a>
<samp><span class="command">rsh</span></samp> is an option for connecting to hosts within local
networks since <samp><span class="command">rsh</span></samp> is not as secure as other methods.

     <br>
</dd>
<dt><samp><span class="option">ssh</span></samp></dt>
<dd>
<a name="index-method-ssh-22"></a><a name="index-ssh-method-23"></a>
<samp><span class="command">ssh</span></samp> is a more secure option than others to connect to a
remote host.

     <p><samp><span class="command">ssh</span></samp> can also take extra parameters as port numbers.  For
example, a host on port 42 is specified as <samp><span class="file">host#42</span></samp> (the real
host name, a hash sign, then a port number).  It is the same as passing
<code>-p 42</code> to the <samp><span class="command">ssh</span></samp> command.

     <br></p>
</dd>
<dt><samp><span class="option">telnet</span></samp></dt>
<dd>
<a name="index-method-telnet-24"></a><a name="index-telnet-method-25"></a>
Connecting to a remote host with <samp><span class="command">telnet</span></samp> is as insecure
as the <samp><span class="option">rsh</span></samp> method.

     <br>
</dd>
<dt><samp><span class="option">su</span></samp></dt>
<dd>
<a name="index-method-su-26"></a><a name="index-su-method-27"></a>
Instead of connecting to a remote host, <samp><span class="command">su</span></samp> program allows
editing as another user.  The host can be either `<samp><span class="samp">localhost</span></samp>' or
the host returned by the function <samp><span class="command">(system-name)</span></samp>.  See
<a href="#Multi_002dhops">Multi-hops</a> for an exception to this behavior.

     <br>
</dd>
<dt><samp><span class="option">sudo</span></samp></dt>
<dd>
<a name="index-method-sudo-28"></a><a name="index-sudo-method-29"></a>
Similar to <samp><span class="option">su</span></samp> method, <samp><span class="option">sudo</span></samp> uses <samp><span class="command">sudo</span></samp>. 
<samp><span class="command">sudo</span></samp> must have sufficient rights to start a shell.

     <br>
</dd>
<dt><samp><span class="option">sshx</span></samp></dt>
<dd>
<a name="index-method-sshx-30"></a><a name="index-sshx-method-31"></a>
Works like <samp><span class="option">ssh</span></samp> but without the extra authentication prompts. 
<samp><span class="option">sshx</span></samp> uses `<samp><span class="samp">ssh -t -t </span><var>host</var><span class="samp"> -l </span><var>user</var><span class="samp"> /bin/sh</span></samp>'
to open a connection with a “standard” login shell.

     <p><strong>Note</strong> that <samp><span class="option">sshx</span></samp> does not bypass authentication
questions.  For example, if the host key of the remote host is not
known, <samp><span class="option">sshx</span></samp> will still ask “Are you sure you want to
continue connecting?”.  <span class="sc">tramp</span> cannot handle such questions. 
Connections will have to be setup where logins can proceed without
such questions.

     </p>
<p><samp><span class="option">sshx</span></samp> is useful for Windows users when <samp><span class="command">ssh</span></samp> triggers
an error about allocating a pseudo tty.  This happens due to missing
shell prompts that confuses <span class="sc">tramp</span>.

     </p>
<p><samp><span class="option">sshx</span></samp> supports the `<samp><span class="samp">-p</span></samp>' argument.

     <br></p>
</dd>
<dt><samp><span class="option">krlogin</span></samp></dt>
<dd>
<a name="index-method-krlogin-32"></a><a name="index-krlogin-method-33"></a><a name="index-Kerberos-_0028with-krlogin-method_0029-34"></a>
This method is also similar to <samp><span class="option">ssh</span></samp>.  It uses the
<samp><span class="command">krlogin -x</span></samp> command only for remote host login.

     <br>
</dd>
<dt><samp><span class="option">ksu</span></samp></dt>
<dd>
<a name="index-method-ksu-35"></a><a name="index-ksu-method-36"></a><a name="index-Kerberos-_0028with-ksu-method_0029-37"></a>
This is another method from the Kerberos suite.  It behaves like <samp><span class="option">su</span></samp>.

     <br>
</dd>
<dt><samp><span class="option">plink</span></samp></dt>
<dd>
<a name="index-method-plink-38"></a><a name="index-plink-method-39"></a>
<samp><span class="option">plink</span></samp> method is for Windows users with the PuTTY
implementation of SSH.  It uses `<samp><span class="samp">plink -ssh</span></samp>' to log in to the
remote host.

     <p>Check the `<samp><span class="samp">Share SSH connections if possible</span></samp>' control for that
session.

     </p>
<p><samp><span class="option">plink</span></samp> method supports the `<samp><span class="samp">-P</span></samp>' argument.

     <br></p>
</dd>
<dt><samp><span class="option">plinkx</span></samp></dt>
<dd>
<a name="index-method-plinkx-40"></a><a name="index-plinkx-method-41"></a>
Another method using PuTTY on Windows with session names instead of
host names.  <samp><span class="option">plinkx</span></samp> calls `<samp><span class="samp">plink -load </span><var>session</var><span class="samp"> -t</span></samp>'. 
User names and port numbers must be defined in the session.

     <p>Check the `<samp><span class="samp">Share SSH connections if possible</span></samp>' control for that
session.

   </p>
</dd>
</dl>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="External-methods"></a></div>

<h3 class="section">4.3 External methods</h3>

<p><a name="index-methods_002c-external-42"></a><a name="index-external-methods-43"></a>
External methods operate over multiple channels, using the remote
shell connection for some actions while delegating file transfers to
an external transfer program.

   </p>
<p>External methods save on the overhead of encoding and decoding of
inline methods.

   </p>
<p>Since external methods have the overhead of opening a new channel,
files smaller than <var>tramp-copy-size-limit</var> still use inline
methods.

     </p>
<dl>
<dt>
<samp><span class="option">rcp</span></samp>—<samp><span class="command">rsh</span></samp> and <samp><span class="command">rcp</span></samp>
</dt>
<dd>
<a name="index-method-rcp-44"></a><a name="index-rcp-method-45"></a><a name="index-rcp-_0028with-rcp-method_0029-46"></a><a name="index-rsh-_0028with-rcp-method_0029-47"></a>
This method uses the <samp><span class="command">rsh</span></samp> and <samp><span class="command">rcp</span></samp> commands to
connect to the remote host and transfer files.  This is the fastest
access method available.

     <p>The alternative method <samp><span class="option">remcp</span></samp> uses the <samp><span class="command">remsh</span></samp> and
<samp><span class="command">rcp</span></samp> commands.

     <br></p>
</dd>
<dt>
<samp><span class="option">scp</span></samp>—<samp><span class="command">ssh</span></samp> and <samp><span class="command">scp</span></samp>
</dt>
<dd>
<a name="index-method-scp-48"></a><a name="index-scp-method-49"></a><a name="index-scp-_0028with-scp-method_0029-50"></a><a name="index-ssh-_0028with-scp-method_0029-51"></a>
Using a combination of <samp><span class="command">ssh</span></samp> to connect and <samp><span class="command">scp</span></samp> to
transfer is the most secure.  While the performance is good, it is
slower than the inline methods for smaller files.  Though there is no
overhead of encoding and decoding of the inline methods,
<samp><span class="command">scp</span></samp>'s cryptographic handshake negates those speed gains.

     <p><samp><span class="option">ssh</span></samp>-based methods support `<samp><span class="samp">-p</span></samp>' feature for specifying
port numbers.  For example, <samp><span class="file">host#42</span></samp> passes `<samp><span class="samp">-p 42</span></samp>' in the
argument list to <samp><span class="command">ssh</span></samp>, and `<samp><span class="samp">-P 42</span></samp>' in the argument list
to <samp><span class="command">scp</span></samp>.

     <br></p>
</dd>
<dt>
<samp><span class="option">rsync</span></samp>—<samp><span class="command">ssh</span></samp> and <samp><span class="command">rsync</span></samp>
</dt>
<dd>
<a name="index-method-rsync-52"></a><a name="index-rsync-method-53"></a><a name="index-rsync-_0028with-rsync-method_0029-54"></a><a name="index-ssh-_0028with-rsync-method_0029-55"></a>
<samp><span class="command">ssh</span></samp> command to connect in combination with <samp><span class="command">rsync</span></samp>
command to transfer is similar to the <samp><span class="option">scp</span></samp> method.

     <p><samp><span class="command">rsync</span></samp> performs much better than <samp><span class="command">scp</span></samp> when
transferring files that exist on both hosts.  However, this advantage
is lost if the file exists only on one side of the connection.

     </p>
<p>This method supports the `<samp><span class="samp">-p</span></samp>' argument.

     <br></p>
</dd>
<dt>
<samp><span class="option">scpx</span></samp>—<samp><span class="command">ssh</span></samp> and <samp><span class="command">scp</span></samp>
</dt>
<dd>
<a name="index-method-scpx-56"></a><a name="index-scpx-method-57"></a><a name="index-scp-_0028with-scpx-method_0029-58"></a><a name="index-ssh-_0028with-scpx-method_0029-59"></a>
<samp><span class="option">scpx</span></samp> is useful to avoid login shell questions.  It is similar
in performance to <samp><span class="option">scp</span></samp>.  <samp><span class="option">scpx</span></samp> uses `<samp><span class="samp">ssh -t -t
</span><var>host</var><span class="samp"> -l </span><var>user</var><span class="samp"> /bin/sh</span></samp>' to open a connection.

     <p><samp><span class="option">sshx</span></samp> is useful for Windows users when <samp><span class="command">ssh</span></samp> triggers
an error about allocating a pseudo tty.  This happens due to missing
shell prompts that confuses <span class="sc">tramp</span>.

     </p>
<p>This method supports the `<samp><span class="samp">-p</span></samp>' argument.

     <br></p>
</dd>
<dt>
<samp><span class="option">pscp</span></samp>—<samp><span class="command">plink</span></samp> and <samp><span class="command">pscp</span></samp><br><dt>
<samp><span class="option">psftp</span></samp>—<samp><span class="command">plink</span></samp> and <samp><span class="command">psftp</span></samp>
</dt>
</dt>
<dd>
<a name="index-method-pscp-60"></a><a name="index-pscp-method-61"></a><a name="index-pscp-_0028with-pscp-method_0029-62"></a><a name="index-plink-_0028with-pscp-method_0029-63"></a><a name="index-PuTTY-_0028with-pscp-method_0029-64"></a><a name="index-method-psftp-65"></a><a name="index-psftp-method-66"></a><a name="index-pscp-_0028with-psftp-method_0029-67"></a><a name="index-plink-_0028with-psftp-method_0029-68"></a><a name="index-PuTTY-_0028with-psftp-method_0029-69"></a>
These methods are similar to <samp><span class="option">scp</span></samp> or <samp><span class="option">sftp</span></samp>, but they
use the <samp><span class="command">plink</span></samp> command to connect to the remote host, and
they use <samp><span class="command">pscp</span></samp> or <samp><span class="command">psftp</span></samp> for transferring the files. 
These programs are part of PuTTY, an SSH implementation for Windows.

     <p>Check the `<samp><span class="samp">Share SSH connections if possible</span></samp>' control for that
session.

     </p>
<p>These methods support the `<samp><span class="samp">-P</span></samp>' argument.

     <br></p>
</dd>
<dt>
<samp><span class="option">fcp</span></samp>—<samp><span class="command">fsh</span></samp> and <samp><span class="command">fcp</span></samp>
</dt>
<dd>
<a name="index-method-fcp-70"></a><a name="index-fcp-method-71"></a><a name="index-fsh-_0028with-fcp-method_0029-72"></a><a name="index-fcp-_0028with-fcp-method_0029-73"></a>
This method is similar to <samp><span class="option">scp</span></samp>, but uses <samp><span class="command">fsh</span></samp> to
connect and <samp><span class="command">fcp</span></samp> to transfer files.  <samp><span class="command">fsh/fcp</span></samp>, a
front-end for <samp><span class="command">ssh</span></samp>, reuse <samp><span class="command">ssh</span></samp> session by
submitting several commands.  This avoids the startup overhead due to
<samp><span class="command">scp</span></samp>'s secure connection.  Inline methods have similar
benefits.

     <p>The command used for this connection is: `<samp><span class="samp">fsh </span><var>host</var><span class="samp"> -l
</span><var>user</var><span class="samp"> /bin/sh -i</span></samp>'

     </p>
<p><a name="index-method-fsh-74"></a><a name="index-fsh-method-75"></a>
<samp><span class="option">fsh</span></samp> has no inline method since the multiplexing it offers is
not useful for <span class="sc">tramp</span>.  <samp><span class="command">fsh</span></samp> connects to remote host
and <span class="sc">tramp</span> keeps that one connection open.

     <br></p>
</dd>
<dt>
<samp><span class="option">nc</span></samp>—<samp><span class="command">telnet</span></samp> and <samp><span class="command">nc</span></samp>
</dt>
<dd>
<a name="index-method-nc-76"></a><a name="index-nc-method-77"></a><a name="index-nc-_0028with-nc-method_0029-78"></a><a name="index-telnet-_0028with-nc-method_0029-79"></a>
Using <samp><span class="command">telnet</span></samp> to connect and <samp><span class="command">nc</span></samp> to transfer files
is sometimes the only combination suitable for accessing routers or
NAS hosts.  These dumb devices have severely restricted local shells,
such as the <samp><span class="command">busybox</span></samp> and do not host any other encode or
decode programs.

     <br>
</dd>
<dt><samp><span class="option">ftp</span></samp></dt>
<dd>
<a name="index-method-ftp-80"></a><a name="index-ftp-method-81"></a>
When <span class="sc">tramp</span> uses <samp><span class="option">ftp</span></samp>, it forwards requests to whatever
ftp program is specified by Ange-FTP.  This external
program must be capable of servicing requests from <span class="sc">tramp</span>.

     <br>
</dd>
<dt>
<samp><span class="option">smb</span></samp>—<samp><span class="command">smbclient</span></samp>
</dt>
<dd>
<a name="index-method-smb-82"></a><a name="index-smb-method-83"></a>
This non-native <span class="sc">tramp</span> method connects via the Server Message
Block (SMB) networking protocol to hosts running file servers that are
typically based on <a href="https://www.samba.org/">Samba</a> or MS Windows.

     <p>Using <samp><span class="command">smbclient</span></samp> requires a few tweaks when working with
<span class="sc">tramp</span>:

     </p>
<p>The first directory in the localname must be a share name on the
remote host.

     </p>
<p>Since SMB shares end in the <code>$</code> character, <span class="sc">tramp</span> must use
<code>$$</code> when specifying those shares to avoid environment variable
substitutions.

     </p>
<p>When <span class="sc">tramp</span> is not specific about the share name or uses the
generic remote directory <code>/</code>, <samp><span class="command">smbclient</span></samp> returns all
available shares.

     </p>
<p>Since SMB authentication is based on each SMB share, <span class="sc">tramp</span>
prompts for a password even when accessing a different share on the
same SMB host.  This prompting can be suppressed by <a href="#Password-handling">Password handling</a>.

     </p>
<p>To accommodate user name/domain name syntax required by MS Windows
authorization, <span class="sc">tramp</span> provides for an extended syntax in
<code>user%domain</code> format (where user is username, <code>%</code> is the
percent symbol, and domain is the windows domain name).  An example:

     </p>
<pre class="example">          /smb:daniel%BIZARRE@melancholia:/daniel$$/.emacs
     </pre>
     <p>where user <code>daniel</code> connects as a domain user to the SMB host
<code>melancholia</code> in the windows domain <code>BIZARRE</code> to edit
<samp><span class="file">.emacs</span></samp> located in the home directory (share <code>daniel$</code>).

     </p>
<p>Alternatively, for local WINS users (as opposed to domain users),
substitute the domain name with the name of the local host in
UPPERCASE as shown here:

     </p>
<pre class="example">          /smb:daniel%MELANCHOLIA@melancholia:/daniel$$/.emacs
     </pre>
     <p>where user <code>daniel</code> connects as local user to the SMB host
<code>melancholia</code> in the local domain <code>MELANCHOLIA</code> to edit
<samp><span class="file">.emacs</span></samp> located in the home directory (share <code>daniel$</code>).

     </p>
<p>The domain name and user name are optional for <samp><span class="command">smbclient</span></samp>
authentication.  When user name is not specified, <samp><span class="command">smbclient</span></samp>
uses the anonymous user (without prompting for password).  This
behavior is unlike other <span class="sc">tramp</span> methods, where local user name
is substituted.

     </p>
<p>The <samp><span class="option">smb</span></samp> method is unavailable if Emacs is run under a
local user authentication context in MS Windows.  However such users
can still access remote files using UNC file names instead of <span class="sc">tramp</span>:

     </p>
<pre class="example">          //melancholia/daniel$$/.emacs
     </pre>
     <p>UNC file name specification does not allow the specification of a
different user name for authentication like the <samp><span class="command">smbclient</span></samp>
can.

     <br></p>
</dd>
<dt><samp><span class="option">adb</span></samp></dt>
<dd>
<a name="index-method-adb-84"></a><a name="index-adb-method-85"></a>
This method uses Android Debug Bridge program for accessing Android
devices.  The Android Debug Bridge must be installed locally for
<span class="sc">tramp</span> to work.  Some GNU/Linux distributions provide Android
Debug Bridge as an installation package.  Alternatively, the program is
installed as part of the Android SDK.  <span class="sc">tramp</span> finds the
<samp><span class="command">adb</span></samp> program either via the <samp><span class="env">PATH</span></samp> environment variable
or the absolute path set in the variable <var>tramp-adb-program</var>.

     <p><span class="sc">tramp</span> connects to Android devices with <samp><span class="option">adb</span></samp> only when
the custom option <samp><span class="option">tramp-adb-connect-if-not-connected</span></samp> is not
<code>nil</code>.  Otherwise, the connection must be established outside
Emacs.

     </p>
<p><span class="sc">tramp</span> does not require a host name part of the remote file
name when a single Android device is connected to <samp><span class="command">adb</span></samp>. 
<span class="sc">tramp</span> instead uses <samp><span class="file">/adb::</span></samp> as the default
name.  <samp><span class="command">adb devices</span></samp> shows available host names.

     </p>
<p><samp><span class="option">adb</span></samp> method normally does not need user name to authenticate
on the Android device because it runs under the <samp><span class="command">adbd</span></samp>
process.  But when a user name is specified, however, <span class="sc">tramp</span>
applies an <samp><span class="command">su</span></samp> in the syntax.  When authentication does not
succeed, especially on un-rooted Android devices, <span class="sc">tramp</span>
displays login errors.

     </p>
<p>For Android devices connected through TCP/IP, a port number can be
specified using <samp><span class="file">device#42</span></samp> host name syntax or <span class="sc">tramp</span> can
use the default value as declared in <samp><span class="command">adb</span></samp> command.  Port
numbers are not applicable to Android devices connected through USB.

   </p>
</dd>
</dl>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="GVFS-based-methods"></a></div>

<h3 class="section">4.4 GVFS based external methods</h3>

<p><a name="index-methods_002c-gvfs-86"></a><a name="index-gvfs-based-methods-87"></a><a name="index-dbus-88"></a>
GVFS is the virtual file system for the Gnome Desktop,
<a href="http://en.wikipedia.org/wiki/GVFS">http://en.wikipedia.org/wiki/GVFS</a>.  Remote files on GVFS are
mounted locally through FUSE and <span class="sc">tramp</span> uses this locally
mounted directory internally.

   </p>
<p>Emacs uses the D-Bus mechanism to communicate with GVFS. 
Emacs must have the message bus system, D-Bus integration
active, see <a href="dbus.html#Top">D-Bus</a>.

     </p>
<dl>
<dt><samp><span class="option">afp</span></samp></dt>
<dd>
<a name="index-method-afp-89"></a><a name="index-afp-method-90"></a>
This method is for connecting to remote hosts with the Apple Filing
Protocol for accessing files on Mac OS X volumes.  <span class="sc">tramp</span> access
syntax requires a leading volume (share) name, for example:
<samp><span class="file">/afp:user@host:/volume</span></samp>.

     <br>
</dd>
<dt>
<samp><span class="option">dav</span></samp><br><dt><samp><span class="option">davs</span></samp></dt>
</dt>
<dd>
<a name="index-method-dav-91"></a><a name="index-method-davs-92"></a><a name="index-dav-method-93"></a><a name="index-davs-method-94"></a>
<samp><span class="option">dav</span></samp> method provides access to WebDAV files and directories
based on standard protocols, such as HTTP.  <samp><span class="option">davs</span></samp> does the same
but with SSL encryption.  Both methods support the port numbers.

     <br>
</dd>
<dt><samp><span class="option">obex</span></samp></dt>
<dd>
<a name="index-method-obex-95"></a><a name="index-obex-method-96"></a>
OBEX is an FTP-like access protocol for cell phones and similar simple
devices.  <span class="sc">tramp</span> supports OBEX over Bluetooth.

     <br>
</dd>
<dt><samp><span class="option">sftp</span></samp></dt>
<dd>
<a name="index-method-sftp-97"></a><a name="index-sftp-method-98"></a>
This method uses <samp><span class="command">sftp</span></samp> in order to securely access remote
hosts.  <samp><span class="command">sftp</span></samp> is a more secure option for connecting to hosts
that for security reasons refuse <samp><span class="command">ssh</span></samp> connections.

     <br>
</dd>
<dt><samp><span class="option">synce</span></samp></dt>
<dd>
<a name="index-method-synce-99"></a><a name="index-synce-method-100"></a>
<samp><span class="option">synce</span></samp> method allows connecting to Windows Mobile devices.  It
uses GVFS for mounting remote files and directories via FUSE and
requires the SYNCE-GVFS plugin.

   </dd>
</dl>

<div class="defun">
— User Option: <b>tramp-gvfs-methods</b><var><a name="index-tramp_002dgvfs_002dmethods-101"></a></var><br>
<blockquote><p><a name="index-tramp_002dgvfs_002dmethods-102"></a>This custom option is a list of external methods for GVFS.  By
default, this list includes <samp><span class="option">afp</span></samp>, <samp><span class="option">dav</span></samp>, <samp><span class="option">davs</span></samp>,
<samp><span class="option">obex</span></samp>, <samp><span class="option">sftp</span></samp> and <samp><span class="option">synce</span></samp>.  Other methods to
include are: <samp><span class="option">ftp</span></samp> and <samp><span class="option">smb</span></samp>. 
</p></blockquote>
</div>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Gateway-methods"></a></div>

<h3 class="section">4.5 Gateway methods</h3>

<p><a name="index-methods_002c-gateway-103"></a><a name="index-gateway-methods-104"></a>
Gateway methods are for proxy host declarations (see <a href="#Multi_002dhops">Multi-hops</a>)
so as to pass through firewalls and proxy servers.  They are not like
the other methods that declare direct connections to a remote host.

   </p>
<p>A gateway method always comes with a port setting.  <span class="sc">tramp</span>
targets the port number with the gateway method
<samp><span class="file">localhost#random_port</span></samp> from where the firewall or proxy server
is accessed.

   </p>
<p>Gateway methods support user name and password declarations for
authenticating the corresponding firewall or proxy server.  Such
authentication can be passed through only if granted access by system
administrators.

     </p>
<dl>
<dt><samp><span class="option">tunnel</span></samp></dt>
<dd>
<a name="index-method-tunnel-105"></a><a name="index-tunnel-method-106"></a>
This method implements an HTTP tunnel via the <samp><span class="command">CONNECT</span></samp>
command (conforming to RFC 2616, 2817 specifications).  Proxy servers
using HTTP version 1.1 or later protocol support this command.

     <p>For authentication, this protocol uses only <samp><span class="option">Basic
Authentication</span></samp> (see RFC 2617).  When no port number is specified, this
protocol defaults to <samp><span class="option">8080</span></samp>.

     <br></p>
</dd>
<dt><samp><span class="option">socks</span></samp></dt>
<dd>
<a name="index-method-socks-107"></a><a name="index-socks-method-108"></a>
The <samp><span class="option">socks</span></samp> method connects to SOCKSv5 servers (see RFC 1928)
and supports <samp><span class="option">Username/Password Authentication</span></samp>.

     <p>The default port number for the socks server is <samp><span class="option">1080</span></samp>, if not
specified otherwise.

   </p>
</dd>
</dl>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Default-Method"></a></div>

<h3 class="section">4.6 Selecting a default method</h3>

<p><a name="index-default-method-109"></a><a name="index-tramp_002ddefault_002dmethod-110"></a><a name="index-tramp_002ddefault_002dmethod_002dalist-111"></a>
Default method is for transferring files.  The variable
<code>tramp-default-method</code> sets it.  <span class="sc">tramp</span> uses this variable
to determine the default method for tramp file names that do not have
one specified.

</p>
<pre class="lisp">     (setq tramp-default-method "ssh")
</pre>
   <p>Default methods for transferring files can be customized for specific
user and host combinations through the alist variable
<code>tramp-default-method-alist</code>.

   </p>
<p>For example, the following two lines specify to use the <samp><span class="option">ssh</span></samp>
method for all user names matching `<samp><span class="samp">john</span></samp>' and the <samp><span class="option">rsync</span></samp>
method for all host names matching `<samp><span class="samp">lily</span></samp>'.  The third line
specifies to use the <samp><span class="option">su</span></samp> method for the user `<samp><span class="samp">root</span></samp>' on
the host `<samp><span class="samp">localhost</span></samp>'.

</p>
<pre class="lisp">     (add-to-list 'tramp-default-method-alist '("" "john" "ssh"))
     (add-to-list 'tramp-default-method-alist '("lily" "" "rsync"))
     (add-to-list 'tramp-default-method-alist
                  '("\\`localhost\\'" "\\`root\\'" "su"))
</pre>
   <p class="noindent">See the documentation for the variable
<code>tramp-default-method-alist</code> for details.

</p>
<p class="noindent">External methods performance faster for large files.

</p>
<p class="noindent">See <a href="#Inline-methods">Inline methods</a>. 
See <a href="#External-methods">External methods</a>.

   </p>
<p>Choosing the access method also depends on the security environment. 
For example, <samp><span class="option">rsh</span></samp> and <samp><span class="option">telnet</span></samp> methods that use clear
text password transfers are inappropriate for over the Internet
connections.  Secure remote connections should use <samp><span class="option">ssh</span></samp> that
provide encryption.

</p>
<h4 class="subsection">4.6.1 Which method to use?</h4>

<p><a name="index-choosing-the-right-method-112"></a>
<span class="sc">tramp</span> provides maximum number of choices for maximum
flexibility.  Choosing which method depends on the hosts, clients,
network speeds, and the security context.

   </p>
<p>Start by using an inline method.

   </p>
<p>External methods might be more efficient for large files, but most
<span class="sc">tramp</span> users edit small files more often than large files.

   </p>
<p>Enable compression, <var>tramp-inline-compress-start-size</var>, for a
performance boost for large files.

   </p>
<p>Since <samp><span class="command">ssh</span></samp> has become the most common method of remote host
access and it has the most reasonable security protocols, use
<samp><span class="option">ssh</span></samp> method.  Typical <samp><span class="option">ssh</span></samp> usage to edit the
<samp><span class="file">/etc/motd</span></samp> file on the otherhost:

</p>
<pre class="example">     <kbd>C-x C-f /ssh:root@otherhost:/etc/motd &lt;RET&gt;</kbd>
</pre>
   <p>If <samp><span class="option">ssh</span></samp> is unavailable for whatever reason, look for other
obvious options.  For Windows, try the <samp><span class="option">plink</span></samp> method.  For
Kerberos, try <samp><span class="option">krlogin</span></samp>.

   </p>
<p>For editing local files as <samp><span class="option">su</span></samp> or <samp><span class="option">sudo</span></samp> methods, try
the shortened syntax of `<samp><span class="samp">root</span></samp>':

</p>
<pre class="example">     <kbd>C-x C-f /su::/etc/motd &lt;RET&gt;</kbd>
</pre>
   <p>For editing large files, <samp><span class="option">scp</span></samp> is faster than <samp><span class="option">ssh</span></samp>. 
<samp><span class="option">pscp</span></samp> is faster than <samp><span class="option">plink</span></samp>.  But this speed
improvement is not always true.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Default-User"></a></div>

<h3 class="section">4.7 Selecting a default user</h3>

<p><a name="index-default-user-113"></a><a name="index-tramp_002ddefault_002duser-114"></a><a name="index-tramp_002ddefault_002duser_002dalist-115"></a>
<span class="sc">tramp</span> file name can omit the user name part since
<span class="sc">tramp</span> substitutes the currently logged-in user name.  However
this substitution can be overridden with <code>tramp-default-user</code>. 
For example:

</p>
<pre class="lisp">     (setq tramp-default-user "root")
</pre>
   <p>Instead of a single default user, <code>tramp-default-user-alist</code>
allows multiple default user values based on access method or host
name combinations.  The alist can hold multiple values.  For example, to
use the `<samp><span class="samp">john</span></samp>' as the default user for the domain
`<samp><span class="samp">somewhere.else</span></samp>' only:

</p>
<pre class="lisp">     (add-to-list 'tramp-default-user-alist
                  '("ssh" ".*\\.somewhere\\.else\\'" "john"))
</pre>
   <p class="noindent">See the documentation for the variable <code>tramp-default-user-alist</code>
for more details.

   </p>
<p>A Caution: <span class="sc">tramp</span> will override any default user specified in
the configuration files outside Emacs, such as
<samp><span class="file">~/.ssh/config</span></samp>.  To stop <span class="sc">tramp</span> from applying the default
value, set the corresponding alist entry to nil:

</p>
<pre class="lisp">     (add-to-list 'tramp-default-user-alist
                  '("ssh" "\\`here\\.somewhere\\.else\\'" nil))
</pre>
   <p>The last entry in <code>tramp-default-user-alist</code> should be reserved
for catch-all or most often used login.

</p>
<pre class="lisp">     (add-to-list 'tramp-default-user-alist
                  '(nil nil "jonas") t)
</pre>
   <mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Default-Host"></a></div>

<h3 class="section">4.8 Selecting a default host</h3>

<p><a name="index-default-host-116"></a><a name="index-tramp_002ddefault_002dhost-117"></a><a name="index-tramp_002ddefault_002dhost_002dalist-118"></a>
When host name is omitted, <span class="sc">tramp</span> substitutes the value from
the <code>tramp-default-host</code> variable.  It is initially populated with
the local hostname where Emacs is running.  Both the
default user and default host can be overridden as follows:

</p>
<pre class="lisp">     (setq tramp-default-user "john"
           tramp-default-host "target")
</pre>
   <p>With both defaults set, `<samp><span class="samp">/ssh::</span></samp>' will connect
<span class="sc">tramp</span> to John's home directory on target.

   </p>
<p><strong>Note</strong> `<samp><span class="samp">/::</span></samp>' won't work, because `<samp><span class="samp">/:</span></samp>' is the prefix
for quoted file names.

   </p>
<p>Instead of a single default host, <code>tramp-default-host-alist</code>
allows multiple default host values based on access method or user
name combinations.  The alist can hold multiple values.  While
<code>tramp-default-host</code> is sufficient in most cases, some methods,
like <samp><span class="option">adb</span></samp>, require defaults overwritten.

</p>
<p class="noindent">See the documentation for the variable <code>tramp-default-host-alist</code>
for more details.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node">
<a name="Multi-hops"></a><a name="Multi_002dhops"></a>
</div>

<h3 class="section">4.9 Connecting to a remote host using multiple hops</h3>

<p><a name="index-multi_002dhop-119"></a><a name="index-proxy-hosts-120"></a>
Multi-hops are methods to reach hosts behind firewalls or to reach the
outside world from inside a bastion host.  With multi-hops,
<span class="sc">tramp</span> can negotiate these hops with the appropriate user/host
authentication at each hop.  All methods until now have been the single
hop kind, where the start and end points of the connection did not
have intermediate check points.

</p>
<div class="defun">
— User Option: <b>tramp-default-proxies-alist</b><var><a name="index-tramp_002ddefault_002dproxies_002dalist-121"></a></var><br>
<blockquote>
<p><a name="index-tramp_002ddefault_002dproxies_002dalist-122"></a><samp><span class="option">tramp-default-proxies-alist</span></samp> specifies proxy hosts to pass
through.  This variable is list of triples consisting of (<var>host</var>
<var>user</var> <var>proxy</var>).

        </p>
<p>The first match is the proxy host through which passes the file name
and the target host matching <var>user</var>@<var>host</var>.  <var>host</var> and
<var>user</var> are regular expressions or <code>nil</code>, interpreted as a
regular expression which always matches.

        </p>
<p><var>proxy</var> is a literal <span class="sc">tramp</span> file name whose local name part
is ignored, and the method and user name parts are optional.

        </p>
<p>The method must be an inline or gateway method (see <a href="#Inline-methods">Inline methods</a>, see <a href="#Gateway-methods">Gateway methods</a>). 
If <var>proxy</var> is <code>nil</code>, no additional hop is required reaching
<var>user</var>@<var>host</var>.

        </p>
<p>For example, to pass through the host `<samp><span class="samp">bastion.your.domain</span></samp>' as
user `<samp><span class="samp">bird</span></samp>' to reach remote hosts outside the local domain:

     </p>
<pre class="lisp">          (add-to-list 'tramp-default-proxies-alist
                       '("\\." nil "/ssh:bird@bastion.your.domain:"))
          (add-to-list 'tramp-default-proxies-alist
                       '("\\.your\\.domain\\'" nil nil))
     </pre>
        <p><strong>Note</strong>: <code>add-to-list</code> adds elements at the beginning of a
list.  Therefore, most relevant rules must come last in the list.

        </p>
<p>Proxy hosts can be cascaded in the alist.  If there is another host
called `<samp><span class="samp">jump.your.domain</span></samp>', which is the only host allowed to
connect to `<samp><span class="samp">bastion.your.domain</span></samp>', then:

     </p>
<pre class="lisp">          (add-to-list 'tramp-default-proxies-alist
                       '("\\`bastion\\.your\\.domain\\'"
                         "\\`bird\\'"
                         "/ssh:jump.your.domain:"))
     </pre>
        <p><var>proxy</var> can take patterns <code>%h</code> or <code>%u</code> for <var>host</var> or
<var>user</var> respectively.

        </p>
<p>To login as `<samp><span class="samp">root</span></samp>' on remote hosts in the domain
`<samp><span class="samp">your.domain</span></samp>', but login as `<samp><span class="samp">root</span></samp>' is disabled for non-local
access, then use this alist entry:

     </p>
<pre class="lisp">          (add-to-list 'tramp-default-proxies-alist
                       '("\\.your\\.domain\\'" "\\`root\\'" "/ssh:%h:"))
     </pre>
        <p>Opening <samp><span class="file">/sudo:randomhost.your.domain:</span></samp> first
connects to `<samp><span class="samp">randomhost.your.domain</span></samp>' via <code>ssh</code> under your
account name, and then perform <code>sudo -u root</code> on that host.

        </p>
<p>It is key for the sudo method in the above example to be applied on
the host after reaching it and not on the local host.

        </p>
<p><var>host</var>, <var>user</var> and <var>proxy</var> can also take Lisp forms.  These
forms when evaluated must return either a string or <code>nil</code>.

        </p>
<p>To generalize (from the previous example): For all hosts, except my
local one, first connect via <samp><span class="command">ssh</span></samp>, and then apply
<samp><span class="command">sudo -u root</span></samp>:

     </p>
<pre class="lisp">          (add-to-list 'tramp-default-proxies-alist
                       '(nil "\\`root\\'" "/ssh:%h:"))
          (add-to-list 'tramp-default-proxies-alist
                       '((regexp-quote (system-name)) nil nil))
     </pre>
        <p>The above configuration allows <span class="sc">tramp</span> connection as `<samp><span class="samp">root</span></samp>'
to remote Ubuntu hosts.

        </p>
<p><code>tramp-default-proxies-alist</code> is also used for passing through
firewalls or proxy servers.

        </p>
<p>For example, the local host `<samp><span class="samp">proxy.your.domain</span></samp>' on port 3128
serves as HTTP proxy to the outer world.  User has access rights to
another proxy server on `<samp><span class="samp">host.other.domain</span></samp>'.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>  Then the configuration is:

     </p>
<pre class="lisp">          (add-to-list 'tramp-default-proxies-alist
                       '("\\`host\\.other\\.domain\\'" nil
                       "/tunnel:proxy.your.domain#3128:"))
     </pre>
        <p>Gateway methods in a multiple hop chain can be declared only as the first hop. 
</p>
</blockquote>
</div>

   <p>Passing through hops involves dealing with restricted shells, such as
<samp><span class="command">rbash</span></samp>.  If <span class="sc">tramp</span> is made aware, then it would use
them for proxies only.

</p>
<div class="defun">
— User Option: <b>tramp-restricted-shell-hosts-alist</b><var><a name="index-tramp_002drestricted_002dshell_002dhosts_002dalist-123"></a></var><br>
<blockquote>
<p><a name="index-tramp_002drestricted_002dshell_002dhosts_002dalist-124"></a>An alist of regular expressions of hosts running restricted shells,
such as <samp><span class="command">rbash</span></samp>.  <span class="sc">tramp</span> will then use them only as
proxies.

        </p>
<p>To specify the bastion host from the example above as running a
restricted shell:

     </p>
<pre class="lisp">          (add-to-list 'tramp-restricted-shell-hosts-alist
                       "\\`bastion\\.your\\.domain\\'")
     </pre>
        </blockquote>
</div>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Customizing-Methods"></a></div>

<h3 class="section">4.10 Using Non-Standard Methods</h3>

<p><a name="index-customizing-methods-125"></a><a name="index-using-non_002dstandard-methods-126"></a><a name="index-create-your-own-methods-127"></a>
The <code>tramp-methods</code> variable currently has an exhaustive list of
predefined methods.  Any part of this list can be modified with more
suitable settings.  Refer to the Lisp documentation of that variable,
accessible with <kbd>C-h v tramp-methods &lt;RET&gt;</kbd>.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Customizing-Completion"></a></div>

<h3 class="section">4.11 Selecting config files for user/host name completion</h3>

<p><a name="index-customizing-completion-128"></a><a name="index-selecting-config-files-129"></a><a name="index-tramp_002dcompletion_002dfunction_002dalist-130"></a>
<code>tramp-completion-function-alist</code> uses predefined files for user
and host name completion (see <a href="#File-name-completion">File name completion</a>).  For each
method, it keeps a set of configuration files and a function that can
parse that file.  Each entry in <code>tramp-completion-function-alist</code>
is of the form (<var>method</var> <var>pair1</var> <var>pair2</var> <small class="dots">...</small>).

   </p>
<p>Each <var>pair</var> is composed of (<var>function</var> <var>file</var>). 
<var>function</var> is responsible for extracting user names and host names
from <var>file</var> for completion.  There are two functions which access
this variable:

</p>
<div class="defun">
— Function: <b>tramp-get-completion-function</b><var> method<a name="index-tramp_002dget_002dcompletion_002dfunction-131"></a></var><br>
<blockquote>
<p>This function returns the list of completion functions for <var>method</var>.

        </p>
<p>Example:
     </p>
<pre class="example">          (tramp-get-completion-function "rsh")
          
               =&gt; ((tramp-parse-rhosts "/etc/hosts.equiv")
                   (tramp-parse-rhosts "~/.rhosts"))
     </pre>
        </blockquote>
</div>

<div class="defun">
— Function: <b>tramp-set-completion-function</b><var> method function-list<a name="index-tramp_002dset_002dcompletion_002dfunction-132"></a></var><br>
<blockquote>
<p>This function sets <var>function-list</var> as list of completion functions
for <var>method</var>.

        </p>
<p>Example:
     </p>
<pre class="example">          (tramp-set-completion-function "ssh"
           '((tramp-parse-sconfig "/etc/ssh_config")
             (tramp-parse-sconfig "~/.ssh/config")))
          
               =&gt; ((tramp-parse-sconfig "/etc/ssh_config")
                   (tramp-parse-sconfig "~/.ssh/config"))
     </pre>
        </blockquote>
</div>

   <p>The following predefined functions parsing configuration files exist:

     </p>
<dl>
<dt><code>tramp-parse-rhosts</code></dt>
<dd>
<a name="index-tramp_002dparse_002drhosts-133"></a>
This function parses files which are syntactical equivalent to
<samp><span class="file">~/.rhosts</span></samp>.  It returns both host names and user names, if
specified.

     <br>
</dd>
<dt><code>tramp-parse-shosts</code></dt>
<dd>
<a name="index-tramp_002dparse_002dshosts-134"></a>
This function parses files which are syntactical equivalent to
<samp><span class="file">~/.ssh/known_hosts</span></samp>.  Since there are no user names specified
in such files, it can return host names only.

     <br>
</dd>
<dt><code>tramp-parse-sconfig</code></dt>
<dd>
<a name="index-tramp_002dparse_002dshosts-135"></a>
This function returns the host nicknames defined by <code>Host</code> entries
in <samp><span class="file">~/.ssh/config</span></samp> style files.

     <br>
</dd>
<dt><code>tramp-parse-shostkeys</code></dt>
<dd>
<a name="index-tramp_002dparse_002dshostkeys-136"></a>
SSH2 parsing of directories <samp><span class="file">/etc/ssh2/hostkeys/*</span></samp> and
<samp><span class="file">~/ssh2/hostkeys/*</span></samp>.  Hosts are coded in file names
<samp><span class="file">hostkey_</span><var>portnumber</var><span class="file">_</span><var>host-name</var><span class="file">.pub</span></samp>.  User names
are always <code>nil</code>.

     <br>
</dd>
<dt><code>tramp-parse-sknownhosts</code></dt>
<dd>
<a name="index-tramp_002dparse_002dshostkeys-137"></a>
Another SSH2 style parsing of directories like
<samp><span class="file">/etc/ssh2/knownhosts/*</span></samp> and <samp><span class="file">~/ssh2/knownhosts/*</span></samp>.  This
case, hosts names are coded in file names
<samp><var>host-name</var><span class="file">.</span><var>algorithm</var><span class="file">.pub</span></samp>.  User names are always <code>nil</code>.

     <br>
</dd>
<dt><code>tramp-parse-hosts</code></dt>
<dd>
<a name="index-tramp_002dparse_002dhosts-138"></a>
A function dedicated to <samp><span class="file">/etc/hosts</span></samp> for host names.

     <br>
</dd>
<dt><code>tramp-parse-passwd</code></dt>
<dd>
<a name="index-tramp_002dparse_002dpasswd-139"></a>
A function which parses <samp><span class="file">/etc/passwd</span></samp> files for user names.

     <br>
</dd>
<dt><code>tramp-parse-netrc</code></dt>
<dd>
<a name="index-tramp_002dparse_002dnetrc-140"></a>
A function which parses <samp><span class="file">~/.netrc</span></samp> and <samp><span class="file">~/.authinfo</span></samp>-style files.

   </dd>
</dl>

   <p>To keep a custom file with custom data in a custom structure, a custom
function has to be provided.  This function must meet the following
conventions:

</p>
<div class="defun">
— Function: <b>my-tramp-parse</b><var> file<a name="index-my_002dtramp_002dparse-141"></a></var><br>
<blockquote>
<p><var>file</var> must be either a file on the host, or <code>nil</code>.  The
function must return a list of (<var>user</var> <var>host</var>), which are
taken as candidates for completion for user and host names.

        </p>
<p>Example:
     </p>
<pre class="example">          (my-tramp-parse "~/.my-tramp-hosts")
          
               =&gt; ((nil "toto") ("daniel" "melancholia"))
     </pre>
        </blockquote>
</div>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Password-handling"></a></div>

<h3 class="section">4.12 Reusing passwords for several connections</h3>

<p><a name="index-passwords-142"></a>
To avoid repeated prompts for passwords, consider native caching
mechanisms, such as <samp><span class="command">ssh-agent</span></samp> for <samp><span class="option">ssh</span></samp>-like
methods, or <samp><span class="command">pageant</span></samp> for <samp><span class="option">plink</span></samp>-like methods.

   </p>
<p><span class="sc">tramp</span> offers alternatives when native solutions cannot meet
the need.

   </p>
<p><a name="Using-an-authentication-file"></a>

</p>
<h4 class="subsection">4.12.1 Using an authentication file</h4>

<p><a name="index-auth_002dsources-143"></a>
The package <samp><span class="file">auth-source.el</span></samp>, originally developed for No Gnus,
reads passwords from different sources, See <a href="auth.html#Help-for-users">auth-source</a>.  The default authentication file is
<samp><span class="file">~/.authinfo.gpg</span></samp>, but this can be changed via the variable
<code>auth-sources</code>.

</p>
<p class="noindent">A typical entry in the authentication file:

</p>
<pre class="example">     machine melancholia port scp login daniel password geheim
</pre>
   <p>The port can take any <span class="sc">tramp</span> method (see <a href="#Inline-methods">Inline methods</a>,
see <a href="#External-methods">External methods</a>).  Omitting port values matches all
<span class="sc">tramp</span> methods.

   </p>
<p>Setting <code>auth-source-debug</code> to <code>t</code> to debug messages.

   </p>
<p><a name="Caching-passwords"></a>

</p>
<h4 class="subsection">4.12.2 Caching passwords</h4>

<p><span class="sc">tramp</span> can cache passwords as entered and reuse when needed for
the same user or host name independent of the access method.

   </p>
<p><a name="index-password_002dcache_002dexpiry-144"></a>
<code>password-cache-expiry</code> sets the duration (in seconds) the
passwords are remembered.  Passwords are never saved permanently nor
can they extend beyond the lifetime of the current Emacs
session.  Set <code>password-cache-expiry</code> to <code>nil</code> to disable
expiration.

   </p>
<p><a name="index-password_002dcache-145"></a>
Set <code>password-cache</code> to <code>nil</code> to disable password caching.

   </p>
<p><strong>Implementation Note</strong>: password caching depends on
<samp><span class="file">password-cache.el</span></samp> package.  <span class="sc">tramp</span> activates password
caching only if <span class="sc">tramp</span> can discover, while Emacs is
loading, the package through <code>load-path</code>.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Connection-caching"></a></div>

<h3 class="section">4.13 Reusing connection related information</h3>

<p><a name="index-caching-146"></a><a name="index-tramp_002dpersistency_002dfile_002dname-147"></a>
For faster initial connection times, <span class="sc">tramp</span> stores previous
connection properties in a file specified by the variable
<code>tramp-persistency-file-name</code>.

   </p>
<p>The default file name for <code>tramp-persistency-file-name</code> is:
<samp><span class="file">~/.emacs.d/tramp</span></samp>.

   </p>
<p><span class="sc">tramp</span> reads this file during Emacs startup, and
writes to it when exiting Emacs.  Delete this file for
<span class="sc">tramp</span> to recreate a new one on next Emacs startup.

   </p>
<p>Set <code>tramp-persistency-file-name</code> to <code>nil</code> to disable
storing connections persistently.

   </p>
<p>To reuse connection information from the persistent list,
<span class="sc">tramp</span> needs to uniquely identify every host.  However in some
cases, two different connections may result in the same persistent
information.  For example, connecting to a host using <samp><span class="command">ssh</span></samp> and
connecting to the same host through <code>sshd</code> on port 3001.  Both
access methods result in nearly identical persistent specifications
<samp><span class="file">/ssh:localhost:</span></samp> and <samp><span class="file">/ssh:localhost#3001:</span></samp>.

   </p>
<p>Changing host names could avoid duplicates.  One way is to add a
<samp><span class="option">Host</span></samp> section in <samp><span class="file">~/.ssh/config</span></samp> (see <a href="#Frequently-Asked-Questions">Frequently Asked Questions</a>).  Another way is to apply multiple hops (see <a href="#Multi_002dhops">Multi-hops</a>).

   </p>
<p>When <span class="sc">tramp</span> detects a change in the operating system version in
a remote host (via the command <samp><span class="command">uname -sr</span></samp>), it flushes all
connection related information for that host and creates a new entry.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Predefined-connection-information"></a></div>

<h3 class="section">4.14 Setting own connection related information</h3>

<p><a name="index-tramp_002dconnection_002dproperties-148"></a>
For more precise customization, parameters specified by
<code>tramp-methods</code> can be overwritten manually.

   </p>
<p>Set <code>tramp-connection-properties</code> to manually override
<code>tramp-methods</code>.  Properties in this list are in the form
<code>(</code><var>regexp</var> <var>property</var> <var>value</var><code>)</code>.  <var>regexp</var> matches
remote file names.  Use <code>nil</code> to match all.  <var>property</var> is the
property's name, and <var>value</var> is the property's value.

   </p>
<p><var>property</var> is any method specific parameter contained in
<code>tramp-methods</code>.  The parameter key in <code>tramp-methods</code> is a
symbol name <code>tramp-&lt;foo&gt;</code>.  To overwrite that property, use the
string `<samp><span class="samp">&lt;foo&gt;</span></samp>' for <var>property</var>.  For example, this changes the
remote shell:

</p>
<pre class="lisp">     (add-to-list 'tramp-connection-properties
                  (list (regexp-quote "/ssh:user@randomhost.your.domain:")
                        "remote-shell" "/bin/ksh"))
     (add-to-list 'tramp-connection-properties
                  (list (regexp-quote "/ssh:user@randomhost.your.domain:")
                        "remote-shell-login" '("-")))
</pre>
   <p>The parameters <code>tramp-remote-shell</code> and
<code>tramp-remote-shell-login</code> in <code>tramp-methods</code> now have new
values for the remote host.

   </p>
<p><var>property</var> could also be any property found in
<code>tramp-persistency-file-name</code>.

   </p>
<p>To get around how restricted shells randomly drop connections, set the
special property `<samp><span class="samp">busybox</span></samp>'.  For example:

</p>
<pre class="lisp">     (add-to-list 'tramp-connection-properties
                  (list (regexp-quote "/ssh:user@randomhost.your.domain:")
                        "busybox" t))
</pre>
   <mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Remote-programs"></a></div>

<h3 class="section">4.15 How <span class="sc">tramp</span> finds and uses programs on the remote host</h3>

<p><span class="sc">tramp</span> requires access to and rights to several commands on
remote hosts: <samp><span class="command">ls</span></samp>, <samp><span class="command">test</span></samp>, <samp><span class="command">find</span></samp> and
<samp><span class="command">cat</span></samp>.

   </p>
<p>Besides there are other required programs for <a href="#Inline-methods">Inline methods</a> and
<a href="#External-methods">External methods</a> of connection.

   </p>
<p>To improve performance and accuracy of remote file access,
<span class="sc">tramp</span> uses <samp><span class="command">perl</span></samp> (or <samp><span class="command">perl5</span></samp>) and
<samp><span class="command">grep</span></samp> when available.

</p>
<div class="defun">
— User Option: <b>tramp-remote-path</b><var><a name="index-tramp_002dremote_002dpath-149"></a></var><br>
<blockquote>
<p><a name="index-tramp_002dremote_002dpath-150"></a><a name="index-tramp_002ddefault_002dremote_002dpath-151"></a><a name="index-tramp_002down_002dremote_002dpath-152"></a><samp><span class="option">tramp-remote-path</span></samp> specifies which remote directory paths
<span class="sc">tramp</span> can search for <a href="#Remote-programs">Remote programs</a>.

        </p>
<p><span class="sc">tramp</span> uses standard defaults, such as <samp><span class="file">/bin</span></samp> and
<samp><span class="file">/usr/bin</span></samp>, which are reasonable for most hosts.  To accommodate
differences in hosts and paths, for example, <samp><span class="file">/bin:/usr/bin</span></samp> on
Debian GNU/Linux or
<samp><span class="file">/usr/xpg4/bin:/usr/ccs/bin:/usr/bin:/opt/SUNWspro/bin</span></samp> on
Solaris, <span class="sc">tramp</span> queries the remote host with <samp><span class="command">getconf
PATH</span></samp> and updates the symbol <code>tramp-default-remote-path</code>.

        </p>
<p>For instances where hosts keep obscure locations for paths for
security reasons, manually add such paths to local <samp><span class="file">.emacs</span></samp> as
shown below for <span class="sc">tramp</span> to use when connecting.

     </p>
<pre class="lisp">          (add-to-list 'tramp-remote-path "/usr/local/perl/bin")
     </pre>
        <p>Another way to find the remote path is to use the path assigned to the
remote user by the remote host.  <span class="sc">tramp</span> does not normally retain
this remote path after logging.  However, <code>tramp-own-remote-path</code>
preserves the path value, which can be used to update
<code>tramp-remote-path</code>.

     </p>
<pre class="lisp">          (add-to-list 'tramp-remote-path 'tramp-own-remote-path)
     </pre>
        </blockquote>
</div>

   <p>When remote search paths are changed, local <span class="sc">tramp</span> caches must
be recomputed.  To force <span class="sc">tramp</span> to recompute afresh, exit
Emacs, remove the persistent file (see <a href="#Connection-caching">Connection caching</a>), and restart Emacs.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Remote-shell-setup"></a></div>

<h3 class="section">4.16 Remote shell setup hints</h3>

<p><a name="index-remote-shell-setup-153"></a><a name="index-g_t_0040file_007b_002eprofile_007d-file-154"></a><a name="index-g_t_0040file_007b_002elogin_007d-file-155"></a><a name="index-shell-init-files-156"></a>
<span class="sc">tramp</span> checks for the availability of standard programs in the
usual locations.  Common tactics include successively trying
<samp><span class="command">test -e</span></samp>, <samp><span class="command">/usr/bin/test -e</span></samp>, and <samp><span class="command">/bin/test
-e</span></samp>.  <samp><span class="command">ls -d</span></samp> is another approach.  But these approaches do not
help with these new login patterns.

   </p>
<p>When <span class="sc">tramp</span> encounters two-factor logins or additional challenge
questions, such as entering birth date or security code or passphrase,
<span class="sc">tramp</span> needs a few more configuration steps to accommodate
them.

   </p>
<p>The difference between a password prompt and a passphrase prompt is
that the password for completing the login while the passphrase is
for authorizing access to local authentication information, such as
the ssh key.

   </p>
<p>There is no one configuration to accommodate all the variations in
login security, especially not the exotic ones.  However, <span class="sc">tramp</span>
provides a few tweaks to address the most common ones.

     </p>
<dl>
<dt><var>tramp-shell-prompt-pattern</var></dt>
<dd>
<a name="index-tramp_002dshell_002dprompt_002dpattern-157"></a>
<code>tramp-shell-prompt-pattern</code> is for remote login shell prompt,
which may not be the same as the local login shell prompt,
<code>shell-prompt-pattern</code>.  Since most hosts use identical prompts,
<span class="sc">tramp</span> sets a similar default value for both prompts.

     <br>
</dd>
<dt>
<var>tramp-password-prompt-regexp</var><br><dt><var>tramp-wrong-passwd-regexp</var></dt>
</dt>
<dd>
<a name="index-tramp_002dpassword_002dprompt_002dregexp-158"></a><a name="index-tramp_002dwrong_002dpasswd_002dregexp-159"></a>
<span class="sc">tramp</span> uses <var>tramp-password-prompt-regexp</var> to distinguish
between prompts for passwords and prompts for passphrases.  By default,
<var>tramp-password-prompt-regexp</var> handles the detection in English
language environments.  See a localization example below:

     <pre class="lisp">          (setq
            tramp-password-prompt-regexp
              (concat
                "^.*"
                (regexp-opt
                  '("passphrase" "Passphrase"
                    ;; English
                    "password" "Password"
                    ;; Deutsch
                    "passwort" "Passwort"
                    ;; Français
                    "mot de passe" "Mot de passe") t)
                ".*:\0? *"))
     </pre>
     <p>Similar localization may be necessary for handling wrong password
prompts, for which <span class="sc">tramp</span> uses <var>tramp-wrong-passwd-regexp</var>.

     <br></p>
</dd>
<dt>
<samp><span class="command">tset</span></samp> and other questions</dt>
<dd>
<a name="index-Unix-command-tset-160"></a><a name="index-tset-Unix-command-161"></a><a name="index-tramp_002dterminal_002dtype-162"></a>
To suppress inappropriate prompts for terminal type, <span class="sc">tramp</span>
sets the <samp><span class="env">TERM</span></samp> to <code>dumb</code> before the remote login process
begins via the variable <code>tramp-terminal-type</code>.  This will silence
common <samp><span class="command">tset</span></samp> related prompts.

     <p><span class="sc">tramp</span>'s strategy for handling such prompts (commonly triggered
from login scripts on remote hosts) is to set the environment
variables so that no prompts interrupt the shell initialization
process.

     </p>
<p><a name="index-tramp_002dactions_002dbefore_002dshell-163"></a>
An alternative approach is to configure <span class="sc">tramp</span> with strings
that can identify such questions using
<code>tramp-actions-before-shell</code>.  Example:

     </p>
<pre class="lisp">          (defconst my-tramp-prompt-regexp
            (concat (regexp-opt '("Enter the birth date of your mother:") t)
                    "\\s-*")
            "Regular expression matching my login prompt question.")
          
          (defun my-tramp-action (proc vec)
            "Enter \"19000101\" in order to give a correct answer."
            (save-window-excursion
              (with-current-buffer (tramp-get-connection-buffer vec)
                (tramp-message vec 6 "\n%s" (buffer-string))
                (tramp-send-string vec "19000101"))))
          
          (add-to-list 'tramp-actions-before-shell
                       '(my-tramp-prompt-regexp my-tramp-action))
     </pre>
     <br>
</dd>
<dt>Conflicting names for users and variables in <samp><span class="file">.profile</span></samp>
</dt>
<dd>
When a user name is the same as a variable name in a local file, such
as <samp><span class="file">.profile</span></samp>, then <span class="sc">tramp</span> may send incorrect values for
environment variables.  To avoid incorrect values, change the local
variable name to something different from the user name.  For example,
if the user name is <samp><span class="env">FRUMPLE</span></samp>, then change the variable name to
<samp><span class="env">FRUMPLE_DIR</span></samp>.

     <br>
</dd>
<dt>Non-Bourne commands in <samp><span class="file">.profile</span></samp>
</dt>
<dd>
When the remote host's <samp><span class="file">.profile</span></samp> is also used for shells other
than Bourne shell, then some incompatible syntaxes for commands in
<samp><span class="file">.profile</span></samp> may trigger errors in Bourne shell on the host and may
not complete client's <span class="sc">tramp</span> connections.

     <p>One example of a Bourne shell incompatible syntax in <samp><span class="file">.profile</span></samp>:
using <samp><span class="command">export FOO=bar</span></samp> instead of <samp><span class="command">FOO=bar; export
FOO</span></samp>.  After remote login, <span class="sc">tramp</span> will trigger an error during
its execution of <samp><span class="command">/bin/sh</span></samp> on the remote host because Bourne
shell does not recognize the export command as entered in
<samp><span class="file">.profile</span></samp>.

     </p>
<p>Likewise, (<code>~</code>) character in paths will cause errors because
Bourne shell does not do (<code>~</code>) character expansions.

     </p>
<p>One approach to avoiding these incompatibilities is to make all
commands in <samp><span class="file">~/.shrc</span></samp> and <samp><span class="file">~/.profile</span></samp> Bourne shell
compatible so <span class="sc">tramp</span> can complete connections to that remote. 
To accommodate using non-Bourne shells on that remote, use other
shell-specific config files.  For example, bash can use
<samp><span class="file">~/.bash_profile</span></samp> and ignore <samp><span class="file">.profile</span></samp>.

     <br></p>
</dd>
<dt>Interactive shell prompt</dt>
<dd>
<span class="sc">tramp</span> redefines the remote shell prompt internally for robust
parsing.  This redefinition affects the looks of a prompt in an
interactive remote shell through commands, such as <kbd>M-x
shell</kbd>.  Such prompts, however, can be reset to something more readable
and recognizable using these <span class="sc">tramp</span> variables.

     <p><span class="sc">tramp</span> sets the <samp><span class="env">INSIDE_EMACS</span></samp> variable in the startup
script file <samp><span class="file">~/.emacs_SHELLNAME</span></samp>.

     </p>
<p><samp><span class="env">SHELLNAME</span></samp> is <code>bash</code> or equivalent shell names.  Change it by
setting the environment variable <samp><span class="env">ESHELL</span></samp> in the <samp><span class="file">.emacs</span></samp> as
follows:

     </p>
<pre class="lisp">          (setenv "ESHELL" "bash")
     </pre>
     <p>Then re-set the prompt string in <samp><span class="file">~/.emacs_SHELLNAME</span></samp> as follows:

     </p>
<pre class="example">          # Reset the prompt for remote Tramp shells.
          if [ "${INSIDE_EMACS/*tramp*/tramp}" == "tramp" ] ; then
             PS1="[\u@\h \w]$ "
          fi
     </pre>
     <br>
</dd>
<dt>
<samp><span class="command">busybox</span></samp> / <samp><span class="command">nc</span></samp>
</dt>
<dd>
<a name="index-Unix-command-nc-164"></a><a name="index-nc-Unix-command-165"></a>
<span class="sc">tramp</span>'s <samp><span class="option">nc</span></samp> method uses the <samp><span class="command">nc</span></samp> command to
install and execute a listener as follows (see <code>tramp-methods</code>):

     <pre class="example">          # nc -l -p 42
     </pre>
     <p>The above command-line syntax has changed with <samp><span class="command">busybox</span></samp>
versions.  If <samp><span class="command">nc</span></samp> refuses the <samp><span class="command">-p</span></samp> parameter, then
overwrite as follows:

     </p>
<pre class="lisp">          (add-to-list
           'tramp-connection-properties
           `(,(regexp-quote "192.168.0.1") "remote-copy-args" (("-l") ("%r"))))
     </pre>
     <p class="noindent">where `<samp><span class="samp">192.168.0.1</span></samp>' is the remote host IP address
(see <a href="#Predefined-connection-information">Predefined connection information</a>).

   </p>
</dd>
</dl>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Android-shell-setup"></a></div>

<h3 class="section">4.17 Android shell setup hints</h3>

<p><a name="index-android-shell-setup-166"></a>
<span class="sc">tramp</span> uses the <samp><span class="option">adb</span></samp> method to access Android
devices.  Android devices provide a restricted shell access through an
USB connection.  The local host must have the Android SDK installed.

   </p>
<p>Applications such as <code>SSHDroid</code> that run <samp><span class="command">sshd</span></samp> process
on the Android device can accept any <samp><span class="option">ssh</span></samp>-based methods
provided these settings are adjusted:

   </p>
<p><code>sh</code> must be specified for remote shell since Android devices do
not provide <code>/bin/sh</code>.  <code>sh</code> will then invoke whatever shell is
installed on the device with this setting:

</p>
<pre class="lisp">     (add-to-list 'tramp-connection-properties
     	     (list (regexp-quote "192.168.0.26") "remote-shell" "sh"))
</pre>
   <p class="noindent">where `<samp><span class="samp">192.168.0.26</span></samp>' is the Android device's IP address. 
(see <a href="#Predefined-connection-information">Predefined connection information</a>).

   </p>
<p><span class="sc">tramp</span> requires preserving <samp><span class="env">PATH</span></samp> environment variable from
user settings.  Android devices prefer <samp><span class="file">/system/xbin</span></samp> path over
<samp><span class="file">/system/bin</span></samp>.  Both of these are set as follows:

</p>
<pre class="lisp">     (add-to-list 'tramp-remote-path 'tramp-own-remote-path)
     (add-to-list 'tramp-remote-path "/system/xbin")
</pre>
   <p class="noindent">When the Android device is not `<samp><span class="samp">rooted</span></samp>', specify a writable
directory for temporary files:

</p>
<pre class="lisp">     (add-to-list 'tramp-remote-process-environment "TMPDIR=$HOME")
</pre>
   <p class="noindent">Open a remote connection with the command <kbd>C-x C-f
/ssh:192.168.0.26#2222:</kbd>, where <samp><span class="command">sshd</span></samp> is listening on port
`<samp><span class="samp">2222</span></samp>'.

   </p>
<p>To add a corresponding entry to the <samp><span class="file">~/.ssh/config</span></samp> file
(recommended), use this:

</p>
<pre class="example">     Host android
          HostName 192.168.0.26
          User root
          Port 2222
</pre>
   <p class="noindent">To use the host name `<samp><span class="samp">android</span></samp>' instead of the IP address shown in
the previous example, fix the connection properties as follows:

</p>
<pre class="lisp">     (add-to-list 'tramp-connection-properties
     	     (list (regexp-quote "android") "remote-shell" "sh"))
</pre>
   <p class="noindent">Open a remote connection with a more concise command <kbd>C-x C-f
/ssh:android:</kbd>.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node">
<a name="Auto-save-and-Backup"></a><a name="Auto_002dsave-and-Backup"></a>
</div>

<h3 class="section">4.18 Auto-save and Backup configuration</h3>

<p><a name="index-auto_002dsave-167"></a><a name="index-backup-168"></a><a name="index-backup_002ddirectory_002dalist-169"></a>
To avoid <span class="sc">tramp</span> from saving backup files owned by root to
locations accessible to others, default backup settings in
<code>backup-directory-alist</code>
have to be altered.

   </p>
<p>Here's a scenario where files could be inadvertently
exposed.  Emacs by default writes backup files to the same
directory as the original files unless changed to another location,
such as <samp><span class="file">~/.emacs.d/backups/</span></samp>.  Such a directory will also be used
by default by <span class="sc">tramp</span> when using, say, a restricted file
<samp><span class="file">/su:root@localhost:/etc/secretfile</span></samp>.  The backup file
of the secretfile is now owned by the user logged in from tramp and
not root.

   </p>
<p>When
<code>backup-directory-alist</code>
is <code>nil</code> (the default), such problems do not occur.

   </p>
<p>To “turn off” the backup feature for <span class="sc">tramp</span> files and stop
<span class="sc">tramp</span> from saving to the backup directory, use this:

</p>
<pre class="lisp">     (add-to-list 'backup-directory-alist
                  (cons tramp-file-name-regexp nil))
</pre>
   <p class="noindent">Disabling backups can be targeted to just the <samp><span class="option">su</span></samp> and
<samp><span class="option">sudo</span></samp> methods:

</p>
<pre class="lisp">     (setq backup-enable-predicate
           (lambda (name)
             (and (normal-backup-enable-predicate name)
                  (not
                   (let ((method (file-remote-p name 'method)))
                     (when (stringp method)
                       (member method '("su" "sudo"))))))))
</pre>
   <p>Another option is to create better backup file naming with user and
host names prefixed to the file name.  For example, transforming
<samp><span class="file">/etc/secretfile</span></samp> to
<samp><span class="file">~/.emacs.d/backups/!su:root@localhost:!etc!secretfile</span></samp>, set the
<span class="sc">tramp</span> variable
<code>tramp-backup-directory-alist</code>
from the existing variable
<code>backup-directory-alist</code>.

   </p>
<p>Then <span class="sc">tramp</span> backs up to a file name that is transformed with a
prefix consisting of the DIRECTORY name.  This file name prefixing
happens only when the DIRECTORY is an absolute local file name.

</p>
<p class="noindent">Example:

</p>
<pre class="lisp">     (add-to-list 'backup-directory-alist
                  (cons "." "~/.emacs.d/backups/"))
     (setq tramp-backup-directory-alist backup-directory-alist)
</pre>
   <p class="noindent">The backup file name of
<samp><span class="file">/su:root@localhost:/etc/secretfile</span></samp> would be
<samp><span class="file">/su:root@localhost:~/.emacs.d/backups/!su:root@localhost:!etc!secretfile~</span></samp>

   </p>
<p>Just as for backup files, similar issues of file naming affect
auto-saving <span class="sc">tramp</span> files. 
Auto-saved files are saved in the directory specified by the variable
<code>auto-save-file-name-transforms</code>.  By default this is set to the
local temporary directory.  But in some versions of Debian GNU/Linux,
this points to the source directory where the Emacs was
compiled.   Reset such values to a valid directory.

   </p>
<p>Set <code>auto-save-file-name-transforms</code> to <code>nil</code> to save
auto-saved files to the same directory as the original file.

   </p>
<p>Alternatively, set the variable <code>tramp-auto-save-directory</code> to
direct all auto saves to that location.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Windows-setup-hints"></a></div>

<h3 class="section">4.19 Issues with Cygwin ssh</h3>

<p><a name="index-Cygwin_002c-issues-170"></a>
This section is incomplete.  Please share your solutions.

   </p>
<p><a name="index-method-sshx-with-Cygwin-171"></a><a name="index-sshx-method-with-Cygwin-172"></a>
Cygwin's <samp><span class="command">ssh</span></samp> works only with a Cygwin version of
Emacs.  To check for compatibility: type <kbd>M-x eshell</kbd>, and
start <kbd>ssh test.host</kbd>.  Incompatibilities trigger this message:

</p>
<pre class="example">     Pseudo-terminal will not be allocated because stdin is not a terminal.
</pre>
   <p>Some older versions of Cygwin's <samp><span class="command">ssh</span></samp> work with the
<samp><span class="option">sshx</span></samp> access method.  Consult Cygwin's FAQ at
<a href="http://cygwin.com/faq/">http://cygwin.com/faq/</a> for details.

   </p>
<p><a name="index-method-scpx-with-Cygwin-173"></a><a name="index-scpx-method-with-Cygwin-174"></a>
When using the <samp><span class="option">scpx</span></samp> access method, Emacs may call
<samp><span class="command">scp</span></samp> with Windows file naming, such as <code>c:/foo</code>.  But
the version of <samp><span class="command">scp</span></samp> that is installed with Cygwin does not
know about Windows file naming, which causes it to incorrectly look
for a host named <code>c</code>.

   </p>
<p>A workaround: write a wrapper script for <samp><span class="option">scp</span></samp> to convert
Windows file names to Cygwin file names.

   </p>
<p><a name="index-Cygwin-and-ssh_002dagent-175"></a><a name="index-SSH_005fAUTH_005fSOCK-and-_0040value_007bemacsname_007d-on-Windows-176"></a>
When using the <samp><span class="command">ssh-agent</span></samp> on Windows for password-less
interaction, <samp><span class="option">ssh</span></samp> methods depend on the environment variable
<samp><span class="env">SSH_AUTH_SOCK</span></samp>.  But this variable is not set when
Emacs is started from a Desktop shortcut and
authentication fails.

   </p>
<p>One workaround is to use a Windows based SSH Agent, such as
Pageant.  It is part of the Putty Suite of tools.

   </p>
<p>The fallback is to start Emacs from a shell.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Usage"></a></div>

<h2 class="chapter">5 Using <span class="sc">tramp</span>
</h2>

<p><a name="index-using-_0040value_007btramp_007d-177"></a>
<span class="sc">tramp</span> operates transparently, accessing remote files as if
they are local.  However, <span class="sc">tramp</span> employs a formalized remote
file naming syntax to perform its functions transparently.  This
syntax consists of many parts specifying access methods,
authentication, host names, and file names. 
Ange-FTP uses a similar syntax.

   </p>
<p><a name="index-type_002dahead-178"></a>
Unlike opening local files in Emacs, which are
instantaneous, opening remote files in <span class="sc">tramp</span> is slower at
first.  Sometimes there is a noticeable delay before the prompts for
passwords or authentication appear in the minibuffer.  Hitting
<kbd>&lt;RET&gt;</kbd> or other keys during this gap will be processed by
Emacs.  This type-ahead facility is a feature of
Emacs that may cause missed prompts when using
<span class="sc">tramp</span>.

</p>
<ul class="menu">
<li>
<a accesskey="1" href="#File-name-Syntax">File name Syntax</a>:             <span class="sc">tramp</span> file name conventions. 
</li>
<li>
<a accesskey="2" href="#File-name-completion">File name completion</a>:         File name completion. 
</li>
<li>
<a accesskey="3" href="#Ad_002dhoc-multi_002dhops">Ad-hoc multi-hops</a>:            Declaring multiple hops in the file name. 
</li>
<li>
<a accesskey="4" href="#Remote-processes">Remote processes</a>:             Integration with other Emacs packages. 
</li>
<li>
<a accesskey="5" href="#Cleanup-remote-connections">Cleanup remote connections</a>:   Cleanup remote connections. 
</li>
</ul>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="File-name-Syntax"></a></div>

<h3 class="section">5.1 <span class="sc">tramp</span> file name conventions</h3>

<p><a name="index-file-name-syntax-179"></a><a name="index-file-name-examples-180"></a>
<samp><span class="file">/host:localfilename</span></samp>
opens file <var>localfilename</var> on the remote host <var>host</var>, using
the default method.  See <a href="#Default-Method">Default Method</a>.

     </p>
<dl>
<dt><samp><span class="file">/melancholia:.emacs</span></samp></dt>
<dd>For the file <samp><span class="file">.emacs</span></samp> located in the home directory, on the host
<code>melancholia</code>.

     <br>
</dd>
<dt><samp><span class="file">/melancholia.danann.net:.emacs</span></samp></dt>
<dd>For the file <samp><span class="file">.emacs</span></samp> specified using the fully qualified domain name of
the host.

     <br>
</dd>
<dt><samp><span class="file">/melancholia:~/.emacs</span></samp></dt>
<dd>For the file <samp><span class="file">.emacs</span></samp> specified using the <samp><span class="file">~</span></samp>, which is expanded.

     <br>
</dd>
<dt><samp><span class="file">/melancholia:~daniel/.emacs</span></samp></dt>
<dd>For the file <samp><span class="file">.emacs</span></samp> located in <code>daniel</code>'s home directory
on the host, <code>melancholia</code>.  The <samp><span class="file">~&lt;user&gt;</span></samp> construct is
expanded to the home directory of that user on the remote host.

     <br>
</dd>
<dt><samp><span class="file">/melancholia:/etc/squid.conf</span></samp></dt>
<dd>For the file <samp><span class="file">/etc/squid.conf</span></samp> on the host <code>melancholia</code>.

   </dd>
</dl>

   <p><var>host</var> can take IPv4 or IPv6 address, as in
<samp><span class="file">/127.0.0.1:.emacs</span></samp> or
<samp><span class="file">/[::1]:.emacs</span></samp>. 
For syntactical reasons, IPv6 addresses must be embedded in square
brackets <samp><span class="file">[</span></samp> and <samp><span class="file">]</span></samp>.

   </p>
<p>By default, <span class="sc">tramp</span> will use the current local user name as the
remote user name for log in to the remote host.  Specifying a different
name using the proper syntax will override this default behavior:

</p>
<pre class="example">     /user@host:path/to.file
</pre>
   <p><samp><span class="file">/daniel@melancholia:.emacs</span></samp> is for file
<samp><span class="file">.emacs</span></samp> in <code>daniel</code>'s home directory on the host,
<code>melancholia</code>.

   </p>
<p>Specify other file access methods (see <a href="#Inline-methods">Inline methods</a>,
see <a href="#External-methods">External methods</a>) as part of the file name.

   </p>
<p>Method name comes before user name, as in
<samp><span class="file">/</span><var>method</var><span class="file">:</span></samp> (Note the trailing
colon). 
The syntax specifications for user, host, and file do not change.

   </p>
<p>To connect to the host <code>melancholia</code> as <code>daniel</code>, using
<samp><span class="option">ssh</span></samp> method for <samp><span class="file">.emacs</span></samp> in <code>daniel</code>'s home
directory, the full specification is:
<samp><span class="file">/ssh:daniel@melancholia:.emacs</span></samp>.

   </p>
<p>A remote file name containing a host name, which is the same string as
a method name, is not allowed.

   </p>
<p>For specifying port numbers, affix <samp><span class="file">#&lt;port&gt;</span></samp> to the host
name.  For example: <samp><span class="file">/ssh:daniel@melancholia#42:.emacs</span></samp>.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="File-name-completion"></a></div>

<h3 class="section">5.2 File name completion</h3>

<p><a name="index-file-name-completion-181"></a>
<span class="sc">tramp</span> can complete the following <span class="sc">tramp</span> file name
components: method names, user names, host names, and file names
located on remote hosts. 
Enable this by activating partial completion in <samp><span class="file">.emacs</span></samp>.

   </p>
<p>For example, type <kbd>C-x C-f /t &lt;TAB&gt;</kbd>,
<span class="sc">tramp</span> completion choices show up as

</p>
<pre class="example">     <!-- @multitable {@trampfn{telnet,melancholia.danann.net,}} {@trampfn{telnet,192.168.0.1,}} -->
     <p></p></pre>
<table summary="">
<tr align="left">
<td valign="top" width="50%">telnet: </td>
<td valign="top" width="50%">tmp/
     <br>
</td>
</tr>
<tr align="left">
<td valign="top" width="50%">toto: </td>
<td valign="top" width="50%">
     <br>
</td>
</tr>
</table>

   <p>`<samp><span class="samp">telnet:</span></samp>'
is a possible completion for the respective method,
`<samp><span class="samp">tmp/</span></samp>' stands for the directory <samp><span class="file">/tmp</span></samp> on your local host,
and `<samp><span class="samp">toto:</span></samp>'
might be a host <span class="sc">tramp</span> has detected in your <samp><span class="file">~/.ssh/known_hosts</span></samp>
file (when using <samp><span class="option">ssh</span></samp> as default method).

   </p>
<p>Type <kbd>e &lt;TAB&gt;</kbd> for the minibuffer completion to
`<samp><span class="samp">/telnet:</span></samp>'.  Typing <kbd>&lt;TAB&gt;</kbd>
shows host names <span class="sc">tramp</span> from <samp><span class="file">/etc/hosts</span></samp> file, for example.

</p>
<pre class="example">
     <p></p></pre>
<table summary="">
<!-- @multitable {@trampfn{telnet,melancholia.danann.net,}} {@trampfn{telnet,192.168.0.1,}} -->
     <tr align="left">
<td valign="top" width="50%">/telnet:127.0.0.1: </td>
<td valign="top" width="50%">/telnet:192.168.0.1:
     <!-- @item @trampfn{telnet,@value{ipv6prefix}::1@value{ipv6postfix},} @tab @trampfn{telnet,localhost,} -->
     <br>
</td>
</tr>
<tr align="left">
<td valign="top" width="50%">/telnet:[::1]: </td>
<td valign="top" width="50%">/telnet:localhost:
     <br>
</td>
</tr>
<tr align="left">
<td valign="top" width="50%">/telnet:melancholia.danann.net: </td>
<td valign="top" width="50%">/telnet:melancholia:
     <br>
</td>
</tr>
</table>

   <p>Choose a host from the above list and then continue to complete file
names on that host.

   </p>
<p>When the configuration (see <a href="#Customizing-Completion">Customizing Completion</a>) includes user
names, then the completion lists will account for the user names as well.

   </p>
<p>Remote hosts previously visited or hosts whose connections are kept
persistently (see <a href="#Connection-caching">Connection caching</a>) will be included in the
completion lists.

   </p>
<p>After remote host name completion comes completion of file names on
the remote host.  It works the same as with local host file completion,
except that killing with double-slash <samp><span class="file">//</span></samp> kills only the file
name part of the <span class="sc">tramp</span> file name syntax. 
A triple-slash stands for the default behavior.

</p>
<p class="noindent">Example:

</p>
<pre class="example">     <kbd>C-x C-f /telnet:melancholia:/usr/local/bin//etc &lt;TAB&gt;</kbd>
          -| /telnet:melancholia:/etc
     
     <kbd>C-x C-f /telnet:melancholia://etc &lt;TAB&gt;</kbd>
          -| /etc
     
     <kbd>C-x C-f /telnet:melancholia:/usr/local/bin///etc &lt;TAB&gt;</kbd>
          -| /etc
     
</pre>
   <p>During file name completion, remote directory contents are re-read
regularly to account for any changes in the filesystem that may affect
the completion candidates.  Such re-reads can account for changes to
the file system by applications outside Emacs
(see <a href="#Connection-caching">Connection caching</a>).

</p>
<div class="defun">
— User Option: <b>tramp-completion-reread-directory-timeout</b><var><a name="index-tramp_002dcompletion_002dreread_002ddirectory_002dtimeout-182"></a></var><br>
<blockquote><p><a name="index-tramp_002dcompletion_002dreread_002ddirectory_002dtimeout-183"></a>The timeout is number of seconds since last remote command for
rereading remote directory contents.  0 re-reads immediately during
file name completion, <code>nil</code> uses cached directory contents. 
</p></blockquote>
</div>

<mbp:pagebreak></mbp:pagebreak><div class="node">
<a name="Ad-hoc-multi-hops"></a><a name="Ad_002dhoc-multi_002dhops"></a>
</div>

<h3 class="section">5.3 Declaring multiple hops in the file name</h3>

<p><a name="index-multi_002dhop_002c-ad_002dhoc-184"></a><a name="index-proxy-hosts_002c-ad_002dhoc-185"></a>
<span class="sc">tramp</span> file name syntax can accommodate ad hoc specification of
multiple proxies without using <code>tramp-default-proxies-alist</code>
configuration setup(see <a href="#Multi_002dhops">Multi-hops</a>).

   </p>
<p>Each proxy is specified using the same syntax as the remote host
specification minus the file name part.  Each hop is separated by a
`<samp><span class="samp">|</span></samp>'.  Chain the proxies from the starting host to the destination
remote host name and file name.  For example, hopping over a single
proxy `<samp><span class="samp">bird@bastion</span></samp>' to a remote file on `<samp><span class="samp">you@remotehost</span></samp>':

</p>
<pre class="example">     <!-- @kbd{C-x C-f @trampfn{ssh@value{postfixhop}bird@@bastion|ssh,you,remotehost,/path}} -->
     <kbd>C-x C-f /ssh:bird@bastion|ssh:you@remotehost:/path</kbd>
</pre>
   <p>Proxies can take patterns <code>%h</code> or <code>%u</code>.

   </p>
<p><span class="sc">tramp</span> adds the ad-hoc definitions on the fly to
<code>tramp-default-proxies-alist</code> and is available for re-use during
that Emacs session.  Subsequent <span class="sc">tramp</span> connections
to the same remote host can then use the shortcut form:
`<samp><span class="samp">/ssh:you@remotehost:/path</span></samp>'.

</p>
<div class="defun">
— User Option: <b>tramp-save-ad-hoc-proxies</b><var><a name="index-tramp_002dsave_002dad_002dhoc_002dproxies-186"></a></var><br>
<blockquote>
<p><a name="index-tramp_002dsave_002dad_002dhoc_002dproxies-187"></a>For ad-hoc definitions to be saved automatically in
<samp><span class="option">tramp-default-proxies-alist</span></samp> for future Emacs
sessions, set <samp><span class="option">tramp-save-ad-hoc-proxies</span></samp>.

     </p>
<pre class="lisp">          (setq tramp-save-ad-hoc-proxies t)
     </pre>
        </blockquote>
</div>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Remote-processes"></a></div>

<h3 class="section">5.4 Integration with other Emacs packages</h3>

<p><a name="index-compile-188"></a><a name="index-recompile-189"></a>
<span class="sc">tramp</span> supports starting new running processes on the remote
host for discovering remote file names.  Emacs packages on
the remote host need no specific modifications for <span class="sc">tramp</span>'s
use.

   </p>
<p>This type of integration does not work with the <samp><span class="option">ftp</span></samp> method,
and does not support the pty association as specified in
<code>start-file-process</code>.

   </p>
<p><code>process-file</code> and <code>start-file-process</code> work on the remote
host when the variable <code>default-directory</code> is remote:

</p>
<pre class="lisp">     (let ((default-directory "/ssh:remote.host:"))
       (start-file-process "grep" (get-buffer-create "*grep*")
                           "/bin/sh" "-c" "grep -e tramp *"))
</pre>
   <p>Remote processes do not apply to GVFS (see <a href="#GVFS-based-methods">GVFS based methods</a>)
because the remote file system is mounted on the local host and
<span class="sc">tramp</span> just accesses by changing the <code>default-directory</code>.

   </p>
<p><span class="sc">tramp</span> starts a remote process when a command is executed in a
remote file or directory buffer.  As of now, these packages have been
integrated to work with <span class="sc">tramp</span>: <samp><span class="file">compile.el</span></samp> (commands
like <code>compile</code> and <code>grep</code>) and <samp><span class="file">gud.el</span></samp> (<code>gdb</code> or
<code>perldb</code>).

   </p>
<p>For <span class="sc">tramp</span> to find the command on the remote, it must be
accessible through the default search path as setup by <span class="sc">tramp</span>
upon first connection.  Alternatively, use an absolute path or extend
<code>tramp-remote-path</code> (see <a href="#Remote-programs">Remote programs</a>):

</p>
<pre class="lisp">     (add-to-list 'tramp-remote-path "~/bin")
     (add-to-list 'tramp-remote-path "/appli/pub/bin")
</pre>
   <p>Customize <code>tramp-remote-process-environment</code> to suit the remote
program's environment for the remote host. 
<code>tramp-remote-process-environment</code> is a list of strings
structured similar to <code>process-environment</code>, where each element
is a string of the form `<samp><span class="samp">ENVVARNAME=VALUE</span></samp>'.

   </p>
<p>To avoid any conflicts with local host variables set through local
configuration files, such as <samp><span class="file">~/.profile</span></samp>, use `<samp><span class="samp">ENVVARNAME=</span></samp>'
to unset them for the remote environment.

</p>
<p class="noindent">Use <code>add-to-list</code> to add entries:

</p>
<pre class="lisp">     (add-to-list 'tramp-remote-process-environment "JAVA_HOME=/opt/java")
</pre>
   <p>Modifying or deleting already existing values in the
<code>tramp-remote-process-environment</code> list may not be feasible on
restricted remote hosts.  For example, some system administrators
disallow changing <samp><span class="env">HISTORY</span></samp> variable.  To accommodate such
restrictions when using <span class="sc">tramp</span>, fix the
<code>tramp-remote-process-environment</code> by the following code in the
local <samp><span class="file">.emacs</span></samp> file:

</p>
<pre class="lisp">     (let ((process-environment tramp-remote-process-environment))
       (setenv "HISTORY" nil)
       (setq tramp-remote-process-environment process-environment))
</pre>
   <p><span class="sc">tramp</span> does not use the defaults specified in
<code>process-environment</code> for running <code>process-file</code> or
<code>start-file-process</code> on remote hosts.  When values from
<code>process-environment</code> are needed for remote processes, then set
them as follows:

</p>
<pre class="lisp">     (let ((process-environment (cons "HGPLAIN=1" process-environment)))
       (process-file ...))
</pre>
   <p>This works only for environment variables not already set in the
<code>process-environment</code>.

   </p>
<p>For integrating other Emacs packages so <span class="sc">tramp</span> can
execute remotely, please file a bug report.  See <a href="#Bug-Reports">Bug Reports</a>.

</p>
<h4 class="subsection">5.4.1 Running remote programs that create local X11 windows</h4>

<p>To allow a remote program to create an X11 window on the local host,
set the <samp><span class="env">DISPLAY</span></samp> environment variable for the remote host as
follows in the local <samp><span class="file">.emacs</span></samp> file:

</p>
<pre class="lisp">     (add-to-list 'tramp-remote-process-environment
                  (format "DISPLAY=%s" (getenv "DISPLAY")))
</pre>
   <p class="noindent"><code>(getenv "DISPLAY")</code> should return a recognizable name for the
local host that the remote host can redirect X11 window
interactions.  If querying for a recognizable name is not possible for
whatever reason, then replace <code>(getenv "DISPLAY")</code> with a
hard-coded, fixed name.  Note that using <code>:0</code> for X11 display name
here will not work as expected.

   </p>
<p>An alternate approach is specify <code>ForwardX11 yes</code> or
<code>ForwardX11Trusted yes</code> in the file <samp><span class="file">~/.ssh/config</span></samp> on the
local host.

</p>
<h4 class="subsection">5.4.2 Running <code>shell</code> on a remote host</h4>

<p><a name="index-shell-190"></a>
Set <samp><span class="option">explicit-shell-file-name</span></samp> to the appropriate shell name
when using <span class="sc">tramp</span> between two hosts with different operating
systems, such as `<samp><span class="samp">windows-nt</span></samp>' and `<samp><span class="samp">gnu/linux</span></samp>'.  This option
ensures the correct name of the remote shell program.

   </p>
<p>Starting with Emacs 24, when <samp><span class="option">explicit-shell-file-name</span></samp> is
equal to <code>nil</code>, calling <code>shell</code> interactively will prompt
for a shell name.

</p>
<h4 class="subsection">5.4.3 Running <code>shell-command</code> on a remote host</h4>

<p><a name="index-shell_002dcommand-191"></a>
<code>shell-command</code> executes commands synchronously or asynchronously
on remote hosts and displays output in buffers on the local
host.  Example:

</p>
<pre class="example">     <kbd>C-x C-f /sudo:: &lt;RET&gt;</kbd>
     <kbd>M-! tail -f /var/log/syslog.log &amp; &lt;RET&gt;</kbd>
</pre>
   <p><samp><span class="command">tail</span></samp> command outputs continuously to the local buffer,
<samp><span class="file">*Async Shell Command*</span></samp>

   </p>
<p><kbd>M-x auto-revert-tail-mode</kbd> runs similarly showing continuous output.

</p>
<h4 class="subsection">5.4.4 Running <code>eshell</code> on a remote host</h4>

<p><a name="index-eshell-192"></a>
<span class="sc">tramp</span> is integrated into <samp><span class="file">eshell.el</span></samp>, which enables
interactive eshell sessions on remote hosts at the command prompt. 
You must add the module <code>eshell-tramp</code> to
<code>eshell-modules-list</code>.  Here's a sample interaction after opening
<kbd>M-x eshell</kbd> on a remote host:

</p>
<pre class="example">     <b>~ $</b> cd /sudo::/etc &lt;RET&gt;
     <b>/sudo:root@host:/etc $</b> hostname &lt;RET&gt;
     host
     <b>/sudo:root@host:/etc $</b> id &lt;RET&gt;
     uid=0(root) gid=0(root) groups=0(root)
     <b>/sudo:root@host:/etc $</b> find-file shadow &lt;RET&gt;
     #&lt;buffer shadow&gt;
     <b>/sudo:root@host:/etc $</b>
</pre>
   <p><code>eshell</code> in Emacs 23.2 added custom <code>su</code> and
<code>sudo</code> commands that set the default directory correctly for the
<samp><span class="file">*eshell*</span></samp> buffer.  <span class="sc">tramp</span> silently updates
<code>tramp-default-proxies-alist</code> with an entry for this directory
(see <a href="#Multi_002dhops">Multi-hops</a>):

</p>
<pre class="example">     <b>~ $</b> cd /ssh:user@remotehost:/etc &lt;RET&gt;
     <b>/ssh:user@remotehost:/etc $</b> find-file shadow &lt;RET&gt;
     File is not readable: /ssh:user@remotehost:/etc/shadow
     <b>/ssh:user@remotehost:/etc $</b> sudo find-file shadow &lt;RET&gt;
     #&lt;buffer shadow&gt;
     
     <b>/ssh:user@remotehost:/etc $</b> su - &lt;RET&gt;
     <b>/su:root@remotehost:/root $</b> id &lt;RET&gt;
     uid=0(root) gid=0(root) groups=0(root)
     <b>/su:root@remotehost:/root $</b>
</pre>
   <p><a name="Running-a-debugger-on-a-remote-host"></a>

</p>
<h4 class="subsection">5.4.5 Running a debugger on a remote host</h4>

<p><a name="index-gud-193"></a><a name="index-gdb-194"></a><a name="index-perldb-195"></a>
<samp><span class="file">gud.el</span></samp> provides a unified interface to symbolic debuggers
<span class="sc">tramp</span> can run debug on remote hosts by calling <code>gdb</code>
with a remote file name:

</p>
<pre class="example">     <kbd>M-x gdb &lt;RET&gt;</kbd>
     <b>Run gdb (like this):</b> gdb --annotate=3 /ssh:host:~/myprog &lt;RET&gt;
</pre>
   <p>Relative file names are based on the remote default directory.  When
<samp><span class="file">myprog.pl</span></samp> exists in <samp><span class="file">/ssh:host:/home/user</span></samp>,
valid calls include:

</p>
<pre class="example">     <kbd>M-x perldb &lt;RET&gt;</kbd>
     <b>Run perldb (like this):</b> perl -d myprog.pl &lt;RET&gt;
</pre>
   <p>Just the local part of a remote file name, such as <kbd>perl -d
/home/user/myprog.pl</kbd>, is not possible.

   </p>
<p>Arguments of the program to be debugged must be literal, can take
relative or absolute paths, but not remote paths.

</p>
<h4 class="subsection">5.4.6 Running remote processes on Windows hosts</h4>

<p><a name="index-winexe-196"></a><a name="index-powershell-197"></a>
<samp><span class="command">winexe</span></samp> runs processes on a remote Windows host, and
<span class="sc">tramp</span> can use it for <code>process-file</code> and
<code>start-file-process</code>.

   </p>
<p><code>tramp-smb-winexe-program</code> specifies the local <samp><span class="command">winexe</span></samp>
command.  Powershell V2.0 on the remote host is required to run
processes triggered from <span class="sc">tramp</span>.

   </p>
<p><samp><span class="option">explicit-shell-file-name</span></samp> and <samp><span class="option">explicit-*-args</span></samp> have to
be set properly so <kbd>M-x shell</kbd> can open a proper remote shell on a
Windows host.  To open <samp><span class="command">cmd</span></samp>, set it as follows:

</p>
<pre class="lisp">     (setq explicit-shell-file-name "cmd"
           explicit-cmd-args '("/q"))
</pre>
   <p class="noindent">To open <samp><span class="command">powershell</span></samp> as a remote shell, use this:

</p>
<pre class="lisp">     (setq explicit-shell-file-name "powershell"
           explicit-powershell-args '("-file" "-"))
</pre>
   <mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Cleanup-remote-connections"></a></div>

<h3 class="section">5.5 Cleanup remote connections</h3>

<p><a name="index-cleanup-198"></a>
<span class="sc">tramp</span> provides several ways to flush remote connections.

</p>
<div class="defun">
— Command: <b>tramp-cleanup-connection</b><var> vec<a name="index-tramp_002dcleanup_002dconnection-199"></a></var><br>
<blockquote><p>This command flushes all connection related objects.  <samp><span class="option">vec</span></samp> is
the internal representation of a remote connection.  When called
interactively, this command lists active remote connections in the
minibuffer.  Each connection is of the format
<samp><span class="file">/method:user@host:</span></samp>.  Flushing remote connections also
cleans the password
cache (see <a href="#Password-handling">Password handling</a>), file cache, connection cache
(see <a href="#Connection-caching">Connection caching</a>), and connection buffers. 
</p></blockquote>
</div>

<div class="defun">
— Command: <b>tramp-cleanup-this-connection</b><var><a name="index-tramp_002dcleanup_002dthis_002dconnection-200"></a></var><br>
<blockquote><p>Flushes only the current buffer's remote connection objects, the same
as in <code>tramp-cleanup-connection</code>. 
</p></blockquote>
</div>

<div class="defun">
— Command: <b>tramp-cleanup-all-connections</b><var><a name="index-tramp_002dcleanup_002dall_002dconnections-201"></a></var><br>
<blockquote><p>Flushes all active remote connection objects, the same as in
<code>tramp-cleanup-connection</code>. 
</p></blockquote>
</div>

<div class="defun">
— Command: <b>tramp-cleanup-all-buffers</b><var><a name="index-tramp_002dcleanup_002dall_002dbuffers-202"></a></var><br>
<blockquote><p>Just as for <code>tramp-cleanup-all-connections</code>, all remote
connections are cleaned up in addition to killing buffers related to
that remote connection. 
</p></blockquote>
</div>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Bug-Reports"></a></div>

<h2 class="chapter">6 Reporting Bugs and Problems</h2>

<p><a name="index-bug-reports-203"></a>
<span class="sc">tramp</span>'s development team is actively engaged in solving bugs
and problems and looks to feature requests and suggestions.

   </p>
<p><span class="sc">tramp</span>'s mailing list is the place for more advice and
information on working with <span class="sc">tramp</span>, solving problems,
discussing, and general discussions about <span class="sc">tramp</span>.

   </p>
<p><span class="sc">tramp</span>'s mailing list is moderated but even non-subscribers can
post for moderator approval.  Sometimes this approval step may take as
long as 48 hours due to public holidays.

   </p>
<p><a href="mailto:tramp-devel@gnu.org">tramp-devel@gnu.org</a> is the mailing list.  Messages sent to
this address go to all the subscribers.  This is <em>not</em> the
address to send subscription requests to.

   </p>
<p>To subscribe to the mailing list, visit:
<a href="http://lists.gnu.org/mailman/listinfo/tramp-devel/">the <span class="sc">tramp</span> Mail Subscription Page</a>.

   </p>
<p><a name="index-tramp_002dbug-204"></a>Check if the bug or problem is already addressed in See <a href="#Frequently-Asked-Questions">Frequently Asked Questions</a>.

   </p>
<p>Run <kbd>M-x tramp-bug</kbd> to generate a buffer with details of the
system along with the details of the <span class="sc">tramp</span>
installation.  Please include these details with the bug report.

   </p>
<p>The bug report must describe in as excruciating detail as possible the
steps required to reproduce the problem.  These details must include
the setup of the remote host and any special or unique conditions that
exist.

   </p>
<p>Include a minimal test case that reproduces the problem.  This will
help the development team find the best solution and avoid unrelated
detours.

   </p>
<p>To exclude cache-related problems, flush all caches before running the
test, <a href="#Cleanup-remote-connections">Cleanup remote connections</a>.

   </p>
<p>When including <span class="sc">tramp</span>'s messages in the bug report, increase
the verbosity level to 6 (see <a href="#Traces-and-Profiles">Traces</a>) in the
<samp><span class="file">~/.emacs</span></samp> file before repeating steps to the bug.  Include the
contents of the <samp><span class="file">*tramp/foo*</span></samp> and <samp><span class="file">*debug tramp/foo*</span></samp>
buffers with the bug report.

   </p>
<p><strong>Note</strong> that a verbosity level greater than 6 is not necessary
at this stage.  Also note that a verbosity level of 6 or greater, the
contents of files and directories will be included in the debug
buffer.  Passwords typed in <span class="sc">tramp</span> will never be included
there.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Frequently-Asked-Questions"></a></div>

<h2 class="chapter">7 Frequently Asked Questions</h2>

<p><a name="index-frequently-asked-questions-205"></a><a name="index-FAQ-206"></a>
     </p>
<ul>
<li>Where is the latest <span class="sc">tramp</span>?

     <p><span class="sc">tramp</span> is available at the GNU URL:

     </p>
<p class="noindent"><a href="ftp://ftp.gnu.org/gnu/tramp/">ftp://ftp.gnu.org/gnu/tramp/</a>

     </p>
<p class="noindent"><span class="sc">tramp</span>'s GNU project page is located here:

     </p>
<p class="noindent"><a href="http://savannah.gnu.org/projects/tramp/">http://savannah.gnu.org/projects/tramp/</a>

     </p>
</li>
<li>Which systems does it work on?

     <p>The package works successfully on Emacs 22, Emacs 23, Emacs 24, Emacs
25, XEmacs 21 (starting with 21.4), and SXEmacs 22.

     </p>
<p>While Unix and Unix-like systems are the primary remote targets,
<span class="sc">tramp</span> has equal success connecting to other platforms, such as
MS Windows XP/Vista/7.

     </p>
</li>
<li>How to speed up <span class="sc">tramp</span>?

     <p><span class="sc">tramp</span> does many things in the background, some of which
depends on network speeds, response speeds of remote hosts, and
authentication delays.  During these operations, <span class="sc">tramp</span>'s
responsiveness slows down.  Some suggestions within the scope of
<span class="sc">tramp</span>'s settings include:

     </p>
<p>Use an external method, such as <samp><span class="option">scp</span></samp>, which are faster than
internal methods.

     </p>
<p>Keep the file <code>tramp-persistency-file-name</code>, which is where
<span class="sc">tramp</span> caches remote information about hosts and files.  Caching
is enabled by default.  Don't disable it.

     </p>
<p>Set <code>remote-file-name-inhibit-cache</code> to <code>nil</code> if remote
files are not independently updated outside <span class="sc">tramp</span>'s control. 
That cache cleanup will be necessary if the remote directories or
files are updated independent of <span class="sc">tramp</span>.

     </p>
<p>Set <code>tramp-completion-reread-directory-timeout</code> to <code>nil</code> to
speed up completions, <a href="#File-name-completion">File name completion</a>.

     </p>
<p>Disable version control to avoid delays:

     </p>
<pre class="lisp">          (setq vc-ignore-dir-regexp
                (format "\\(%s\\)\\|\\(%s\\)"
                        vc-ignore-dir-regexp
                        tramp-file-name-regexp))
     </pre>
     <p>Disable excessive traces.  Set <code>tramp-verbose</code> to 3 or lower,
default being 3.  Increase trace levels temporarily when hunting for
bugs.

     </p>
</li>
<li>
<span class="sc">tramp</span> does not connect to the remote host

     <p>Three main reasons for why <span class="sc">tramp</span> does not connect to the remote host:

          </p>
<ul>
<li>Unknown characters in the prompt

          <p><span class="sc">tramp</span> needs a clean recognizable prompt on the remote host for
accurate parsing.  Shell prompts that contain escape sequences for
coloring cause parsing problems.  <a href="#Remote-shell-setup">Remote shell setup</a> for
customizing prompt detection using regular expressions.

          </p>
<p>To check if the remote host's prompt is being recognized, use this
test: switch to <span class="sc">tramp</span> connection buffer <samp><span class="file">*tramp/foo*</span></samp>,
put the cursor at the top of the buffer, and then apply the following
expression:

          </p>
<pre class="example">               <kbd>M-: (re-search-forward (concat tramp-shell-prompt-pattern "$"))</kbd>
          </pre>
          <p>If the cursor has not moved to the prompt at the bottom of the buffer,
then <span class="sc">tramp</span> has failed to recognize the prompt.

          </p>
<p>When using zsh on remote hosts, disable zsh line editor because zsh
uses left-hand side and right-hand side prompts in parallel.  Add the
following line to <samp><span class="file">~/.zshrc</span></samp>:

          </p>
<pre class="example">               [ $TERM = "dumb" ] &amp;&amp; unsetopt zle &amp;&amp; PS1='$ '
          </pre>
          <p>When using fish shell on remote hosts, disable fancy formatting by
adding the following to <samp><span class="file">~/.config/fish/config.fish</span></samp>:

          </p>
<pre class="example">               function fish_prompt
                 if test $TERM = "dumb"
                    echo "\$ "
                 else
                    ...
                 end
               end
          </pre>
          <p>When using WinSSHD on remote hosts, <span class="sc">tramp</span> do not recognize the
strange prompt settings.

          </p>
</li>
<li>Echoed characters after login

          <p><span class="sc">tramp</span> suppresses echos from remote hosts with the
<samp><span class="command">stty -echo</span></samp> command.  But sometimes it is too late to suppress
welcome messages from the remote host containing harmful control
characters.  Using <samp><span class="option">sshx</span></samp> or <samp><span class="option">scpx</span></samp> methods can avoid
this problem because they allocate a pseudo tty.  See <a href="#Inline-methods">Inline methods</a>.

          </p>
</li>
<li>
<span class="sc">tramp</span> stops transferring strings longer than 500 characters

          <p>Set <code>tramp-chunksize</code> to 500 to get around this problem, which is
related to faulty implementation of <code>process-send-string</code> on
HP-UX, FreeBSD and Tru64 Unix systems.  Consult the documentation for
<code>tramp-chunksize</code> to see when this is necessary.

          </p>
<p>Set <code>file-precious-flag</code> to <code>t</code> for files accessed by
<span class="sc">tramp</span> so the file contents are checked using checksum by
first saving to a temporary file.

          </p>
<pre class="lisp">               (add-hook
                'find-file-hook
                (lambda ()
                  (when (file-remote-p default-directory)
                    (set (make-local-variable 'file-precious-flag) t))))
          </pre>
          </li>
</ul>

     </li>
<li>
<span class="sc">tramp</span> does not recognize if a <samp><span class="command">ssh</span></samp> session hangs

     <p><samp><span class="command">ssh</span></samp> sessions on the local host hang when the network is
down.  <span class="sc">tramp</span> cannot safely detect such hangs.  The network
configuration for <samp><span class="command">ssh</span></samp> can be configured to kill such hangs
with the following command in the <samp><span class="file">~/.ssh/config</span></samp>:

     </p>
<pre class="example">          Host *
               ServerAliveInterval 5
     </pre>
     </li>
<li>
<span class="sc">tramp</span> does not use default <samp><span class="command">ssh</span></samp> <code>ControlPath</code>

     <p><span class="sc">tramp</span> overwrites <code>ControlPath</code> settings when initiating
<samp><span class="command">ssh</span></samp> sessions.  <span class="sc">tramp</span> does this to fend off a stall
if a master session opened outside the Emacs session is no
longer open.  That is why <span class="sc">tramp</span> prompts for the password again
even if there is an <samp><span class="command">ssh</span></samp> already open.

     </p>
<p>Some <samp><span class="command">ssh</span></samp> versions support a <code>ControlPersist</code> option,
which allows you to set the <code>ControlPath</code> provided the variable
<code>tramp-ssh-controlmaster-options</code> is customized as follows:

     </p>
<pre class="lisp">          (setq tramp-ssh-controlmaster-options
                (concat
                  "-o ControlPath=/tmp/ssh-ControlPath-%%r@%%h:%%p "
                  "-o ControlMaster=auto -o ControlPersist=yes"))
     </pre>
     <p>Note how "%r", "%h" and "%p" must be encoded as "%%r", "%%h" and
"%%p".

     </p>
<p>If the <samp><span class="file">~/.ssh/config</span></samp> is configured appropriately for the above
behavior, then any changes to <samp><span class="command">ssh</span></samp> can be suppressed with
this <code>nil</code> setting:

     </p>
<pre class="lisp">          (setq tramp-use-ssh-controlmaster-options nil)
     </pre>
     </li>
<li>File name completion does not work with <span class="sc">tramp</span>

     <p><acronym>ANSI</acronym> escape sequences from the remote shell may cause errors
in <span class="sc">tramp</span>'s parsing of remote buffers.

     </p>
<p>To test if this is the case, open a remote shell and check if the output
of <samp><span class="command">ls</span></samp> is in color.

     </p>
<p>To disable <acronym>ANSI</acronym> escape sequences from the remote hosts,
disable <samp><span class="option">--color=yes</span></samp> or <samp><span class="option">--color=auto</span></samp> in the remote
host's <samp><span class="file">.bashrc</span></samp> or <samp><span class="file">.profile</span></samp>.  Turn this alias on and off
to see if file name completion works.

     </p>
</li>
<li>File name completion does not work in directories with large number of
files

     <p>This may be related to globbing, which is the use of shell's ability
to expand wild card specifications, such as `<samp><span class="samp">*.c</span></samp>'.  For
directories with large number of files, globbing might exceed the
shell's limit on length of command lines and hang.  <span class="sc">tramp</span> uses
globbing.

     </p>
<p>To test if globbing hangs, open a shell on the remote host and then
run `<samp><span class="samp">ls -d * ..?* &gt; /dev/null</span></samp>'.

     </p>
<p>When testing, ensure the remote shell is the same shell
(<samp><span class="command">/bin/sh</span></samp>, <samp><span class="command">ksh</span></samp> or <samp><span class="command">bash</span></samp>), that
<span class="sc">tramp</span> uses when connecting to that host.

     </p>
</li>
<li>How to get notified after <span class="sc">tramp</span> completes file transfers?

     <p>Make Emacs beep after reading from or writing to the
remote host with the following code in <samp><span class="file">~/.emacs</span></samp> file.

     </p>
<pre class="lisp">          (defadvice tramp-handle-write-region
            (after tramp-write-beep-advice activate)
            "Make tramp beep after writing a file."
            (interactive)
            (beep))
          
          (defadvice tramp-handle-do-copy-or-rename-file
            (after tramp-copy-beep-advice activate)
            "Make tramp beep after copying a file."
            (interactive)
            (beep))
          
          (defadvice tramp-handle-insert-file-contents
            (after tramp-insert-beep-advice activate)
            "Make tramp beep after inserting a file."
            (interactive)
            (beep))
     </pre>
     </li>
<li>How to get a Visual Warning when working with `<samp><span class="samp">root</span></samp>' privileges

     <p>Get a modeline indication when working with `<samp><span class="samp">root</span></samp>' privileges
with the following code (tested with Emacs 22.1) in
<samp><span class="file">~/.emacs</span></samp> file:

     </p>
<pre class="lisp">          (defun my-mode-line-function ()
            (when (string-match "^/su\\(do\\)?:" default-directory)
              (setq mode-line-format
                    (format-mode-line mode-line-format 'font-lock-warning-face))))
          
          (add-hook 'find-file-hook 'my-mode-line-function)
          (add-hook 'dired-mode-hook 'my-mode-line-function)
     </pre>
     </li>
<li>How to get host indication in the mode line?

     <p>The following code (tested with Emacs 22.1) in
<samp><span class="file">~/.emacs</span></samp> file shows it:

     </p>
<pre class="lisp">          (defconst my-mode-line-buffer-identification
            (list
             '(:eval
               (let ((host-name
                      (if (file-remote-p default-directory)
                          (tramp-file-name-host
                           (tramp-dissect-file-name default-directory))
                        (system-name))))
                 (if (string-match "^[^0-9][^.]*\\(\\..*\\)" host-name)
                     (substring host-name 0 (match-beginning 1))
                   host-name)))
             ": %12b"))
          
          (setq-default
           mode-line-buffer-identification
           my-mode-line-buffer-identification)
          
          (add-hook
           'dired-mode-hook
           (lambda ()
             (setq
              mode-line-buffer-identification
              my-mode-line-buffer-identification)))
     </pre>
     <p>The mode line in Emacs 23.1 and later versions now
contains an indication if <code>default-directory</code> for the current
buffer is on a remote host.  Moreover, the corresponding tool-tip
shows the remote host name.  The above <code>:eval</code> clause can also be
simplified to show the host name in the mode line:

     </p>
<pre class="lisp">             '(:eval
               (let ((host-name
                      (or (file-remote-p default-directory 'host)
                          (system-name))))
                 (if (string-match "^[^0-9][^.]*\\(\\..*\\)" host-name)
                     (substring host-name 0 (match-beginning 1))
                   host-name)))
     </pre>
     </li>
<li>Remote host does not understand default options for directory listing

     <p>Emacs computes the <samp><span class="command">dired</span></samp> options based on the
local host but if the remote host cannot understand the same
<samp><span class="command">ls</span></samp> command, then set them with a hook as follows:

     </p>
<pre class="lisp">          (add-hook
           'dired-before-readin-hook
           (lambda ()
             (when (file-remote-p default-directory)
               (setq dired-actual-switches "-al"))))
     </pre>
     </li>
<li>Why is <samp><span class="file">~/.sh_history</span></samp> file on the remote host growing?

     <p>Due to <samp><span class="command">ksh</span></samp> saving tilde expansions triggered by
<span class="sc">tramp</span>, the history file is probably growing rapidly.  To fix,
turn off saving history by putting this shell code in the
<samp><span class="file">.kshrc</span></samp> file:

     </p>
<pre class="example">          if [ -f $HOME/.sh_history ] ; then
             /bin/rm $HOME/.sh_history
          fi
          if [ "${HISTFILE-unset}" != "unset" ] ; then
             unset HISTFILE
          fi
          if [ "${HISTSIZE-unset}" != "unset" ] ; then
             unset HISTSIZE
          fi
     </pre>
     <p>For <samp><span class="option">ssh</span></samp>-based method, add the following line to your
<samp><span class="file">~/.ssh/environment</span></samp> file:

     </p>
<pre class="example">          HISTFILE=/dev/null
     </pre>
     </li>
<li>How to shorten long file names when typing in <span class="sc">tramp</span>?

     <p>Adapt several of these approaches to reduce typing.  If the full name
is <samp><span class="file">/ssh:news@news.my.domain:/opt/news/etc</span></samp>, then:

          </p>
<ol type="1" start="1">

          <li>Use default values for method name and user name:

          <p>You can define default methods and user names for hosts,
(see <a href="#Default-Method">Default Method</a>, see <a href="#Default-User">Default User</a>):

          </p>
<pre class="lisp">               (setq tramp-default-method "ssh"
                     tramp-default-user "news")
          </pre>
          <p>The reduced typing: <kbd>C-x C-f /news.my.domain:/opt/news/etc</kbd>.

          </p>
<p><strong>Note</strong> that there are some useful shortcuts already.  Accessing
your local host as `<samp><span class="samp">root</span></samp>' user, is possible just by <kbd>C-x C-f
/su::</kbd>.

          </p>
</li>
<li>Use configuration options of the access method:

          <p>Programs used for access methods already offer powerful configurations
(see <a href="#Customizing-Completion">Customizing Completion</a>).  For <samp><span class="option">ssh</span></samp>, configure the
file <samp><span class="file">~/.ssh/config</span></samp>:

          </p>
<pre class="example">               Host xy
                    HostName news.my.domain
                    User news
          </pre>
          <p>The reduced typing: <kbd>C-x C-f /ssh:xy:/opt/news/etc</kbd>.

          </p>
<p>Depending on the number of files in the directories, host names
completion can further reduce key strokes: <kbd>C-x C-f
/ssh:x &lt;TAB&gt;</kbd>.

          </p>
</li>
<li>Use environment variables to expand long strings

          <p>For long file names, set up environment variables that are expanded in
the minibuffer.  Environment variables are set either outside
Emacs or inside Emacs with Lisp:

          </p>
<pre class="lisp">               (setenv "xy" "/ssh:news@news.my.domain:/opt/news/etc/")
          </pre>
          <p>The reduced typing: <kbd>C-x C-f $xy &lt;RET&gt;</kbd>.

          </p>
<p><strong>Note</strong> that file name cannot be edited here because the
environment variables are not expanded during editing in the
minibuffer.

          </p>
</li>
<li>Define own keys:

          <p>Redefine another key sequence in Emacs for <kbd>C-x C-f</kbd>:

          </p>
<pre class="lisp">               (global-set-key
                [(control x) (control y)]
                (lambda ()
                  (interactive)
                  (find-file
                   (read-file-name
                    "Find Tramp file: "
                    "/ssh:news@news.my.domain:/opt/news/etc/"))))
          </pre>
          <p>Simply typing <kbd>C-x C-y</kbd> would prepare minibuffer editing of file
name.

          </p>
<p>See <a href="http://www.emacswiki.org/cgi-bin/wiki/TrampMode">the Emacs Wiki</a> for a more comprehensive example.

          </p>
</li>
<li>Define own abbreviation (1):

          <p>Abbreviation list expansion can be used to reduce typing long file names:

          </p>
<pre class="lisp">               (add-to-list
                'directory-abbrev-alist
                '("^/xy" . "/ssh:news@news.my.domain:/opt/news/etc/"))
          </pre>
          <p>The reduced typing: <kbd>C-x C-f /xy &lt;RET&gt;</kbd>.

          </p>
<p><strong>Note</strong> that file name cannot be edited here because the
environment variables are not expanded during editing in the
minibuffer.

          </p>
</li>
<li>Define own abbreviation (2):

          <p>The <code>abbrev-mode</code> gives additional flexibility for editing in the
minibuffer:

          </p>
<pre class="lisp">               (define-abbrev-table 'my-tramp-abbrev-table
                 '(("xy" "/ssh:news@news.my.domain:/opt/news/etc/")))
               
               (add-hook
                'minibuffer-setup-hook
                (lambda ()
                  (abbrev-mode 1)
                  (setq local-abbrev-table my-tramp-abbrev-table)))
               
               (defadvice minibuffer-complete
                 (before my-minibuffer-complete activate)
                 (expand-abbrev))
               
               ;; If you use partial-completion-mode
               (defadvice PC-do-completion
                 (before my-PC-do-completion activate)
                 (expand-abbrev))
          </pre>
          <p>The reduced typing: <kbd>C-x C-f xy &lt;TAB&gt;</kbd>.

          </p>
<p>The minibuffer expands for further editing.

          </p>
</li>
<li>Use bookmarks:

          <p>Use bookmarks to save Tramp file names.

          </p>
<p>Upon visiting a location with <span class="sc">tramp</span>, save it as a bookmark with
<kbd>&lt;menu-bar&gt; &lt;edit&gt; &lt;bookmarks&gt; &lt;set&gt;</kbd>.

          </p>
<p>To revisit that bookmark:
<kbd>&lt;menu-bar&gt; &lt;edit&gt; &lt;bookmarks&gt; &lt;jump&gt;</kbd>.

          </p>
</li>
<li>Use recent files:

          <p><samp><span class="file">recentf</span></samp>
remembers visited places.

          </p>
<p>Keep remote file names in the recent list without have to check for
their accessibility through remote access:

          </p>
<pre class="lisp">               (recentf-mode 1)
          </pre>
          <p>Reaching recently opened files:
<kbd>&lt;menu-bar&gt; &lt;file&gt; &lt;Open Recent&gt;</kbd>.

          </p>
</li>
<li>Use filecache:

          <p>Since <samp><span class="file">filecache</span></samp> remembers visited places, add the remote
directory to the cache:

          </p>
<pre class="lisp">               <!-- `with-eval-after-load' has been introduced with Emacs 24.4.  Shall -->
               <!-- be used when appropriate. -->
               (eval-after-load "filecache"
                 '(file-cache-add-directory
                   "/ssh:news@news.my.domain:/opt/news/etc/"))
          </pre>
          <p>Then use directory completion in the minibuffer with <kbd>C-x C-f
C-&lt;TAB&gt;</kbd>.

          </p>
</li>
<li>Use bbdb:

          <p><samp><span class="file">bbdb</span></samp> has a built-in feature for Ange-FTP files,
which also works for <span class="sc">tramp</span> file names.

          </p>
<p>Load <samp><span class="file">bbdb</span></samp> in :

          </p>
<pre class="lisp">               (require 'bbdb)
               (bbdb-initialize)
          </pre>
          <p>Create a BBDB entry with <kbd>M-x bbdb-create-ftp-site</kbd>.  Then specify
a method and user name where needed.  Examples:

          </p>
<pre class="example">               <kbd>M-x bbdb-create-ftp-site &lt;RET&gt;</kbd>
               <b>Ftp Site:</b> news.my.domain &lt;RET&gt;
               <b>Ftp Directory:</b> /opt/news/etc/ &lt;RET&gt;
               <b>Ftp Username:</b> ssh:news &lt;RET&gt;
               <b>Company:</b> &lt;RET&gt;
               <b>Additional Comments:</b> &lt;RET&gt;
          </pre>
          <p>In BBDB buffer, access an entry by pressing the key &lt;F&gt;.

          </p>
</li>
</ol>

     <p>Thanks to <span class="sc">tramp</span> users for contributing to these recipes.

     </p>
</li>
<li>Why saved multi-hop file names do not work in a new Emacs
session?

     <p>When saving ad-hoc multi-hop <span class="sc">tramp</span> file names (see <a href="#Ad_002dhoc-multi_002dhops">Ad-hoc multi-hops</a>) via bookmarks, recent files,
filecache, bbdb,
or another package, use the full ad-hoc file name including all hops,
like
<samp><span class="file">/ssh:bird@bastion|ssh:news.my.domain:/opt/news/etc</span></samp>.

     </p>
<p>Alternatively, when saving abbreviated multi-hop file names
<samp><span class="file">/ssh:news@news.my.domain:/opt/news/etc</span></samp>, the custom
option <code>tramp-save-ad-hoc-proxies</code> must be set non-<code>nil</code>
value.

     </p>
</li>
<li>How to connect to a remote Emacs session using <span class="sc">tramp</span>?

     <p>Configure Emacs Client

     </p>
<p>Then on the remote host, start the Emacs Server:

     </p>
<pre class="lisp">          (require 'server)
          (setq server-host (system-name)
                server-use-tcp t)
          (server-start)
     </pre>
     <p>If <code>(system-name)</code> of the remote host cannot be resolved on the
local host, use IP address instead.

     </p>
<p>Copy from the remote host the resulting file
<samp><span class="file">~/.emacs.d/server/server</span></samp> to the local host, to the same
location.

     </p>
<p>Then start Emacs Client from the command line:

     </p>
<pre class="example">          emacsclient /ssh:user@host:/file/to/edit
     </pre>
     <p><code>user</code> and <code>host</code> refer to the local host.

     </p>
<p>To make Emacs Client an editor for other programs, use a wrapper
script <samp><span class="file">emacsclient.sh</span></samp>:

     </p>
<pre class="example">          #!/bin/sh
          emacsclient /ssh:$(whoami)@$(hostname --fqdn):$1
     </pre>
     <p>Then change the environment variable <samp><span class="env">EDITOR</span></samp> to point to the
wrapper script:

     </p>
<pre class="example">          export EDITOR=/path/to/emacsclient.sh
     </pre>
     </li>
<li>How to disable other packages from calling <span class="sc">tramp</span>?

     <p>There are packages that call <span class="sc">tramp</span> without the user ever
entering a remote file name.  Even without applying a remote file
syntax, some packages enable <span class="sc">tramp</span> on their own.  How can users
disable such features.

          </p>
<ul>
<li>
<samp><span class="file">ido.el</span></samp>

          <p>Disable <span class="sc">tramp</span> file name completion:

          </p>
<pre class="lisp">               (custom-set-variables
                '(ido-enable-tramp-completion nil))
          </pre>
          </li>
<li>
<samp><span class="file">rlogin.el</span></samp>

          <p>Disable remote directory tracking mode:

          </p>
<pre class="lisp">               (rlogin-directory-tracking-mode -1)
          </pre>
          </li>
</ul>

     </li>
<li>How to disable <span class="sc">tramp</span>?

          <ul>
<li>To keep Ange-FTP as default the remote files access
package, set this in <samp><span class="file">.emacs</span></samp>:

          <pre class="lisp">               (setq tramp-default-method "ftp")
          </pre>
          </li>
<li>To disable both
<span class="sc">tramp</span> (and Ange-FTP),
set <code>tramp-mode</code> to <code>nil</code> in <samp><span class="file">.emacs</span></samp>.

          <pre class="lisp">               (setq tramp-mode nil)
          </pre>
          </li>
<li>To unload <span class="sc">tramp</span>, type <kbd>M-x tramp-unload-tramp</kbd>. 
Unloading <span class="sc">tramp</span> resets Ange-FTP plugins also. 
</li>
</ul>
     </li>
</ul>

<!-- For the developer -->
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Files-directories-and-localnames"></a></div>

<h2 class="chapter">8 How file names, directories and localnames are mangled and managed.</h2>

<ul class="menu">
<li>
<a accesskey="1" href="#Localname-deconstruction">Localname deconstruction</a>:     Splitting a localname into its component parts.

</li>
<li>
<a accesskey="2" href="#External-packages">External packages</a>:            Integrating with external Lisp packages. 
</li>
</ul>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Localname-deconstruction"></a></div>

<h3 class="section">8.1 Splitting a localname into its component parts</h3>

<p><span class="sc">tramp</span> package redefines lisp functions
<code>file-name-directory</code> and <code>file-name-nondirectory</code> to
accommodate the unique file naming syntax that <span class="sc">tramp</span> requires.

   </p>
<p>The replacements dissect the file name, use the original handler for
the localname, take that result, and then re-build the <span class="sc">tramp</span>
file name.  By relying on the original handlers for localnames,
<span class="sc">tramp</span> benefits from platform specific hacks to the original
handlers.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="External-packages"></a></div>

<h3 class="section">8.2 Integrating with external Lisp packages</h3>

<h4 class="subsection">8.2.1 File name completion.</h4>

<p>For name completions in the minibuffer, <span class="sc">tramp</span> depends on the
last input character to decide whether to look for method name
completion or host name completion.  For example, <kbd>C-x C-f
/ssh: &lt;TAB&gt;</kbd> is not entirely clear
if <samp><span class="option">ssh</span></samp> is a method or a host name.  But if the last input
character was either &lt;TAB&gt;, &lt;SPACE&gt; or <kbd>?</kbd>, then
<span class="sc">tramp</span> favors file name completion over host name completion.

   </p>
<p>What about external packages using other characters to trigger file
name completions? They must somehow signal this to <span class="sc">tramp</span>.  Use
the variable <code>non-essential</code> temporarily and bind it to
non-<code>nil</code> value.

</p>
<pre class="lisp">     (let ((non-essential t))
       ...)
</pre>
   <h4 class="subsection">8.2.2 File attributes cache.</h4>

<p>Keeping a local cache of remote file attributes in sync with the
remote host is a time-consuming operation.  Flushing and re-querying
these attributes can tax <span class="sc">tramp</span> to a grinding halt on busy
remote servers.

   </p>
<p>To get around these types of slow-downs in <span class="sc">tramp</span>'s
responsiveness, set the <code>process-file-side-effects</code> to <code>nil</code>
to stop <span class="sc">tramp</span> from flushing the cache.  This is helpful in
situations where callers to <code>process-file</code> know there are no file
attribute changes.  The let-bind form to accomplish this:

</p>
<pre class="lisp">     (let (process-file-side-effects)
       ...)
</pre>
   <p>For asynchronous processes, <span class="sc">tramp</span> uses a process sentinel to
flush file attributes cache.  When callers to <code>start-file-process</code>
know beforehand no file attribute changes are expected, then the
process sentinel should be set to the default state.  In cases where
the caller defines its own process sentinel, <span class="sc">tramp</span>'s process
sentinel is overwritten.  The caller can still flush the file
attributes cache in its process sentinel with this code:

</p>
<pre class="lisp">     (unless (memq (process-status proc) '(run open))
       (dired-uncache remote-directory))
</pre>
   <p>Since <span class="sc">tramp</span> traverses subdirectories starting with the
root-directory, it is most likely sufficient to make the
<code>default-directory</code> of the process buffer as the root directory.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Traces-and-Profiles"></a></div>

<h2 class="chapter">9 How to Customize Traces</h2>

<p><span class="sc">tramp</span> messages are raised with verbosity levels ranging from 0
to 10.  <span class="sc">tramp</span> does not display all messages; only those with a
verbosity level less than or equal to <code>tramp-verbose</code>.

   </p>
<p>The verbosity levels are

   </p>
<p> 0<!-- /@w -->  silent (no <span class="sc">tramp</span> messages at all)
<br>

    1<!-- /@w -->  errors
<br>

    2<!-- /@w -->  warnings
<br>

    3<!-- /@w -->  connection to remote hosts (default verbosity)
<br>

    4<!-- /@w -->  activities
<br>

    5<!-- /@w -->  internal
<br>

    6<!-- /@w -->  sent and received strings
<br>

    7<!-- /@w -->  file caching
<br>

    8<!-- /@w -->  connection properties
<br>

    9<!-- /@w -->  test commands
<br>

   10<!-- /@w -->  traces (huge)

   </p>
<p>With <code>tramp-verbose</code> greater than or equal to 4, messages are
also written to a <span class="sc">tramp</span> debug buffer.  Such debug buffers are
essential to bug and problem analyses.  For <span class="sc">tramp</span> bug reports,
set the <code>tramp-verbose</code> level to 6 (see <a href="#Bug-Reports">Bug Reports</a>).

   </p>
<p>The debug buffer is in
Outline Mode. 
In this buffer, messages can be filtered by their level.  To see
messages up to verbosity level 5, enter <kbd>C-u 6 C-c C-q</kbd>.

   </p>
<p><span class="sc">tramp</span> handles errors internally.  But to get a Lisp backtrace,
both the error and the signal have to be set as follows:

</p>
<pre class="lisp">     (setq debug-on-error t
           debug-on-signal t)
</pre>
   <p>To enable stepping through <span class="sc">tramp</span> function call traces, they
have to be specifically enabled as shown in this code:

</p>
<pre class="lisp">     (require 'trace)
     (dolist (elt (all-completions "tramp-" obarray 'functionp))
       (trace-function-background (intern elt)))
     (untrace-function 'tramp-read-passwd)
     (untrace-function 'tramp-gw-basic-authentication)
</pre>
   <p>The buffer <samp><span class="file">*trace-output*</span></samp> contains the output from the function
call traces.  Disable <code>tramp-read-passwd</code> and
<code>tramp-gw-basic-authentication</code> to stop password strings from
being written to <samp><span class="file">*trace-output*</span></samp>.

</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Issues"></a></div>

<h2 class="chapter">10 Debatable Issues and What Was Decided</h2>

     <ul>
<li>The uuencode method does not always work.

     <p><samp><span class="command">uudecode</span></samp> on some systems cannot write to stdout, but
<span class="sc">tramp</span> depends on encoding and decoding programs to be able to
read from stdin and write to stdout.

     </p>
<p>We can find ways to circumvent <samp><span class="command">uudecode</span></samp>'s ability to write
to stdout, such as writing to a temporary file and then piping that to
stdout.

     </p>
<p>But I have decided not to implement workarounds as they are too
fragile to work reliably.  Some on systems, <span class="sc">tramp</span> will not have
uuencode method.

     </p>
</li>
<li>The <span class="sc">tramp</span> file name syntax differs between Emacs and XEmacs.

     <p>The Emacs maintainers wish to use a unified file name syntax for
Ange-FTP and <span class="sc">tramp</span> so that users don't have to learn yet
another syntax though it is okay to learn new extensions.

     </p>
<p>For the XEmacs maintainers, the disruption from a unified file name
syntax are not worth the gains.  Firstly, the XEmacs package system
relies on EFS for downloading new packages and therefore is already
installed.  On the other hand, <span class="sc">tramp</span> is not installed by
default in XEmacs.  Unifying will require <span class="sc">tramp</span> installed from
the start.

</p>
</li>
</ul>

<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="GNU-Free-Documentation-License"></a></div>

<h2 class="appendix">Appendix A GNU Free Documentation License</h2>

<!-- The GNU Free Documentation License. -->
<div align="center">Version 1.3, 3 November 2008</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright © 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
     <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type="1" start="0">
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     </p>
<p>This License is a kind of “copyleft”, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     </p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     </p>
</li>
<li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The “Document”, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as “you”.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     </p>
<p>A “Modified Version” of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     </p>
<p>A “Secondary Section” is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     </p>
<p>The “Invariant Sections” are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     </p>
<p>The “Cover Texts” are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     </p>
<p>A “Transparent” copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not “Transparent” is called “Opaque”.

     </p>
<p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input
format, SGML or XML using a publicly available
DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples
of transparent image formats include PNG, XCF and
JPG.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, SGML or
XML for which the DTD and/or processing tools are
not generally available, and the machine-generated HTML,
PostScript or PDF produced by some word processors for
output purposes only.

     </p>
<p>The “Title Page” means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, “Title Page” means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     </p>
<p>The “publisher” means any person or entity that distributes copies
of the Document to the public.

     </p>
<p>A section “Entitled XYZ” means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as “Acknowledgements”,
“Dedications”, “Endorsements”, or “History”.)  To “Preserve the Title”
of such a section when you modify the Document means that it remains a
section “Entitled XYZ” according to this definition.

     </p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     </p>
</li>
<li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     </p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     </p>
</li>
<li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     </p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     </p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     </p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     </p>
</li>
<li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          </p>
<ol type="A" start="1">
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          </li>
<li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          </li>
<li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          </li>
<li>Preserve all the copyright notices of the Document.

          </li>
<li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          </li>
<li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          </li>
<li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          </li>
<li>Include an unaltered copy of this License.

          </li>
<li>Preserve the section Entitled “History”, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled “History” in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          </li>
<li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the “History” section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          </li>
<li>For any section Entitled “Acknowledgements” or “Dedications”, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          </li>
<li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          </li>
<li>Delete any section Entitled “Endorsements”.  Such a section
may not be included in the Modified Version.

          </li>
<li>Do not retitle any existing section to be Entitled “Endorsements” or
to conflict in title with any Invariant Section.

          </li>
<li>Preserve any Warranty Disclaimers.
          </li>
</ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     </p>
<p>You may add a section Entitled “Endorsements”, provided it contains
nothing but endorsements of your Modified Version by various
parties—for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     </p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     </p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     </p>
</li>
<li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     </p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     </p>
<p>In the combination, you must combine any sections Entitled “History”
in the various original documents, forming one section Entitled
“History”; likewise combine any sections Entitled “Acknowledgements”,
and any sections Entitled “Dedications”.  You must delete all
sections Entitled “Endorsements.”

     </p>
</li>
<li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     </p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     </p>
</li>
<li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an “aggregate” if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     </p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     </p>
</li>
<li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     </p>
<p>If a section in the Document is Entitled “Acknowledgements”,
“Dedications”, or “History”, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     </p>
</li>
<li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

     </p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     </p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     </p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

     </p>
</li>
<li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     </p>
<p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License “or any later version” applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

     </p>
</li>
<li>RELICENSING

     <p>“Massive Multiauthor Collaboration Site” (or “MMC Site”) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
“Massive Multiauthor Collaboration” (or “MMC”) contained in the
site means any set of copyrightable works thus published on the MMC
site.

     </p>
<p>“CC-BY-SA” means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

     </p>
<p>“Incorporate” means to publish or republish a Document, in whole or
in part, as part of another Document.

     </p>
<p>An MMC is “eligible for relicensing” if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

     </p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

        </p>
</li>
</ol>

<h3 class="heading">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

</p>
<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the “with<small class="dots">...</small>Texts.” line with this:

</p>
<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   </p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
</p>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Function-Index"></a></div>

<h2 class="unnumbered">Function Index</h2>

<ul class="index-fn" compact>
<li>
<a href="#index-my_002dtramp_002dparse-141"><code>my-tramp-parse</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dbug-204"><code>tramp-bug</code></a>: <a href="#Bug-Reports">Bug Reports</a>
</li>
<li>
<a href="#index-tramp_002dcleanup_002dall_002dbuffers-202"><code>tramp-cleanup-all-buffers</code></a>: <a href="#Cleanup-remote-connections">Cleanup remote connections</a>
</li>
<li>
<a href="#index-tramp_002dcleanup_002dall_002dconnections-201"><code>tramp-cleanup-all-connections</code></a>: <a href="#Cleanup-remote-connections">Cleanup remote connections</a>
</li>
<li>
<a href="#index-tramp_002dcleanup_002dconnection-199"><code>tramp-cleanup-connection</code></a>: <a href="#Cleanup-remote-connections">Cleanup remote connections</a>
</li>
<li>
<a href="#index-tramp_002dcleanup_002dthis_002dconnection-200"><code>tramp-cleanup-this-connection</code></a>: <a href="#Cleanup-remote-connections">Cleanup remote connections</a>
</li>
<li>
<a href="#index-tramp_002dget_002dcompletion_002dfunction-131"><code>tramp-get-completion-function</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dparse_002dhosts-138"><code>tramp-parse-hosts</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dparse_002dnetrc-140"><code>tramp-parse-netrc</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dparse_002dpasswd-139"><code>tramp-parse-passwd</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dparse_002drhosts-133"><code>tramp-parse-rhosts</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dparse_002dshostkeys-137"><code>tramp-parse-shostkeys</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dparse_002dshosts-134"><code>tramp-parse-shosts</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dset_002dcompletion_002dfunction-132"><code>tramp-set-completion-function</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
   </ul>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Variable-Index"></a></div>

<h2 class="unnumbered">Variable Index</h2>



<ul class="index-vr" compact>
<li>
<a href="#index-auth_002dsources-143"><code>auth-sources</code></a>: <a href="#Password-handling">Password handling</a>
</li>
<li>
<a href="#index-backup_002ddirectory_002dalist-169"><code>backup-directory-alist</code></a>: <a href="#Auto_002dsave-and-Backup">Auto-save and Backup</a>
</li>
<li>
<a href="#index-password_002dcache-145"><code>password-cache</code></a>: <a href="#Password-handling">Password handling</a>
</li>
<li>
<a href="#index-password_002dcache_002dexpiry-144"><code>password-cache-expiry</code></a>: <a href="#Password-handling">Password handling</a>
</li>
<li>
<a href="#index-tramp_002dactions_002dbefore_002dshell-163"><code>tramp-actions-before-shell</code></a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-tramp_002dcompletion_002dfunction_002dalist-130"><code>tramp-completion-function-alist</code></a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-tramp_002dcompletion_002dreread_002ddirectory_002dtimeout-182"><code>tramp-completion-reread-directory-timeout</code></a>: <a href="#File-name-completion">File name completion</a>
</li>
<li>
<a href="#index-tramp_002dconnection_002dproperties-148"><code>tramp-connection-properties</code></a>: <a href="#Predefined-connection-information">Predefined connection information</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002dhost-117"><code>tramp-default-host</code></a>: <a href="#Default-Host">Default Host</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002dhost_002dalist-118"><code>tramp-default-host-alist</code></a>: <a href="#Default-Host">Default Host</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002dmethod-110"><code>tramp-default-method</code></a>: <a href="#Default-Method">Default Method</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002dmethod_002dalist-111"><code>tramp-default-method-alist</code></a>: <a href="#Default-Method">Default Method</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002dproxies_002dalist-122"><code>tramp-default-proxies-alist</code></a>: <a href="#Multi_002dhops">Multi-hops</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002dremote_002dpath-151"><code>tramp-default-remote-path</code></a>: <a href="#Remote-programs">Remote programs</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002duser-114"><code>tramp-default-user</code></a>: <a href="#Default-User">Default User</a>
</li>
<li>
<a href="#index-tramp_002ddefault_002duser_002dalist-115"><code>tramp-default-user-alist</code></a>: <a href="#Default-User">Default User</a>
</li>
<li>
<a href="#index-tramp_002dgvfs_002dmethods-102"><code>tramp-gvfs-methods</code></a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-tramp_002down_002dremote_002dpath-152"><code>tramp-own-remote-path</code></a>: <a href="#Remote-programs">Remote programs</a>
</li>
<li>
<a href="#index-tramp_002dpassword_002dprompt_002dregexp-158"><code>tramp-password-prompt-regexp</code></a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-tramp_002dpersistency_002dfile_002dname-147"><code>tramp-persistency-file-name</code></a>: <a href="#Connection-caching">Connection caching</a>
</li>
<li>
<a href="#index-tramp_002dremote_002dpath-149"><code>tramp-remote-path</code></a>: <a href="#Remote-programs">Remote programs</a>
</li>
<li>
<a href="#index-tramp_002drestricted_002dshell_002dhosts_002dalist-123"><code>tramp-restricted-shell-hosts-alist</code></a>: <a href="#Multi_002dhops">Multi-hops</a>
</li>
<li>
<a href="#index-tramp_002dsave_002dad_002dhoc_002dproxies-187"><code>tramp-save-ad-hoc-proxies</code></a>: <a href="#Ad_002dhoc-multi_002dhops">Ad-hoc multi-hops</a>
</li>
<li>
<a href="#index-tramp_002dshell_002dprompt_002dpattern-157"><code>tramp-shell-prompt-pattern</code></a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-tramp_002dterminal_002dtype-162"><code>tramp-terminal-type</code></a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-tramp_002dwrong_002dpasswd_002dregexp-159"><code>tramp-wrong-passwd-regexp</code></a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
   </ul>
<mbp:pagebreak></mbp:pagebreak><div class="node"><a name="Concept-Index"></a></div>

<h2 class="unnumbered">Concept Index</h2>



<ul class="index-cp" compact>
<li>
<a href="#index-g_t_0040file_007b_002elogin_007d-file-155"><samp><span class="file">.login</span></samp> file</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-g_t_0040file_007b_002eprofile_007d-file-154"><samp><span class="file">.profile</span></samp> file</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-adb-method-85">adb method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-afp-method-90">afp method</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-android-shell-setup-166">android shell setup</a>: <a href="#Android-shell-setup">Android shell setup</a>
</li>
<li>
<a href="#index-auto_002dsave-167">auto-save</a>: <a href="#Auto_002dsave-and-Backup">Auto-save and Backup</a>
</li>
<li>
<a href="#index-backup-168">backup</a>: <a href="#Auto_002dsave-and-Backup">Auto-save and Backup</a>
</li>
<li>
<a href="#index-base_002d64-encoding-19">base-64 encoding</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-behind-the-scenes-2">behind the scenes</a>: <a href="#Overview">Overview</a>
</li>
<li>
<a href="#index-bug-reports-203">bug reports</a>: <a href="#Bug-Reports">Bug Reports</a>
</li>
<li>
<a href="#index-caching-146">caching</a>: <a href="#Connection-caching">Connection caching</a>
</li>
<li>
<a href="#index-choosing-the-right-method-112">choosing the right method</a>: <a href="#Default-Method">Default Method</a>
</li>
<li>
<a href="#index-cleanup-198">cleanup</a>: <a href="#Cleanup-remote-connections">Cleanup remote connections</a>
</li>
<li>
<a href="#index-compile-188">compile</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-configuration-8">configuration</a>: <a href="#Configuration">Configuration</a>
</li>
<li>
<a href="#index-connection-types_002c-overview-10">connection types, overview</a>: <a href="#Connection-types">Connection types</a>
</li>
<li>
<a href="#index-create-your-own-methods-127">create your own methods</a>: <a href="#Customizing-Methods">Customizing Methods</a>
</li>
<li>
<a href="#index-customizing-completion-128">customizing completion</a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-customizing-methods-125">customizing methods</a>: <a href="#Customizing-Methods">Customizing Methods</a>
</li>
<li>
<a href="#index-Cygwin-and-ssh_002dagent-175">Cygwin and ssh-agent</a>: <a href="#Windows-setup-hints">Windows setup hints</a>
</li>
<li>
<a href="#index-Cygwin_002c-issues-170">Cygwin, issues</a>: <a href="#Windows-setup-hints">Windows setup hints</a>
</li>
<li>
<a href="#index-dav-method-93">dav method</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-davs-method-94">davs method</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-dbus-88">dbus</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-default-configuration-9">default configuration</a>: <a href="#Configuration">Configuration</a>
</li>
<li>
<a href="#index-default-host-116">default host</a>: <a href="#Default-Host">Default Host</a>
</li>
<li>
<a href="#index-default-method-109">default method</a>: <a href="#Default-Method">Default Method</a>
</li>
<li>
<a href="#index-default-user-113">default user</a>: <a href="#Default-User">Default User</a>
</li>
<li>
<a href="#index-details-of-operation-3">details of operation</a>: <a href="#Overview">Overview</a>
</li>
<li>
<a href="#index-development-history-7">development history</a>: <a href="#History">History</a>
</li>
<li>
<a href="#index-eshell-192">eshell</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-external-methods-12">external methods</a>: <a href="#Connection-types">Connection types</a>
</li>
<li>
<a href="#index-external-methods-43">external methods</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-FAQ-206">FAQ</a>: <a href="#Frequently-Asked-Questions">Frequently Asked Questions</a>
</li>
<li>
<a href="#index-fcp-_0028with-fcp-method_0029-73">fcp (with fcp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-fcp-method-71">fcp method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-file-name-completion-181">file name completion</a>: <a href="#File-name-completion">File name completion</a>
</li>
<li>
<a href="#index-file-name-examples-180">file name examples</a>: <a href="#File-name-Syntax">File name Syntax</a>
</li>
<li>
<a href="#index-file-name-syntax-179">file name syntax</a>: <a href="#File-name-Syntax">File name Syntax</a>
</li>
<li>
<a href="#index-frequently-asked-questions-205">frequently asked questions</a>: <a href="#Frequently-Asked-Questions">Frequently Asked Questions</a>
</li>
<li>
<a href="#index-fsh-_0028with-fcp-method_0029-72">fsh (with fcp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-fsh-method-75">fsh method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-ftp-method-81">ftp method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-gateway-methods-104">gateway methods</a>: <a href="#Gateway-methods">Gateway methods</a>
</li>
<li>
<a href="#index-gdb-194">gdb</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-gud-193">gud</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-gvfs-based-methods-87">gvfs based methods</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-history-6">history</a>: <a href="#History">History</a>
</li>
<li>
<a href="#index-how-it-works-4">how it works</a>: <a href="#Overview">Overview</a>
</li>
<li>
<a href="#index-inline-methods-11">inline methods</a>: <a href="#Connection-types">Connection types</a>
</li>
<li>
<a href="#index-inline-methods-15">inline methods</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-Kerberos-_0028with-krlogin-method_0029-34">Kerberos (with krlogin method)</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-Kerberos-_0028with-ksu-method_0029-37">Kerberos (with ksu method)</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-krlogin-method-33">krlogin method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-ksu-method-36">ksu method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-adb-84">method adb</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-afp-89">method afp</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-method-dav-91">method dav</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-method-davs-92">method davs</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-method-fcp-70">method fcp</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-fsh-74">method fsh</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-ftp-80">method ftp</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-krlogin-32">method krlogin</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-ksu-35">method ksu</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-nc-76">method nc</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-obex-95">method obex</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-method-plink-38">method plink</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-plinkx-40">method plinkx</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-pscp-60">method pscp</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-psftp-65">method psftp</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-rcp-44">method rcp</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-rsh-20">method rsh</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-rsync-52">method rsync</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-scp-48">method scp</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-scpx-56">method scpx</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-scpx-with-Cygwin-173">method scpx with Cygwin</a>: <a href="#Windows-setup-hints">Windows setup hints</a>
</li>
<li>
<a href="#index-method-sftp-97">method sftp</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-method-smb-82">method smb</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-method-socks-107">method socks</a>: <a href="#Gateway-methods">Gateway methods</a>
</li>
<li>
<a href="#index-method-ssh-22">method ssh</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-sshx-30">method sshx</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-sshx-with-Cygwin-171">method sshx with Cygwin</a>: <a href="#Windows-setup-hints">Windows setup hints</a>
</li>
<li>
<a href="#index-method-su-26">method su</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-sudo-28">method sudo</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-synce-99">method synce</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-method-telnet-24">method telnet</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-method-tunnel-105">method tunnel</a>: <a href="#Gateway-methods">Gateway methods</a>
</li>
<li>
<a href="#index-methods_002c-external-42">methods, external</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-methods_002c-external-14">methods, external</a>: <a href="#Connection-types">Connection types</a>
</li>
<li>
<a href="#index-methods_002c-gateway-103">methods, gateway</a>: <a href="#Gateway-methods">Gateway methods</a>
</li>
<li>
<a href="#index-methods_002c-gvfs-86">methods, gvfs</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-methods_002c-inline-13">methods, inline</a>: <a href="#Connection-types">Connection types</a>
</li>
<li>
<a href="#index-methods_002c-inline-16">methods, inline</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-mimencode-18">mimencode</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-multi_002dhop-119">multi-hop</a>: <a href="#Multi_002dhops">Multi-hops</a>
</li>
<li>
<a href="#index-multi_002dhop_002c-ad_002dhoc-184">multi-hop, ad-hoc</a>: <a href="#Ad_002dhoc-multi_002dhops">Ad-hoc multi-hops</a>
</li>
<li>
<a href="#index-nc-_0028with-nc-method_0029-78">nc (with nc method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-nc-method-77">nc method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-nc-Unix-command-165">nc Unix command</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-obex-method-96">obex method</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-obtaining-Tramp-5">obtaining Tramp</a>: <a href="#Obtaining-Tramp">Obtaining Tramp</a>
</li>
<li>
<a href="#index-overview-1">overview</a>: <a href="#Overview">Overview</a>
</li>
<li>
<a href="#index-passwords-142">passwords</a>: <a href="#Password-handling">Password handling</a>
</li>
<li>
<a href="#index-perldb-195">perldb</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-plink-_0028with-pscp-method_0029-63">plink (with pscp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-plink-_0028with-psftp-method_0029-68">plink (with psftp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-plink-method-39">plink method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-plinkx-method-41">plinkx method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-powershell-197">powershell</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-proxy-hosts-120">proxy hosts</a>: <a href="#Multi_002dhops">Multi-hops</a>
</li>
<li>
<a href="#index-proxy-hosts_002c-ad_002dhoc-185">proxy hosts, ad-hoc</a>: <a href="#Ad_002dhoc-multi_002dhops">Ad-hoc multi-hops</a>
</li>
<li>
<a href="#index-pscp-_0028with-pscp-method_0029-62">pscp (with pscp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-pscp-_0028with-psftp-method_0029-67">pscp (with psftp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-pscp-method-61">pscp method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-psftp-method-66">psftp method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-PuTTY-_0028with-pscp-method_0029-64">PuTTY (with pscp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-PuTTY-_0028with-psftp-method_0029-69">PuTTY (with psftp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-rcp-_0028with-rcp-method_0029-46">rcp (with rcp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-rcp-method-45">rcp method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-recompile-189">recompile</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-remote-shell-setup-153">remote shell setup</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-rsh-_0028with-rcp-method_0029-47">rsh (with rcp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-rsh-method-21">rsh method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-rsync-_0028with-rsync-method_0029-54">rsync (with rsync method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-rsync-method-53">rsync method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-scp-_0028with-scp-method_0029-50">scp (with scp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-scp-_0028with-scpx-method_0029-58">scp (with scpx method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-scp-method-49">scp method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-scpx-method-57">scpx method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-scpx-method-with-Cygwin-174">scpx method with Cygwin</a>: <a href="#Windows-setup-hints">Windows setup hints</a>
</li>
<li>
<a href="#index-selecting-config-files-129">selecting config files</a>: <a href="#Customizing-Completion">Customizing Completion</a>
</li>
<li>
<a href="#index-sftp-method-98">sftp method</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-shell-190">shell</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-shell-init-files-156">shell init files</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-shell_002dcommand-191">shell-command</a>: <a href="#Remote-processes">Remote processes</a>
</li>
<li>
<a href="#index-smb-method-83">smb method</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-socks-method-108">socks method</a>: <a href="#Gateway-methods">Gateway methods</a>
</li>
<li>
<a href="#index-ssh-_0028with-rsync-method_0029-55">ssh (with rsync method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-ssh-_0028with-scp-method_0029-51">ssh (with scp method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-ssh-_0028with-scpx-method_0029-59">ssh (with scpx method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-ssh-method-23">ssh method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-SSH_005fAUTH_005fSOCK-and-_0040value_007bemacsname_007d-on-Windows-176">SSH_AUTH_SOCK and Emacs on Windows</a>: <a href="#Windows-setup-hints">Windows setup hints</a>
</li>
<li>
<a href="#index-sshx-method-31">sshx method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-sshx-method-with-Cygwin-172">sshx method with Cygwin</a>: <a href="#Windows-setup-hints">Windows setup hints</a>
</li>
<li>
<a href="#index-su-method-27">su method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-sudo-method-29">sudo method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-synce-method-100">synce method</a>: <a href="#GVFS-based-methods">GVFS based methods</a>
</li>
<li>
<a href="#index-telnet-_0028with-nc-method_0029-79">telnet (with nc method)</a>: <a href="#External-methods">External methods</a>
</li>
<li>
<a href="#index-telnet-method-25">telnet method</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-tset-Unix-command-161">tset Unix command</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-tunnel-method-106">tunnel method</a>: <a href="#Gateway-methods">Gateway methods</a>
</li>
<li>
<a href="#index-type_002dahead-178">type-ahead</a>: <a href="#Usage">Usage</a>
</li>
<li>
<a href="#index-Unix-command-nc-164">Unix command nc</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-Unix-command-tset-160">Unix command tset</a>: <a href="#Remote-shell-setup">Remote shell setup</a>
</li>
<li>
<a href="#index-using-non_002dstandard-methods-126">using non-standard methods</a>: <a href="#Customizing-Methods">Customizing Methods</a>
</li>
<li>
<a href="#index-using-_0040value_007btramp_007d-177">using <span class="sc">tramp</span></a>: <a href="#Usage">Usage</a>
</li>
<li>
<a href="#index-uuencode-17">uuencode</a>: <a href="#Inline-methods">Inline methods</a>
</li>
<li>
<a href="#index-winexe-196">winexe</a>: <a href="#Remote-processes">Remote processes</a>
</li>
   </ul>
<div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4>
<p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> HTTP tunnels
are intended for secure SSL/TLS communication.  Therefore, many proxy
servers restrict the tunnels to related target ports.  You might need
to run your ssh server on your target host `<samp><span class="samp">host.other.domain</span></samp>' on
such a port, like 443 (https).  See
<a href="http://savannah.gnu.org/maintenance/CvsFromBehindFirewall">http://savannah.gnu.org/maintenance/CvsFromBehindFirewall</a> for
discussion of ethical issues.</p>

   <p></p>
<hr>
</div>

</body>
</html>
